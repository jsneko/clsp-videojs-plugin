!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t=n();for(var o in t)("object"==typeof exports?exports:e)[o]=t[o]}}(window,function(){return function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){e.exports=t(1)},function(e,n,t){"use strict";t.r(n),n.default=function(){var e;function n(n,t){console.warn("Error for "+e.id+":"),console.warn(n),t&&console.error(t)}function t(){if(window.MQTTClient)try{window.MQTTClient.disconnect()}catch(e){if(e.message.startsWith("AMQJS0011E"))return;n("Error while trying to disconnect...",e)}}return{onunload:function(){t()},clspRouter:function(){var o=-1;function r(t){try{t.clientId=e.id,window.parent.postMessage(t,"*")}catch(e){n('Error while executing "postMessage"...',e)}}function i(e){var n="";try{n=e.payloadString}catch(e){}r({event:"data",destinationName:e.destinationName,payloadString:n,payloadBytes:e.payloadBytes||null})}function a(e){var o=e.data;try{switch(o.method){case"destroy":t();break;case"subscribe":window.MQTTClient.subscribe(o.topic);break;case"unsubscribe":window.MQTTClient.unsubscribe(o.topic);break;case"publish":try{!function(e,t){try{var o=new window.parent.Paho.Message(t);o.destinationName=e,window.MQTTClient.send(o)}catch(e){n("Error while sending mqtt message...",e)}}(o.topic,JSON.stringify(o.data))}catch(e){return n("Unable to parse message data..."),void n(o.data)}break;default:n('Unknown message method "'+o.method+'" received...')}}catch(e){n("Unknown onMessage error...",e),r({event:"fail",reason:"network failure"}),t()}}function c(){try{t()}catch(e){}-1===o&&(o=setInterval(()=>{l()},2e3))}function s(){window.addEventListener?window.addEventListener("message",a,!1):window.attachEvent("onmessage",a),r({event:"ready"}),-1!==o&&(clearInterval(o),o=-1)}function d(e){var t="Failed to connect: Error code "+parseInt(e.errorCode)+": "+e.errorMessage;n(t),r({event:"fail",reason:t}),c()}function u(e){if(0!==e.errorCode){var t="Lost connection: Error code "+parseInt(e.errorCode)+": "+e.errorMessage;n(t),r({event:"fail",reason:t}),c()}}function l(){var t=new window.parent.Paho.Message(JSON.stringify({clientId:e.id}));t.destinationName="iov/clientDisconnect";var o={timeout:120,onSuccess:s,onFailure:d,willMessage:t};!0===e.config.useSSL&&(o.useSSL=!0);try{window.MQTTClient.connected||window.MQTTClient.socket?console.warn("Trying to connect to an already-connected client!"):window.MQTTClient.connect(o)}catch(e){n("Unknown connection failure...",e),r({event:"fail",reason:"connect failed"})}}e=window.parent.videojs.getPlugin("clsp").conduits.getById(window.MqttClientId).iov,function(){try{window.MQTTClient=new window.parent.Paho.Client(e.config.wsbroker,e.config.wsport,e.id),window.MQTTClient.onConnectionLost=u,window.MQTTClient.onMessageArrived=i,l()}catch(e){console.error("IFRAME error"),console.error(e)}}()}}}}])});