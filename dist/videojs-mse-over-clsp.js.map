{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/debug/src/browser.js","webpack:///./node_modules/debug/src/common.js","webpack:///./node_modules/global/document.js","webpack:///./node_modules/ms/index.js","webpack:///./node_modules/node-libs-browser/node_modules/process/browser.js","webpack:///./node_modules/srcdoc-polyfill/srcdoc-polyfill.js","webpack:///./node_modules/uuid/lib/bytesToUuid.js","webpack:///./node_modules/uuid/lib/rng-browser.js","webpack:///./node_modules/uuid/v4.js","webpack:///./node_modules/videojs-errors/dist/videojs-errors.es.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/js/MqttHandler.js","webpack:///./src/js/MqttSourceHandler.js","webpack:///./src/js/MseOverMqttPlugin.js","webpack:///./src/js/conduit/clspConduit.generated.js","webpack:///./src/js/iov/IOV.js","webpack:///./src/js/iov/MqttConduitCollection.js","webpack:///./src/js/iov/MqttTopicHandlers.js","webpack:///./src/js/iov/MqttTransport.js","webpack:///./src/js/iov/player.js","webpack:///./src/js/utils.js","webpack:///./src/js/videojs-mse-over-clsp.js","webpack:///./src/styles/videojs-mse-over-clsp.scss","webpack:///min-document (ignored)","webpack:///external \"videojs\""],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","exports","log","formatArgs","save","load","useColors","storage","localstorage","colors","window","process","type","__nwjs","navigator","userAgent","toLowerCase","match","document","documentElement","style","WebkitAppearance","console","firebug","exception","table","parseInt","RegExp","$1","args","namespace","module","humanize","diff","c","color","splice","index","lastC","replace","_console","apply","arguments","namespaces","setItem","removeItem","error","r","getItem","env","DEBUG","localStorage","require","formatters","j","v","JSON","stringify","message","setup","createDebug","debug","default","coerce","disable","enable","enabled","Object","keys","forEach","key","instances","names","skips","selectColor","hash","i","length","charCodeAt","Math","abs","prevTime","_len","Array","_key","self","curr","Number","Date","ms","prev","unshift","format","formatter","val","call","logFn","destroy","extend","init","push","indexOf","delimiter","split","len","substr","instance","name","test","Error","stack","topLevel","global","minDoc","doccy","s","m","h","d","w","y","options","parse","isNaN","long","fmtLong","fmtShort","str","String","exec","n","parseFloat","undefined","msAbs","round","plural","isPlural","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","setTimeout","e","clearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","run","nextTick","Item","array","title","browser","argv","version","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","root","factory","_srcDoc","srcDoc","define","idx","iframes","isCompliant","createElement","sandboxMsg","sandboxAllow","validate","iframe","sandbox","getAttribute","force","removeAttribute","logError","setAttribute","implementations","compliant","content","legacy","jsUrl","contentWindow","location","msg","set","noConflict","getElementsByTagName","byteToHex","toString","bytesToUuid","buf","offset","bth","join","getRandomValues","crypto","bind","msCrypto","rnds8","Uint8Array","whatwgRNG","rnds","mathRNG","random","rng","v4","ii","FlashObj","videojs","getComponent","defaultDismiss","IS_IPHONE","registerPlugin","plugin","defaults","header","code","dismiss","errors","headline","initPlugin","player","monitor","waiting","isStalling","updateErrors","updates","mergeOptions","k","err","resetMonitor","removeClass","paused","ended","addClass","cleanup","listener","shift","healthcheck","fn","check","tech","$","vjs_getProperty","onPlayStartMonitor","lastTime","currentTime","onPlayNoSource","currentSrc","onErrorHandler","details","dialogContent","localize","isSupported","flashMessage","display","getChild","className","id","closeable","innerHTML","fillWith","contentEl","firstChild","appendChild","el","okButton","querySelector","close","currentWidth","currentHeight","one","onDisposeHandler","reInitPlugin","newOptions","getAll","disableProgress","ready","VERSION","warn","g","Function","eval","Component","MqttHandler","source","mqtt","tech_","source_","Debug","src","srcConfig","IOVPlayer","generateIOVConfigFromCLSPURL","port","address","streamName","useSSL","_MqttHandler","mode","canHandleSource","srcObj","startsWith","utils","supported","canPlayType","handleSource","localOptions","Plugin","getPlugin","registered","MseOverMqttPlugin","getTech","registerSourceHandler","MqttSourceHandler","pluginName","customClass","PLAYER_ERR_NOT_COMPAT","mqttHandler","videoElement","iov","IOV","appStart","mqtt_player","videoTag","children","trigger","playing","play","target","loadingSpinner","hide","addEventListener","restart","initialize","iframe_code","pframe_client","config","onReady","dispatch","command","postMessage","t","setInterval","clearInterval","inboundHandler","handler","destinationName","subscribe","topic","callback","method","unsubscribe","publish","data","transaction","resp_topic","clientId","mqtt_resp","resp","payloadString","mqttConduit","client","MqttUseSSL","markup","wsbroker","wsport","origin","srcdoc","width","height","videoElementParent","parentNode","DEBUG_PREFIX","NoMediaSourceAlert","MediaSource","WebKitMediaSource","alert","uuidv4","playerInstance","mqttTopicHandlers","MqttTopicHandlers","mqttConduitCollection","MqttConduitCollection","transport","MqttTransport","events","connection_lost","responseObject","on_message","msghandler","text","compatibilityCheck","event","exists","conduit","getById","eventType","videoElementParentId","reason","_conduits","_statsTimer","statsMsg","inkbps","byteCount","hasOwnProperty","_handlers","get","host","addFromIov","silly","_src","parser","default_port","substring","href","paths","pathname","hostname","MAX_SEQ_PROC","LogSourceBuffer","LogSourceBufferTopic","resetPlayState","moovBox","moofBox","retry_count","_start_play","_on_sourceopen","_on_sourceended","_on_moof","_on_updateend","onTransportTransaction","state","seqnum","seqnumProcessed","source_buffer_ready","dropCounter","mimeCodec","isTypeSupported","_fault","response","new_mimeCodec","new_guid","guid","isMimeCodecSupported","initSegmentTopic","mqtt_msg","moov","payloadBytes","oldTopic","newTopic","moof_mqtt_msg","vqueue","slice","reinitializeMse","parentNodeId","iframe_elm","getElementById","parent","removeChild","play_request_topic","newStream","request","btoa","videoPlayer","PLAYER_ERR_IOV","mediaSource","URL","revokeObjectURL","video","createObjectURL","stop","eid","onFirstChunk","onVideoRecv","getPlayer","bytearray","Paho","MQTT","Message","MQTTClient","send","initseg_topic","_async_play_loop","clone","cloneNode","replaceChild","url","new_cfg","change","resync_topic","sourceBuffer","updating","_appendBuffer_event","appendBuffer","readyState","_do_on_sourceopen","addSourceBuffer","promise","then","_","catch","ex","buffered","start","end","time_buffered","limit","remove","MINIMUM_CHROME_VERSION","browserIsCompatable","isChrome","Boolean","chrome","webstore","clspPlugin","register"],"mappings":"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","file":"videojs-mse-over-clsp.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/videojs-mse-over-clsp.js\");\n","\"use strict\";\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n/**\n * Colors.\n */\n\nexports.colors = ['#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'];\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n// eslint-disable-next-line complexity\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n    return true;\n  } // Internet Explorer and Edge do not support colors.\n\n\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  } // Is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\n\n  return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773\n  typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?\n  // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\n}\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\n\nfunction formatArgs(args) {\n  args[0] = (this.useColors ? '%c' : '') + this.namespace + (this.useColors ? ' %c' : ' ') + args[0] + (this.useColors ? '%c ' : ' ') + '+' + module.exports.humanize(this.diff);\n\n  if (!this.useColors) {\n    return;\n  }\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit'); // The final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function (match) {\n    if (match === '%%') {\n      return;\n    }\n\n    index++;\n\n    if (match === '%c') {\n      // We only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n  args.splice(lastC, 0, c);\n}\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\n\nfunction log() {\n  var _console;\n\n  // This hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return (typeof console === \"undefined\" ? \"undefined\" : _typeof(console)) === 'object' && console.log && (_console = console).log.apply(_console, arguments);\n}\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\n\nfunction save(namespaces) {\n  try {\n    if (namespaces) {\n      exports.storage.setItem('debug', namespaces);\n    } else {\n      exports.storage.removeItem('debug');\n    }\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\n\nfunction load() {\n  var r;\n\n  try {\n    r = exports.storage.getItem('debug');\n  } catch (error) {} // Swallow\n  // XXX (@Qix-) should we be logging these?\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\n\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\n\nfunction localstorage() {\n  try {\n    // TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n    // The Browser also has localStorage in the global context.\n    return localStorage;\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n\nmodule.exports = require('./common')(exports);\nvar formatters = module.exports.formatters;\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n  try {\n    return JSON.stringify(v);\n  } catch (error) {\n    return '[UnexpectedJSONParseError]: ' + error.message;\n  }\n};\n\n","\"use strict\";\n\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\nfunction setup(env) {\n  createDebug.debug = createDebug;\n  createDebug.default = createDebug;\n  createDebug.coerce = coerce;\n  createDebug.disable = disable;\n  createDebug.enable = enable;\n  createDebug.enabled = enabled;\n  createDebug.humanize = require('ms');\n  Object.keys(env).forEach(function (key) {\n    createDebug[key] = env[key];\n  });\n  /**\n  * Active `debug` instances.\n  */\n\n  createDebug.instances = [];\n  /**\n  * The currently active debug mode names, and names to skip.\n  */\n\n  createDebug.names = [];\n  createDebug.skips = [];\n  /**\n  * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n  *\n  * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n  */\n\n  createDebug.formatters = {};\n  /**\n  * Selects a color for a debug namespace\n  * @param {String} namespace The namespace string for the for the debug instance to be colored\n  * @return {Number|String} An ANSI color code for the given namespace\n  * @api private\n  */\n\n  function selectColor(namespace) {\n    var hash = 0;\n\n    for (var i = 0; i < namespace.length; i++) {\n      hash = (hash << 5) - hash + namespace.charCodeAt(i);\n      hash |= 0; // Convert to 32bit integer\n    }\n\n    return createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n  }\n\n  createDebug.selectColor = selectColor;\n  /**\n  * Create a debugger with the given `namespace`.\n  *\n  * @param {String} namespace\n  * @return {Function}\n  * @api public\n  */\n\n  function createDebug(namespace) {\n    var prevTime;\n\n    function debug() {\n      // Disabled?\n      if (!debug.enabled) {\n        return;\n      }\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var self = debug; // Set `diff` timestamp\n\n      var curr = Number(new Date());\n      var ms = curr - (prevTime || curr);\n      self.diff = ms;\n      self.prev = prevTime;\n      self.curr = curr;\n      prevTime = curr;\n      args[0] = createDebug.coerce(args[0]);\n\n      if (typeof args[0] !== 'string') {\n        // Anything else let's inspect with %O\n        args.unshift('%O');\n      } // Apply any `formatters` transformations\n\n\n      var index = 0;\n      args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {\n        // If we encounter an escaped % then don't increase the array index\n        if (match === '%%') {\n          return match;\n        }\n\n        index++;\n        var formatter = createDebug.formatters[format];\n\n        if (typeof formatter === 'function') {\n          var val = args[index];\n          match = formatter.call(self, val); // Now we need to remove `args[index]` since it's inlined in the `format`\n\n          args.splice(index, 1);\n          index--;\n        }\n\n        return match;\n      }); // Apply env-specific formatting (colors, etc.)\n\n      createDebug.formatArgs.call(self, args);\n      var logFn = self.log || createDebug.log;\n      logFn.apply(self, args);\n    }\n\n    debug.namespace = namespace;\n    debug.enabled = createDebug.enabled(namespace);\n    debug.useColors = createDebug.useColors();\n    debug.color = selectColor(namespace);\n    debug.destroy = destroy;\n    debug.extend = extend; // Debug.formatArgs = formatArgs;\n    // debug.rawLog = rawLog;\n    // env-specific initialization logic for debug instances\n\n    if (typeof createDebug.init === 'function') {\n      createDebug.init(debug);\n    }\n\n    createDebug.instances.push(debug);\n    return debug;\n  }\n\n  function destroy() {\n    var index = createDebug.instances.indexOf(this);\n\n    if (index !== -1) {\n      createDebug.instances.splice(index, 1);\n      return true;\n    }\n\n    return false;\n  }\n\n  function extend(namespace, delimiter) {\n    return createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n  }\n  /**\n  * Enables a debug mode by namespaces. This can include modes\n  * separated by a colon and wildcards.\n  *\n  * @param {String} namespaces\n  * @api public\n  */\n\n\n  function enable(namespaces) {\n    createDebug.save(namespaces);\n    createDebug.names = [];\n    createDebug.skips = [];\n    var i;\n    var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n    var len = split.length;\n\n    for (i = 0; i < len; i++) {\n      if (!split[i]) {\n        // ignore empty strings\n        continue;\n      }\n\n      namespaces = split[i].replace(/\\*/g, '.*?');\n\n      if (namespaces[0] === '-') {\n        createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n      } else {\n        createDebug.names.push(new RegExp('^' + namespaces + '$'));\n      }\n    }\n\n    for (i = 0; i < createDebug.instances.length; i++) {\n      var instance = createDebug.instances[i];\n      instance.enabled = createDebug.enabled(instance.namespace);\n    }\n  }\n  /**\n  * Disable debug output.\n  *\n  * @api public\n  */\n\n\n  function disable() {\n    createDebug.enable('');\n  }\n  /**\n  * Returns true if the given mode name is enabled, false otherwise.\n  *\n  * @param {String} name\n  * @return {Boolean}\n  * @api public\n  */\n\n\n  function enabled(name) {\n    if (name[name.length - 1] === '*') {\n      return true;\n    }\n\n    var i;\n    var len;\n\n    for (i = 0, len = createDebug.skips.length; i < len; i++) {\n      if (createDebug.skips[i].test(name)) {\n        return false;\n      }\n    }\n\n    for (i = 0, len = createDebug.names.length; i < len; i++) {\n      if (createDebug.names[i].test(name)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n  /**\n  * Coerce `val`.\n  *\n  * @param {Mixed} val\n  * @return {Mixed}\n  * @api private\n  */\n\n\n  function coerce(val) {\n    if (val instanceof Error) {\n      return val.stack || val.message;\n    }\n\n    return val;\n  }\n\n  createDebug.enable(createDebug.load());\n  return createDebug;\n}\n\nmodule.exports = setup;\n\n","var topLevel = typeof global !== 'undefined' ? global :\n    typeof window !== 'undefined' ? window : {}\nvar minDoc = require('min-document');\n\nvar doccy;\n\nif (typeof document !== 'undefined') {\n    doccy = document;\n} else {\n    doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'];\n\n    if (!doccy) {\n        doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'] = minDoc;\n    }\n}\n\nmodule.exports = doccy;\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\-?\\d?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","(function(root, factory) {\n\t// `root` does not resolve to the global window object in a Browserified\n\t// bundle, so a direct reference to that object is used instead.\n\tvar _srcDoc = window.srcDoc;\n\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(['exports'], function(exports) {\n\t\t\tfactory(exports, _srcDoc);\n\t\t\troot.srcDoc = exports;\n\t\t});\n\t} else if (typeof exports === \"object\") {\n\t\tfactory(exports, _srcDoc);\n\t} else {\n\t\troot.srcDoc = {};\n\t\tfactory(root.srcDoc, _srcDoc);\n\t}\n})(this, function(exports, _srcDoc) {\n\tvar idx, iframes;\n\tvar isCompliant = !!(\"srcdoc\" in document.createElement(\"iframe\"));\n\tvar sandboxMsg = \"Polyfill may not function in the presence of the \" +\n\t\t\"`sandbox` attribute. Consider using the `force` option.\";\n\tvar sandboxAllow = /\\ballow-same-origin\\b/;\n\t/**\n\t * Determine if the operation may be blocked by the `sandbox` attribute in\n\t * some environments, and optionally issue a warning or remove the\n\t * attribute.\n\t */\n\tvar validate = function( iframe, options ) {\n\t\tvar sandbox = iframe.getAttribute(\"sandbox\");\n\t\tif (typeof sandbox === \"string\" && !sandboxAllow.test(sandbox)) {\n\t\t\tif (options && options.force) {\n\t\t\t\tiframe.removeAttribute(\"sandbox\");\n\t\t\t} else if (!options || options.force !== false) {\n\t\t\t\tlogError(sandboxMsg);\n\t\t\t\tiframe.setAttribute(\"data-srcdoc-polyfill\", sandboxMsg);\n\t\t\t}\n\t\t}\n\t};\n\tvar implementations = {\n\t\tcompliant: function( iframe, content, options ) {\n\n\t\t\tif (content) {\n\t\t\t\tvalidate(iframe, options);\n\t\t\t\tiframe.setAttribute(\"srcdoc\", content);\n\t\t\t}\n\t\t},\n\t\tlegacy: function( iframe, content, options ) {\n\n\t\t\tvar jsUrl;\n\n\t\t\tif (!iframe || !iframe.getAttribute) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!content) {\n\t\t\t\tcontent = iframe.getAttribute(\"srcdoc\");\n\t\t\t} else {\n\t\t\t\tiframe.setAttribute(\"srcdoc\", content);\n\t\t\t}\n\n\t\t\tif (content) {\n\t\t\t\tvalidate(iframe, options);\n\n\t\t\t\t// The value returned by a script-targeted URL will be used as\n\t\t\t\t// the iFrame's content. Create such a URL which returns the\n\t\t\t\t// iFrame element's `srcdoc` attribute.\n\t\t\t\tjsUrl = \"javascript: window.frameElement.getAttribute('srcdoc');\";\n\n\t\t\t\t// Explicitly set the iFrame's window.location for\n\t\t\t\t// compatability with IE9, which does not react to changes in\n\t\t\t\t// the `src` attribute when it is a `javascript:` URL, for\n\t\t\t\t// some reason\n\t\t\t\tif (iframe.contentWindow) {\n\t\t\t\t\tiframe.contentWindow.location = jsUrl;\n\t\t\t\t}\n\n\t\t\t\tiframe.setAttribute(\"src\", jsUrl);\n\t\t\t}\n\t\t}\n\t};\n\tvar srcDoc = exports;\n\tvar logError;\n\n\tif (window.console && window.console.error) {\n\t\tlogError = function(msg) {\n\t\t\twindow.console.error(\"[srcdoc-polyfill] \" + msg);\n\t\t};\n\t} else {\n\t\tlogError = function() {};\n\t}\n\n\t// Assume the best\n\tsrcDoc.set = implementations.compliant;\n\tsrcDoc.noConflict = function() {\n\t\twindow.srcDoc = _srcDoc;\n\t\treturn srcDoc;\n\t};\n\n\t// If the browser supports srcdoc, no shimming is necessary\n\tif (isCompliant) {\n\t\treturn;\n\t}\n\n\tsrcDoc.set = implementations.legacy;\n\n\t// Automatically shim any iframes already present in the document\n\tiframes = document.getElementsByTagName(\"iframe\");\n\tidx = iframes.length;\n\n\twhile (idx--) {\n\t\tsrcDoc.set( iframes[idx] );\n\t}\n\n});\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","/*! @name videojs-errors @version 4.2.0 @license Apache-2.0 */\nimport videojs from 'video.js';\nimport document from 'global/document';\n\nvar version = \"4.2.0\";\n\nvar FlashObj = videojs.getComponent('Flash');\nvar defaultDismiss = !videojs.browser.IS_IPHONE; // Video.js 5/6 cross-compatibility.\n\nvar registerPlugin = videojs.registerPlugin || videojs.plugin; // Default options for the plugin.\n\nvar defaults = {\n  header: '',\n  code: '',\n  message: '',\n  timeout: 45 * 1000,\n  dismiss: defaultDismiss,\n  errors: {\n    '1': {\n      type: 'MEDIA_ERR_ABORTED',\n      headline: 'The video download was cancelled'\n    },\n    '2': {\n      type: 'MEDIA_ERR_NETWORK',\n      headline: 'The video connection was lost, please confirm you are ' + 'connected to the internet'\n    },\n    '3': {\n      type: 'MEDIA_ERR_DECODE',\n      headline: 'The video is bad or in a format that cannot be played on your browser'\n    },\n    '4': {\n      type: 'MEDIA_ERR_SRC_NOT_SUPPORTED',\n      headline: 'This video is either unavailable or not supported in this browser'\n    },\n    '5': {\n      type: 'MEDIA_ERR_ENCRYPTED',\n      headline: 'The video you are trying to watch is encrypted and we do not know how ' + 'to decrypt it'\n    },\n    'unknown': {\n      type: 'MEDIA_ERR_UNKNOWN',\n      headline: 'An unanticipated problem was encountered, check back soon and try again'\n    },\n    '-1': {\n      type: 'PLAYER_ERR_NO_SRC',\n      headline: 'No video has been loaded'\n    },\n    '-2': {\n      type: 'PLAYER_ERR_TIMEOUT',\n      headline: 'Could not download the video'\n    },\n    'PLAYER_ERR_DOMAIN_RESTRICTED': {\n      headline: 'This video is restricted from playing on your current domain'\n    },\n    'PLAYER_ERR_IP_RESTRICTED': {\n      headline: 'This video is restricted at your current IP address'\n    },\n    'PLAYER_ERR_GEO_RESTRICTED': {\n      headline: 'This video is restricted from playing in your current geographic region'\n    },\n    'FLASHLS_ERR_CROSS_DOMAIN': {\n      headline: 'The video could not be loaded: crossdomain access denied.'\n    }\n  }\n};\n\nvar initPlugin = function initPlugin(player, options) {\n  var monitor;\n  var waiting;\n  var isStalling;\n  var listeners = [];\n\n  var updateErrors = function updateErrors(updates) {\n    options.errors = videojs.mergeOptions(options.errors, updates); // Create `code`s from errors which don't have them (based on their keys).\n\n    Object.keys(options.errors).forEach(function (k) {\n      var err = options.errors[k];\n\n      if (!err.type) {\n        err.type = k;\n      }\n    });\n  }; // Make sure we flesh out initially-provided errors.\n\n\n  updateErrors(); // clears the previous monitor timeout and sets up a new one\n\n  var resetMonitor = function resetMonitor() {\n    // at this point the player has recovered\n    player.clearTimeout(waiting);\n\n    if (isStalling) {\n      isStalling = false;\n      player.removeClass('vjs-waiting');\n    } // start the loading spinner if player has stalled\n\n\n    waiting = player.setTimeout(function () {\n      // player already has an error\n      // or is not playing under normal conditions\n      if (player.error() || player.paused() || player.ended()) {\n        return;\n      }\n\n      isStalling = true;\n      player.addClass('vjs-waiting');\n    }, 1000);\n    player.clearTimeout(monitor);\n    monitor = player.setTimeout(function () {\n      // player already has an error\n      // or is not playing under normal conditions\n      if (player.error() || player.paused() || player.ended()) {\n        return;\n      }\n\n      player.error({\n        code: -2,\n        type: 'PLAYER_ERR_TIMEOUT'\n      });\n    }, options.timeout); // clear out any existing player timeout\n    // playback has recovered\n\n    if (player.error() && player.error().code === -2) {\n      player.error(null);\n    }\n  }; // clear any previously registered listeners\n\n\n  var cleanup = function cleanup() {\n    var listener;\n\n    while (listeners.length) {\n      listener = listeners.shift();\n      player.off(listener[0], listener[1]);\n    }\n\n    player.clearTimeout(monitor);\n    player.clearTimeout(waiting);\n  }; // creates and tracks a player listener if the player looks alive\n\n\n  var healthcheck = function healthcheck(type, fn) {\n    var check = function check() {\n      // if there's an error do not reset the monitor and\n      // clear the error unless time is progressing\n      if (!player.error()) {\n        // error if using Flash and its API is unavailable\n        var tech = player.$('.vjs-tech');\n\n        if (tech && tech.type === 'application/x-shockwave-flash' && !tech.vjs_getProperty) {\n          player.error({\n            code: -2,\n            type: 'PLAYER_ERR_TIMEOUT'\n          });\n          return;\n        } // playback isn't expected if the player is paused\n\n\n        if (player.paused()) {\n          return resetMonitor();\n        } // playback isn't expected once the video has ended\n\n\n        if (player.ended()) {\n          return resetMonitor();\n        }\n      }\n\n      fn.call(this);\n    };\n\n    player.on(type, check);\n    listeners.push([type, check]);\n  };\n\n  var onPlayStartMonitor = function onPlayStartMonitor() {\n    var lastTime = 0;\n    cleanup(); // if no playback is detected for long enough, trigger a timeout error\n\n    resetMonitor();\n    healthcheck(['timeupdate', 'adtimeupdate'], function () {\n      var currentTime = player.currentTime(); // playback is operating normally or has recovered\n\n      if (currentTime !== lastTime) {\n        lastTime = currentTime;\n        resetMonitor();\n      }\n    });\n  };\n\n  var onPlayNoSource = function onPlayNoSource() {\n    if (!player.currentSrc()) {\n      player.error({\n        code: -1,\n        type: 'PLAYER_ERR_NO_SRC'\n      });\n    }\n  };\n\n  var onErrorHandler = function onErrorHandler() {\n    var details = '';\n    var error = player.error();\n    var content = document.createElement('div');\n    var dialogContent = ''; // In the rare case when `error()` does not return an error object,\n    // defensively escape the handler function.\n\n    if (!error) {\n      return;\n    }\n\n    error = videojs.mergeOptions(error, options.errors[error.code || error.type || 0]);\n\n    if (error.message) {\n      details = \"<div class=\\\"vjs-errors-details\\\">\" + player.localize('Technical details') + \"\\n        : <div class=\\\"vjs-errors-message\\\">\" + player.localize(error.message) + \"</div>\\n        </div>\";\n    }\n\n    if (error.code === 4 && FlashObj && !FlashObj.isSupported()) {\n      var flashMessage = player.localize('If you are using an older browser please try upgrading or installing Flash.');\n      details += \"<span class=\\\"vjs-errors-flashmessage\\\">\" + flashMessage + \"</span>\";\n    }\n\n    var display = player.getChild('errorDisplay');\n    content.className = 'vjs-errors-dialog';\n    content.id = 'vjs-errors-dialog';\n    dialogContent = \"<div class=\\\"vjs-errors-content-container\\\">\\n      <h2 class=\\\"vjs-errors-headline\\\">\" + this.localize(error.headline) + \"</h2>\\n        <div><b>\" + this.localize('Error Code') + \"</b>: \" + (error.type || error.code) + \"</div>\\n        \" + details + \"\\n      </div>\";\n    var closeable = display.closeable(!('dismiss' in error) || error.dismiss); // We should get a close button\n\n    if (closeable) {\n      dialogContent += \"<div class=\\\"vjs-errors-ok-button-container\\\">\\n          <button class=\\\"vjs-errors-ok-button\\\">\" + this.localize('OK') + \"</button>\\n        </div>\";\n      content.innerHTML = dialogContent;\n      display.fillWith(content); // Get the close button inside the error display\n\n      display.contentEl().firstChild.appendChild(display.getChild('closeButton').el());\n      var okButton = display.el().querySelector('.vjs-errors-ok-button');\n      player.on(okButton, 'click', function () {\n        display.close();\n      });\n    } else {\n      content.innerHTML = dialogContent;\n      display.fillWith(content);\n    }\n\n    if (player.currentWidth() <= 600 || player.currentHeight() <= 250) {\n      display.addClass('vjs-xs');\n    }\n\n    display.one('modalclose', function () {\n      return player.error(null);\n    });\n  };\n\n  var onDisposeHandler = function onDisposeHandler() {\n    cleanup();\n    player.removeClass('vjs-errors');\n    player.off('play', onPlayStartMonitor);\n    player.off('play', onPlayNoSource);\n    player.off('dispose', onDisposeHandler);\n    player.off(['aderror', 'error'], onErrorHandler);\n  };\n\n  var reInitPlugin = function reInitPlugin(newOptions) {\n    onDisposeHandler();\n    initPlugin(player, videojs.mergeOptions(defaults, newOptions));\n  };\n\n  reInitPlugin.extend = function (errors) {\n    return updateErrors(errors);\n  };\n\n  reInitPlugin.getAll = function () {\n    return videojs.mergeOptions(options.errors);\n  }; // Get / set timeout value. Restart monitor if changed.\n\n\n  reInitPlugin.timeout = function (timeout) {\n    if (typeof timeout === 'undefined') {\n      return options.timeout;\n    }\n\n    if (timeout !== options.timeout) {\n      options.timeout = timeout;\n\n      if (!player.paused()) {\n        onPlayStartMonitor();\n      }\n    }\n  }; // no-op API\n  // TODO: remove in a major version\n\n\n  reInitPlugin.disableProgress = function () {};\n\n  player.on('play', onPlayStartMonitor);\n  player.on('play', onPlayNoSource);\n  player.on('dispose', onDisposeHandler);\n  player.on(['aderror', 'error'], onErrorHandler);\n  player.ready(function () {\n    player.addClass('vjs-errors');\n  }); // if the plugin is re-initialised during playback, start the timeout handler.\n\n  if (!player.paused()) {\n    onPlayStartMonitor();\n  } // Include the version number.\n\n\n  reInitPlugin.VERSION = version;\n  player.errors = reInitPlugin;\n};\n\nvar errors = function errors(options) {\n  initPlugin(this, videojs.mergeOptions(defaults, options));\n};\n\n['extend', 'getAll'].forEach(function (k) {\n  errors[k] = function () {\n    videojs.log.warn(\"The errors.\" + k + \"() method is not available until the plugin has been initialized!\");\n  };\n}); // Include the version number.\n\nerrors.VERSION = version; // Register the plugin with video.js.\n\nregisterPlugin('errors', errors);\n\nexport default errors;\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","import Debug from 'debug';\nimport videojs from 'video.js';\n\nimport IOVPlayer from './iov/player';\n\nconst Component = videojs.getComponent('Component');\n\nexport default function () {\n  class MqttHandler extends Component {\n    constructor (source, tech, options) {\n      super(tech, options.mqtt);\n\n      this.tech_ = tech;\n      this.source_ = source;\n      this.debug = Debug('skyline:clsp:MqttHandler');\n    }\n\n    /**\n     * called when player.src gets called, handle a new source\n     *\n     * @param {Object} src the source object to handle\n     */\n    src (src) {\n      const srcConfig = IOVPlayer.generateIOVConfigFromCLSPURL(src);\n\n      this.port = srcConfig.port;\n      this.address = srcConfig.address;\n      this.streamName = srcConfig.streamName;\n      this.useSSL = srcConfig.useSSL;\n    }\n  };\n\n  return MqttHandler;\n}\n","import Debug from 'debug';\nimport videojs from 'video.js';\n\nimport _MqttHandler from './MqttHandler';\nimport utils from './utils';\n\nexport default function () {\n  const debug = Debug('skyline:clsp:MqttSourceHandler');\n  const MqttHandler = _MqttHandler();\n\n  return function (mode) {\n    var obj = {\n      canHandleSource: function (srcObj, options = {}) {\n        if (!srcObj.src) {\n          console.error('srcObj doesn\\'t contain src');\n          debug(srcObj);\n          return false;\n        }\n\n        if (!srcObj.src.startsWith('clsp')) {\n          console.error('srcObj.src is not clsp protocol');\n          return false;\n        }\n\n        if (!utils.supported()) {\n          debug('Browser not supported. Chrome 52+ is required.');\n          return false;\n        }\n\n        return obj.canPlayType(srcObj.type);\n      },\n      handleSource: function (source, tech, options = {}) {\n        const localOptions = videojs.mergeOptions(videojs.options, options, { mqtt: { mode } });\n\n        tech.mqtt = new MqttHandler(source, tech, localOptions);\n\n        tech.mqtt.src(source.src);\n\n        return tech.mqtt;\n      },\n      canPlayType: function (type) {\n        if (type === \"video/mp4; codecs='avc1.42E01E'\") {\n          return 'maybe';\n        }\n\n        console.error(`clsp type='${type}' rejected`);\n\n        return '';\n      },\n    };\n\n    return obj;\n  };\n}\n","import videojs from 'video.js';\n\nimport { version as VERSION } from '../../package.json';\nimport MqttSourceHandler from './MqttSourceHandler';\nimport IOV from './iov/IOV';\nimport utils from './utils';\n\nconst Plugin = videojs.getPlugin('plugin');\n\nlet registered = false;\n\nexport default function (defaults = {}) {\n  class MseOverMqttPlugin extends Plugin {\n    static register () {\n      if (registered) {\n        throw new Error('You can only register the clsp plugin once, and it has already been registered.');\n      }\n\n      // @todo - there is likely some way for videojs to tell us that the plugin has already\n      // been registered, or perhaps videojs itself will not let you register a plugin twice\n      registered = true;\n\n      videojs.getTech('Html5').registerSourceHandler(MqttSourceHandler()('html5'), 0);\n      videojs.registerPlugin(MseOverMqttPlugin.pluginName, MseOverMqttPlugin);\n\n      return MseOverMqttPlugin;\n    }\n\n    constructor (player, options) {\n      super(player, options);\n\n      options = videojs.mergeOptions(defaults, options);\n\n      player.addClass('vjs-mse-over-mqtt');\n\n      if (options.customClass) {\n        player.addClass(options.customClass);\n      }\n\n      player.errors({\n        errors: {\n          PLAYER_ERR_NOT_COMPAT: {\n            headline: 'This browser is unsupported.',\n            message: 'Chrome 52+ is required.',\n          },\n        },\n        timeout: 120 * 1000,\n      });\n\n      if (!utils.supported()) {\n        return player.error({\n          code: 'PLAYER_ERR_NOT_COMPAT',\n          dismiss: false,\n        });\n      }\n\n      player.currentTime = function () {\n        // Needed to make videojs-errors think that the video is progressing\n        // If we do not do this, videojs-errors will give us a timeout error\n        // filthy hack - two objects will never be equal to one another\n        return {};\n      };\n\n      player.on('firstplay', function (e) {\n        // @todo - the use of the tech here is discouraged.  What is the \"right\" way to\n        // get the information from the mqttHandler?\n        // And, really, all this does is parse the clsp url - do we really need a\n        // dedicated handler for that?  Can't we parse the url ourselves?\n        const mqttHandler = player.tech(true).mqtt;\n\n        if (!mqttHandler) {\n          return console.error('src not in lookup table');\n        }\n\n        var videoElement = player.el();\n\n        var iov = IOV.factory(player, {\n          port: mqttHandler.port,\n          address: mqttHandler.address,\n          useSSL: mqttHandler.useSSL,\n          videoElement,\n          appStart: (iov) => {\n            // connected to MQTT procede to setting up callbacks\n            // debug(\"iov.player() called\")\n            const mqtt_player = iov.player;\n\n            if (!mqtt_player) {\n              throw new Error('mqtt_player not available!');\n            }\n\n            const videoTag = player.children()[0];\n\n            // @todo - there must be a better way to determine autoplay...\n            if (videoTag.getAttribute('autoplay') !== null) {\n              // playButton.trigger('click');\n              player.trigger('play', videoTag);\n            }\n\n            if (mqtt_player.playing) {\n              console.warn('tried to use this player more than once...')\n              return;\n            }\n\n            mqtt_player.playing = true;\n\n            // start playing video\n            mqtt_player.play(\n              e.target.firstChild.id,\n              mqttHandler.streamName,\n              function () {\n                player.loadingSpinner.hide();\n              },\n              function () {\n                // reset the timeout monitor from videojs-errors\n                player.trigger('timeupdate');\n              }\n            );\n\n            videoElement.addEventListener('mse-error-event', function (e) {\n              mqtt_player.restart();\n            }, false);\n          },\n        });\n\n        iov.initialize();\n      });\n    }\n  }\n\n  MseOverMqttPlugin.pluginName = 'clsp';\n  MseOverMqttPlugin.VERSION = VERSION;\n  MseOverMqttPlugin.utils = utils;\n\n  return MseOverMqttPlugin;\n};\n","/*\nCreates a hidden iframe that is used to establish a dedicated mqtt websocket\nfor a single video. This is basically an in browser micro service which\nuses cross document communication to route data to and from the iframe.\n*/\n\n\n// The below string literals allow the iframe to be created completely withinjavascript allowing\n// the videojs to be completely protable.\n\n\n// this code is filled in by the gulpfile.js\nvar iframe_code = \"/*******************************************************************************\\n * Copyright (c) 2013, 2016 IBM Corp.\\n *\\n * All rights reserved. This program and the accompanying materials\\n * are made available under the terms of the Eclipse Public License v1.0\\n * and Eclipse Distribution License v1.0 which accompany this distribution.\\n *\\n * The Eclipse Public License is available at\\n *    http://www.eclipse.org/legal/epl-v10.html\\n * and the Eclipse Distribution License is available at\\n *   http://www.eclipse.org/org/documents/edl-v10.php.\\n *\\n *******************************************************************************/\\n(function(p,s){\\\"object\\\"===typeof exports&&\\\"object\\\"===typeof module?module.exports=s():\\\"function\\\"===typeof define&&define.amd?define(s):\\\"object\\\"===typeof exports?exports=s():(\\\"undefined\\\"===typeof p.Paho&&(p.Paho={}),p.Paho.MQTT=s())})(this,function(){return function(p){function s(a,b,c){b[c++]=a>>8;b[c++]=a%256;return c}function u(a,b,c,k){k=s(b,c,k);D(a,c,k);return k+b}function n(a){for(var b=0,c=0;c<a.length;c++){var k=a.charCodeAt(c);2047<k?(55296<=k&&56319>=k&&(c++,b++),b+=3):127<k?b+=2:b++}return b}\\nfunction D(a,b,c){for(var k=0;k<a.length;k++){var e=a.charCodeAt(k);if(55296<=e&&56319>=e){var g=a.charCodeAt(++k);if(isNaN(g))throw Error(f(h.MALFORMED_UNICODE,[e,g]));e=(e-55296<<10)+(g-56320)+65536}127>=e?b[c++]=e:(2047>=e?b[c++]=e>>6&31|192:(65535>=e?b[c++]=e>>12&15|224:(b[c++]=e>>18&7|240,b[c++]=e>>12&63|128),b[c++]=e>>6&63|128),b[c++]=e&63|128)}return b}function E(a,b,c){for(var k=\\\"\\\",e,g=b;g<b+c;){e=a[g++];if(!(128>e)){var m=a[g++]-128;if(0>m)throw Error(f(h.MALFORMED_UTF,[e.toString(16),m.toString(16),\\n\\\"\\\"]));if(224>e)e=64*(e-192)+m;else{var d=a[g++]-128;if(0>d)throw Error(f(h.MALFORMED_UTF,[e.toString(16),m.toString(16),d.toString(16)]));if(240>e)e=4096*(e-224)+64*m+d;else{var l=a[g++]-128;if(0>l)throw Error(f(h.MALFORMED_UTF,[e.toString(16),m.toString(16),d.toString(16),l.toString(16)]));if(248>e)e=262144*(e-240)+4096*m+64*d+l;else throw Error(f(h.MALFORMED_UTF,[e.toString(16),m.toString(16),d.toString(16),l.toString(16)]));}}}65535<e&&(e-=65536,k+=String.fromCharCode(55296+(e>>10)),e=56320+(e&\\n1023));k+=String.fromCharCode(e)}return k}var z=function(a,b){for(var c in a)if(a.hasOwnProperty(c))if(b.hasOwnProperty(c)){if(typeof a[c]!==b[c])throw Error(f(h.INVALID_TYPE,[typeof a[c],c]));}else{c=\\\"Unknown property, \\\"+c+\\\". Valid properties are:\\\";for(var k in b)b.hasOwnProperty(k)&&(c=c+\\\" \\\"+k);throw Error(c);}},v=function(a,b){return function(){return a.apply(b,arguments)}},h={OK:{code:0,text:\\\"AMQJSC0000I OK.\\\"},CONNECT_TIMEOUT:{code:1,text:\\\"AMQJSC0001E Connect timed out.\\\"},SUBSCRIBE_TIMEOUT:{code:2,\\ntext:\\\"AMQJS0002E Subscribe timed out.\\\"},UNSUBSCRIBE_TIMEOUT:{code:3,text:\\\"AMQJS0003E Unsubscribe timed out.\\\"},PING_TIMEOUT:{code:4,text:\\\"AMQJS0004E Ping timed out.\\\"},INTERNAL_ERROR:{code:5,text:\\\"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}\\\"},CONNACK_RETURNCODE:{code:6,text:\\\"AMQJS0006E Bad Connack return code:{0} {1}.\\\"},SOCKET_ERROR:{code:7,text:\\\"AMQJS0007E Socket error:{0}.\\\"},SOCKET_CLOSE:{code:8,text:\\\"AMQJS0008I Socket closed.\\\"},MALFORMED_UTF:{code:9,text:\\\"AMQJS0009E Malformed UTF data:{0} {1} {2}.\\\"},\\nUNSUPPORTED:{code:10,text:\\\"AMQJS0010E {0} is not supported by this browser.\\\"},INVALID_STATE:{code:11,text:\\\"AMQJS0011E Invalid state {0}.\\\"},INVALID_TYPE:{code:12,text:\\\"AMQJS0012E Invalid type {0} for {1}.\\\"},INVALID_ARGUMENT:{code:13,text:\\\"AMQJS0013E Invalid argument {0} for {1}.\\\"},UNSUPPORTED_OPERATION:{code:14,text:\\\"AMQJS0014E Unsupported operation.\\\"},INVALID_STORED_DATA:{code:15,text:\\\"AMQJS0015E Invalid data in local storage key\\\\x3d{0} value\\\\x3d{1}.\\\"},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:\\\"AMQJS0016E Invalid MQTT message type {0}.\\\"},\\nMALFORMED_UNICODE:{code:17,text:\\\"AMQJS0017E Malformed Unicode string:{0} {1}.\\\"},BUFFER_FULL:{code:18,text:\\\"AMQJS0018E Message buffer is full, maximum buffer size: {0}.\\\"}},H={0:\\\"Connection Accepted\\\",1:\\\"Connection Refused: unacceptable protocol version\\\",2:\\\"Connection Refused: identifier rejected\\\",3:\\\"Connection Refused: server unavailable\\\",4:\\\"Connection Refused: bad user name or password\\\",5:\\\"Connection Refused: not authorized\\\"},f=function(a,b){var c=a.text;if(b)for(var k,e,g=0;g<b.length;g++)if(k=\\\"{\\\"+\\ng+\\\"}\\\",e=c.indexOf(k),0<e)var h=c.substring(0,e),c=c.substring(e+k.length),c=h+b[g]+c;return c},A=[0,6,77,81,73,115,100,112,3],B=[0,4,77,81,84,84,4],q=function(a,b){this.type=a;for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c])};q.prototype.encode=function(){var a=(this.type&15)<<4,b=0,c=[],k=0,e;void 0!==this.messageIdentifier&&(b+=2);switch(this.type){case 1:switch(this.mqttVersion){case 3:b+=A.length+3;break;case 4:b+=B.length+3}b+=n(this.clientId)+2;void 0!==this.willMessage&&(b+=n(this.willMessage.destinationName)+\\n2,e=this.willMessage.payloadBytes,e instanceof Uint8Array||(e=new Uint8Array(h)),b+=e.byteLength+2);void 0!==this.userName&&(b+=n(this.userName)+2);void 0!==this.password&&(b+=n(this.password)+2);break;case 8:for(var a=a|2,g=0;g<this.topics.length;g++)c[g]=n(this.topics[g]),b+=c[g]+2;b+=this.requestedQos.length;break;case 10:a|=2;for(g=0;g<this.topics.length;g++)c[g]=n(this.topics[g]),b+=c[g]+2;break;case 6:a|=2;break;case 3:this.payloadMessage.duplicate&&(a|=8);a=a|=this.payloadMessage.qos<<1;this.payloadMessage.retained&&\\n(a|=1);var k=n(this.payloadMessage.destinationName),h=this.payloadMessage.payloadBytes,b=b+(k+2)+h.byteLength;h instanceof ArrayBuffer?h=new Uint8Array(h):h instanceof Uint8Array||(h=new Uint8Array(h.buffer))}var f=b,g=Array(1),d=0;do{var t=f%128,f=f>>7;0<f&&(t|=128);g[d++]=t}while(0<f&&4>d);f=g.length+1;b=new ArrayBuffer(b+f);d=new Uint8Array(b);d[0]=a;d.set(g,1);if(3==this.type)f=u(this.payloadMessage.destinationName,k,d,f);else if(1==this.type){switch(this.mqttVersion){case 3:d.set(A,f);f+=A.length;\\nbreak;case 4:d.set(B,f),f+=B.length}a=0;this.cleanSession&&(a=2);void 0!==this.willMessage&&(a=a|4|this.willMessage.qos<<3,this.willMessage.retained&&(a|=32));void 0!==this.userName&&(a|=128);void 0!==this.password&&(a|=64);d[f++]=a;f=s(this.keepAliveInterval,d,f)}void 0!==this.messageIdentifier&&(f=s(this.messageIdentifier,d,f));switch(this.type){case 1:f=u(this.clientId,n(this.clientId),d,f);void 0!==this.willMessage&&(f=u(this.willMessage.destinationName,n(this.willMessage.destinationName),d,f),\\nf=s(e.byteLength,d,f),d.set(e,f),f+=e.byteLength);void 0!==this.userName&&(f=u(this.userName,n(this.userName),d,f));void 0!==this.password&&u(this.password,n(this.password),d,f);break;case 3:d.set(h,f);break;case 8:for(g=0;g<this.topics.length;g++)f=u(this.topics[g],c[g],d,f),d[f++]=this.requestedQos[g];break;case 10:for(g=0;g<this.topics.length;g++)f=u(this.topics[g],c[g],d,f)}return b};var F=function(a,b,c){this._client=a;this._window=b;this._keepAliveInterval=1E3*c;this.isReset=!1;var k=(new q(12)).encode(),\\ne=function(a){return function(){return g.apply(a)}},g=function(){this.isReset?(this.isReset=!1,this._client._trace(\\\"Pinger.doPing\\\",\\\"send PINGREQ\\\"),this._client.socket.send(k),this.timeout=this._window.setTimeout(e(this),this._keepAliveInterval)):(this._client._trace(\\\"Pinger.doPing\\\",\\\"Timed out\\\"),this._client._disconnected(h.PING_TIMEOUT.code,f(h.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0;this._window.clearTimeout(this.timeout);0<this._keepAliveInterval&&(this.timeout=setTimeout(e(this),\\nthis._keepAliveInterval))};this.cancel=function(){this._window.clearTimeout(this.timeout)}},w=function(a,b,c,f,e){this._window=b;c||(c=30);this.timeout=setTimeout(function(a,b,c){return function(){return a.apply(b,c)}}(f,a,e),1E3*c);this.cancel=function(){this._window.clearTimeout(this.timeout)}},d=function(a,b,c,d,e){if(!(\\\"WebSocket\\\"in p&&null!==p.WebSocket))throw Error(f(h.UNSUPPORTED,[\\\"WebSocket\\\"]));if(!(\\\"localStorage\\\"in p&&null!==p.localStorage))throw Error(f(h.UNSUPPORTED,[\\\"localStorage\\\"]));\\nif(!(\\\"ArrayBuffer\\\"in p&&null!==p.ArrayBuffer))throw Error(f(h.UNSUPPORTED,[\\\"ArrayBuffer\\\"]));this._trace(\\\"Paho.MQTT.Client\\\",a,b,c,d,e);this.host=b;this.port=c;this.path=d;this.uri=a;this.clientId=e;this._wsuri=null;this._localKey=b+\\\":\\\"+c+(\\\"/mqtt\\\"!=d?\\\":\\\"+d:\\\"\\\")+\\\":\\\"+e+\\\":\\\";this._msg_queue=[];this._buffered_msg_queue=[];this._sentMessages={};this._receivedMessages={};this._notify_msg_sent={};this._message_identifier=1;this._sequence=0;for(var g in localStorage)0!==g.indexOf(\\\"Sent:\\\"+this._localKey)&&0!==\\ng.indexOf(\\\"Received:\\\"+this._localKey)||this.restore(g)};d.prototype.host=null;d.prototype.port=null;d.prototype.path=null;d.prototype.uri=null;d.prototype.clientId=null;d.prototype.socket=null;d.prototype.connected=!1;d.prototype.maxMessageIdentifier=65536;d.prototype.connectOptions=null;d.prototype.hostIndex=null;d.prototype.onConnected=null;d.prototype.onConnectionLost=null;d.prototype.onMessageDelivered=null;d.prototype.onMessageArrived=null;d.prototype.traceFunction=null;d.prototype._msg_queue=\\nnull;d.prototype._buffered_msg_queue=null;d.prototype._connectTimeout=null;d.prototype.sendPinger=null;d.prototype.receivePinger=null;d.prototype._reconnectInterval=1;d.prototype._reconnecting=!1;d.prototype._reconnectTimeout=null;d.prototype.disconnectedPublishing=!1;d.prototype.disconnectedBufferSize=5E3;d.prototype.receiveBuffer=null;d.prototype._traceBuffer=null;d.prototype._MAX_TRACE_ENTRIES=100;d.prototype.connect=function(a){var b=this._traceMask(a,\\\"password\\\");this._trace(\\\"Client.connect\\\",\\nb,this.socket,this.connected);if(this.connected)throw Error(f(h.INVALID_STATE,[\\\"already connected\\\"]));if(this.socket)throw Error(f(h.INVALID_STATE,[\\\"already connected\\\"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1);this.connectOptions=a;this._reconnectInterval=1;this._reconnecting=!1;a.uris?(this.hostIndex=0,this._doConnect(a.uris[0])):this._doConnect(this.uri)};d.prototype.subscribe=function(a,b){this._trace(\\\"Client.subscribe\\\",a,b);if(!this.connected)throw Error(f(h.INVALID_STATE,\\n[\\\"not connected\\\"]));var c=new q(8);c.topics=[a];c.requestedQos=void 0!==b.qos?[b.qos]:[0];b.onSuccess&&(c.onSuccess=function(a){b.onSuccess({invocationContext:b.invocationContext,grantedQos:a})});b.onFailure&&(c.onFailure=function(a){b.onFailure({invocationContext:b.invocationContext,errorCode:a,errorMessage:f(a)})});b.timeout&&(c.timeOut=new w(this,window,b.timeout,b.onFailure,[{invocationContext:b.invocationContext,errorCode:h.SUBSCRIBE_TIMEOUT.code,errorMessage:f(h.SUBSCRIBE_TIMEOUT)}]));this._requires_ack(c);\\nthis._schedule_message(c)};d.prototype.unsubscribe=function(a,b){this._trace(\\\"Client.unsubscribe\\\",a,b);if(!this.connected)throw Error(f(h.INVALID_STATE,[\\\"not connected\\\"]));var c=new q(10);c.topics=[a];b.onSuccess&&(c.callback=function(){b.onSuccess({invocationContext:b.invocationContext})});b.timeout&&(c.timeOut=new w(this,window,b.timeout,b.onFailure,[{invocationContext:b.invocationContext,errorCode:h.UNSUBSCRIBE_TIMEOUT.code,errorMessage:f(h.UNSUBSCRIBE_TIMEOUT)}]));this._requires_ack(c);this._schedule_message(c)};\\nd.prototype.send=function(a){this._trace(\\\"Client.send\\\",a);wireMessage=new q(3);wireMessage.payloadMessage=a;if(this.connected)0<a.qos?this._requires_ack(wireMessage):this.onMessageDelivered&&(this._notify_msg_sent[wireMessage]=this.onMessageDelivered(wireMessage.payloadMessage)),this._schedule_message(wireMessage);else if(this._reconnecting&&this.disconnectedPublishing){if(Object.keys(this._sentMessages).length+this._buffered_msg_queue.length>this.disconnectedBufferSize)throw Error(f(h.BUFFER_FULL,\\n[this.disconnectedBufferSize]));0<a.qos?this._requires_ack(wireMessage):(wireMessage.sequence=++this._sequence,this._buffered_msg_queue.push(wireMessage))}else throw Error(f(h.INVALID_STATE,[\\\"not connected\\\"]));};d.prototype.disconnect=function(){this._trace(\\\"Client.disconnect\\\");this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1);if(!this.socket)throw Error(f(h.INVALID_STATE,[\\\"not connecting or connected\\\"]));wireMessage=new q(14);this._notify_msg_sent[wireMessage]=\\nv(this._disconnected,this);this._schedule_message(wireMessage)};d.prototype.getTraceLog=function(){if(null!==this._traceBuffer){this._trace(\\\"Client.getTraceLog\\\",new Date);this._trace(\\\"Client.getTraceLog in flight messages\\\",this._sentMessages.length);for(var a in this._sentMessages)this._trace(\\\"_sentMessages \\\",a,this._sentMessages[a]);for(a in this._receivedMessages)this._trace(\\\"_receivedMessages \\\",a,this._receivedMessages[a]);return this._traceBuffer}};d.prototype.startTrace=function(){null===this._traceBuffer&&\\n(this._traceBuffer=[]);this._trace(\\\"Client.startTrace\\\",new Date,\\\"1.0.3\\\")};d.prototype.stopTrace=function(){delete this._traceBuffer};d.prototype._doConnect=function(a){this.connectOptions.useSSL&&(a=a.split(\\\":\\\"),a[0]=\\\"wss\\\",a=a.join(\\\":\\\"));this._wsuri=a;this.connected=!1;this.socket=4>this.connectOptions.mqttVersion?new WebSocket(a,[\\\"mqttv3.1\\\"]):new WebSocket(a,[\\\"mqtt\\\"]);this.socket.binaryType=\\\"arraybuffer\\\";this.socket.onopen=v(this._on_socket_open,this);this.socket.onmessage=v(this._on_socket_message,\\nthis);this.socket.onerror=v(this._on_socket_error,this);this.socket.onclose=v(this._on_socket_close,this);this.sendPinger=new F(this,window,this.connectOptions.keepAliveInterval);this.receivePinger=new F(this,window,this.connectOptions.keepAliveInterval);this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null);this._connectTimeout=new w(this,window,this.connectOptions.timeout,this._disconnected,[h.CONNECT_TIMEOUT.code,f(h.CONNECT_TIMEOUT)])};d.prototype._schedule_message=function(a){this._msg_queue.push(a);\\nthis.connected&&this._process_queue()};d.prototype.store=function(a,b){var c={type:b.type,messageIdentifier:b.messageIdentifier,version:1};switch(b.type){case 3:b.pubRecReceived&&(c.pubRecReceived=!0);c.payloadMessage={};for(var d=\\\"\\\",e=b.payloadMessage.payloadBytes,g=0;g<e.length;g++)d=15>=e[g]?d+\\\"0\\\"+e[g].toString(16):d+e[g].toString(16);c.payloadMessage.payloadHex=d;c.payloadMessage.qos=b.payloadMessage.qos;c.payloadMessage.destinationName=b.payloadMessage.destinationName;b.payloadMessage.duplicate&&\\n(c.payloadMessage.duplicate=!0);b.payloadMessage.retained&&(c.payloadMessage.retained=!0);0===a.indexOf(\\\"Sent:\\\")&&(void 0===b.sequence&&(b.sequence=++this._sequence),c.sequence=b.sequence);break;default:throw Error(f(h.INVALID_STORED_DATA,[key,c]));}localStorage.setItem(a+this._localKey+b.messageIdentifier,JSON.stringify(c))};d.prototype.restore=function(a){var b=localStorage.getItem(a),c=JSON.parse(b),d=new q(c.type,c);switch(c.type){case 3:for(var b=c.payloadMessage.payloadHex,e=new ArrayBuffer(b.length/\\n2),e=new Uint8Array(e),g=0;2<=b.length;){var m=parseInt(b.substring(0,2),16),b=b.substring(2,b.length);e[g++]=m}b=new Paho.MQTT.Message(e);b.qos=c.payloadMessage.qos;b.destinationName=c.payloadMessage.destinationName;c.payloadMessage.duplicate&&(b.duplicate=!0);c.payloadMessage.retained&&(b.retained=!0);d.payloadMessage=b;break;default:throw Error(f(h.INVALID_STORED_DATA,[a,b]));}0===a.indexOf(\\\"Sent:\\\"+this._localKey)?(d.payloadMessage.duplicate=!0,this._sentMessages[d.messageIdentifier]=d):0===a.indexOf(\\\"Received:\\\"+\\nthis._localKey)&&(this._receivedMessages[d.messageIdentifier]=d)};d.prototype._process_queue=function(){for(var a=null,b=this._msg_queue.reverse();a=b.pop();)this._socket_send(a),this._notify_msg_sent[a]&&(this._notify_msg_sent[a](),delete this._notify_msg_sent[a])};d.prototype._requires_ack=function(a){var b=Object.keys(this._sentMessages).length;if(b>this.maxMessageIdentifier)throw Error(\\\"Too many messages:\\\"+b);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;\\na.messageIdentifier=this._message_identifier;this._sentMessages[a.messageIdentifier]=a;3===a.type&&this.store(\\\"Sent:\\\",a);this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)};d.prototype._on_socket_open=function(){var a=new q(1,this.connectOptions);a.clientId=this.clientId;this._socket_send(a)};d.prototype._on_socket_message=function(a){this._trace(\\\"Client._on_socket_message\\\",a.data);a=this._deframeMessages(a.data);for(var b=0;b<a.length;b+=1)this._handleMessage(a[b])};\\nd.prototype._deframeMessages=function(a){a=new Uint8Array(a);var b=[];if(this.receiveBuffer){var c=new Uint8Array(this.receiveBuffer.length+a.length);c.set(this.receiveBuffer);c.set(a,this.receiveBuffer.length);a=c;delete this.receiveBuffer}try{for(c=0;c<a.length;){var d;a:{var e=a,g=c,m=g,n=e[g],l=n>>4,t=n&15,g=g+1,x=void 0,C=0,p=1;do{if(g==e.length){d=[null,m];break a}x=e[g++];C+=(x&127)*p;p*=128}while(0!==(x&128));x=g+C;if(x>e.length)d=[null,m];else{var y=new q(l);switch(l){case 2:e[g++]&1&&(y.sessionPresent=\\n!0);y.returnCode=e[g++];break;case 3:var m=t>>1&3,s=256*e[g]+e[g+1],g=g+2,u=E(e,g,s),g=g+s;0<m&&(y.messageIdentifier=256*e[g]+e[g+1],g+=2);var r=new Paho.MQTT.Message(e.subarray(g,x));1==(t&1)&&(r.retained=!0);8==(t&8)&&(r.duplicate=!0);r.qos=m;r.destinationName=u;y.payloadMessage=r;break;case 4:case 5:case 6:case 7:case 11:y.messageIdentifier=256*e[g]+e[g+1];break;case 9:y.messageIdentifier=256*e[g]+e[g+1],g+=2,y.returnCode=e.subarray(g,x)}d=[y,x]}}var v=d[0],c=d[1];if(null!==v)b.push(v);else break}c<\\na.length&&(this.receiveBuffer=a.subarray(c))}catch(w){d=\\\"undefined\\\"==w.hasOwnProperty(\\\"stack\\\")?w.stack.toString():\\\"No Error Stack Available\\\";this._disconnected(h.INTERNAL_ERROR.code,f(h.INTERNAL_ERROR,[w.message,d]));return}return b};d.prototype._handleMessage=function(a){this._trace(\\\"Client._handleMessage\\\",a);try{switch(a.type){case 2:this._connectTimeout.cancel();this._reconnectTimeout&&this._reconnectTimeout.cancel();if(this.connectOptions.cleanSession){for(var b in this._sentMessages){var c=this._sentMessages[b];\\nlocalStorage.removeItem(\\\"Sent:\\\"+this._localKey+c.messageIdentifier)}this._sentMessages={};for(b in this._receivedMessages){var d=this._receivedMessages[b];localStorage.removeItem(\\\"Received:\\\"+this._localKey+d.messageIdentifier)}this._receivedMessages={}}if(0===a.returnCode)this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);else{this._disconnected(h.CONNACK_RETURNCODE.code,f(h.CONNACK_RETURNCODE,[a.returnCode,H[a.returnCode]]));break}a=[];for(var e in this._sentMessages)this._sentMessages.hasOwnProperty(e)&&\\na.push(this._sentMessages[e]);if(0<this._buffered_msg_queue.length){e=null;for(var g=this._buffered_msg_queue.reverse();e=g.pop();)a.push(e),this.onMessageDelivered&&(this._notify_msg_sent[e]=this.onMessageDelivered(e.payloadMessage))}a=a.sort(function(a,b){return a.sequence-b.sequence});for(var g=0,m=a.length;g<m;g++)if(c=a[g],3==c.type&&c.pubRecReceived){var n=new q(6,{messageIdentifier:c.messageIdentifier});this._schedule_message(n)}else this._schedule_message(c);if(this.connectOptions.onSuccess)this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});\\nc=!1;this._reconnecting&&(c=!0,this._reconnectInterval=1,this._reconnecting=!1);this._connected(c,this._wsuri);this._process_queue();break;case 3:this._receivePublish(a);break;case 4:if(c=this._sentMessages[a.messageIdentifier])if(delete this._sentMessages[a.messageIdentifier],localStorage.removeItem(\\\"Sent:\\\"+this._localKey+a.messageIdentifier),this.onMessageDelivered)this.onMessageDelivered(c.payloadMessage);break;case 5:if(c=this._sentMessages[a.messageIdentifier])c.pubRecReceived=!0,n=new q(6,{messageIdentifier:a.messageIdentifier}),\\nthis.store(\\\"Sent:\\\",c),this._schedule_message(n);break;case 6:d=this._receivedMessages[a.messageIdentifier];localStorage.removeItem(\\\"Received:\\\"+this._localKey+a.messageIdentifier);d&&(this._receiveMessage(d),delete this._receivedMessages[a.messageIdentifier]);var l=new q(7,{messageIdentifier:a.messageIdentifier});this._schedule_message(l);break;case 7:c=this._sentMessages[a.messageIdentifier];delete this._sentMessages[a.messageIdentifier];localStorage.removeItem(\\\"Sent:\\\"+this._localKey+a.messageIdentifier);\\nif(this.onMessageDelivered)this.onMessageDelivered(c.payloadMessage);break;case 9:if(c=this._sentMessages[a.messageIdentifier]){c.timeOut&&c.timeOut.cancel();if(128===a.returnCode[0]){if(c.onFailure)c.onFailure(a.returnCode)}else if(c.onSuccess)c.onSuccess(a.returnCode);delete this._sentMessages[a.messageIdentifier]}break;case 11:if(c=this._sentMessages[a.messageIdentifier])c.timeOut&&c.timeOut.cancel(),c.callback&&c.callback(),delete this._sentMessages[a.messageIdentifier];break;case 13:this.sendPinger.reset();\\nbreak;case 14:this._disconnected(h.INVALID_MQTT_MESSAGE_TYPE.code,f(h.INVALID_MQTT_MESSAGE_TYPE,[a.type]));break;default:this._disconnected(h.INVALID_MQTT_MESSAGE_TYPE.code,f(h.INVALID_MQTT_MESSAGE_TYPE,[a.type]))}}catch(t){c=\\\"undefined\\\"==t.hasOwnProperty(\\\"stack\\\")?t.stack.toString():\\\"No Error Stack Available\\\",this._disconnected(h.INTERNAL_ERROR.code,f(h.INTERNAL_ERROR,[t.message,c]))}};d.prototype._on_socket_error=function(a){this._reconnecting||this._disconnected(h.SOCKET_ERROR.code,f(h.SOCKET_ERROR,\\n[a.data]))};d.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(h.SOCKET_CLOSE.code,f(h.SOCKET_CLOSE))};d.prototype._socket_send=function(a){if(1==a.type){var b=this._traceMask(a,\\\"password\\\");this._trace(\\\"Client._socket_send\\\",b)}else this._trace(\\\"Client._socket_send\\\",a);this.socket.send(a.encode());this.sendPinger.reset()};d.prototype._receivePublish=function(a){switch(a.payloadMessage.qos){case \\\"undefined\\\":case 0:this._receiveMessage(a);break;case 1:var b=new q(4,{messageIdentifier:a.messageIdentifier});\\nthis._schedule_message(b);this._receiveMessage(a);break;case 2:this._receivedMessages[a.messageIdentifier]=a;this.store(\\\"Received:\\\",a);a=new q(5,{messageIdentifier:a.messageIdentifier});this._schedule_message(a);break;default:throw Error(\\\"Invaild qos\\\\x3d\\\"+wireMmessage.payloadMessage.qos);}};d.prototype._receiveMessage=function(a){if(this.onMessageArrived)this.onMessageArrived(a.payloadMessage)};d.prototype._connected=function(a,b){if(this.onConnected)this.onConnected(a,b)};d.prototype._reconnect=\\nfunction(){this._trace(\\\"Client._reconnect\\\");this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),128>this._reconnectInterval&&(this._reconnectInterval*=2),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))};d.prototype._disconnected=function(a,b){this._trace(\\\"Client._disconnected\\\",a,b);if(void 0!==a&&this._reconnecting)this._reconnectTimeout=new w(this,window,this._reconnectInterval,this._reconnect);\\nelse if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);\\nelse if(void 0===a&&(a=h.OK.code,b=f(h.OK)),this.connected){this.connected=!1;if(this.onConnectionLost)this.onConnectionLost({errorCode:a,errorMessage:b,reconnect:this.connectOptions.reconnect,uri:this._wsuri});a!==h.OK.code&&this.connectOptions.reconnect&&(this._reconnectInterval=1,this._reconnect())}else if(4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit)this._trace(\\\"Failed to connect V4, dropping back to V3\\\"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?\\n(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri);else if(this.connectOptions.onFailure)this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:a,errorMessage:b})};d.prototype._trace=function(){if(this.traceFunction){for(var a in arguments)\\\"undefined\\\"!==typeof arguments[a]&&arguments.splice(a,1,JSON.stringify(arguments[a]));a=Array.prototype.slice.call(arguments).join(\\\"\\\");this.traceFunction({severity:\\\"Debug\\\",message:a})}if(null!==\\nthis._traceBuffer){a=0;for(var b=arguments.length;a<b;a++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===a?this._traceBuffer.push(arguments[a]):\\\"undefined\\\"===typeof arguments[a]?this._traceBuffer.push(arguments[a]):this._traceBuffer.push(\\\"  \\\"+JSON.stringify(arguments[a]))}};d.prototype._traceMask=function(a,b){var c={},d;for(d in a)a.hasOwnProperty(d)&&(c[d]=d==b?\\\"******\\\":a[d]);return c};var G=function(a,b,c,k){var e;if(\\\"string\\\"!==typeof a)throw Error(f(h.INVALID_TYPE,\\n[typeof a,\\\"host\\\"]));if(2==arguments.length){k=b;e=a;var g=e.match(/^(wss?):\\\\/\\\\/((\\\\[(.+)\\\\])|([^\\\\/]+?))(:(\\\\d+))?(\\\\/.*)$/);if(g)a=g[4]||g[2],b=parseInt(g[7]),c=g[8];else throw Error(f(h.INVALID_ARGUMENT,[a,\\\"host\\\"]));}else{3==arguments.length&&(k=c,c=\\\"/mqtt\\\");if(\\\"number\\\"!==typeof b||0>b)throw Error(f(h.INVALID_TYPE,[typeof b,\\\"port\\\"]));if(\\\"string\\\"!==typeof c)throw Error(f(h.INVALID_TYPE,[typeof c,\\\"path\\\"]));e=\\\"ws://\\\"+(-1!==a.indexOf(\\\":\\\")&&\\\"[\\\"!==a.slice(0,1)&&\\\"]\\\"!==a.slice(-1)?\\\"[\\\"+a+\\\"]\\\":a)+\\\":\\\"+b+c}for(var m=\\ng=0;m<k.length;m++){var n=k.charCodeAt(m);55296<=n&&56319>=n&&m++;g++}if(\\\"string\\\"!==typeof k||65535<g)throw Error(f(h.INVALID_ARGUMENT,[k,\\\"clientId\\\"]));var l=new d(e,a,b,c,k);this._getHost=function(){return a};this._setHost=function(){throw Error(f(h.UNSUPPORTED_OPERATION));};this._getPort=function(){return b};this._setPort=function(){throw Error(f(h.UNSUPPORTED_OPERATION));};this._getPath=function(){return c};this._setPath=function(){throw Error(f(h.UNSUPPORTED_OPERATION));};this._getURI=function(){return e};\\nthis._setURI=function(){throw Error(f(h.UNSUPPORTED_OPERATION));};this._getClientId=function(){return l.clientId};this._setClientId=function(){throw Error(f(h.UNSUPPORTED_OPERATION));};this._getOnConnected=function(){return l.onConnected};this._setOnConnected=function(a){if(\\\"function\\\"===typeof a)l.onConnected=a;else throw Error(f(h.INVALID_TYPE,[typeof a,\\\"onConnected\\\"]));};this._getDisconnectedPublishing=function(){return l.disconnectedPublishing};this._setDisconnectedPublishing=function(a){l.disconnectedPublishing=\\na};this._getDisconnectedBufferSize=function(){return l.disconnectedBufferSize};this._setDisconnectedBufferSize=function(a){l.disconnectedBufferSize=a};this._getOnConnectionLost=function(){return l.onConnectionLost};this._setOnConnectionLost=function(a){if(\\\"function\\\"===typeof a)l.onConnectionLost=a;else throw Error(f(h.INVALID_TYPE,[typeof a,\\\"onConnectionLost\\\"]));};this._getOnMessageDelivered=function(){return l.onMessageDelivered};this._setOnMessageDelivered=function(a){if(\\\"function\\\"===typeof a)l.onMessageDelivered=\\na;else throw Error(f(h.INVALID_TYPE,[typeof a,\\\"onMessageDelivered\\\"]));};this._getOnMessageArrived=function(){return l.onMessageArrived};this._setOnMessageArrived=function(a){if(\\\"function\\\"===typeof a)l.onMessageArrived=a;else throw Error(f(h.INVALID_TYPE,[typeof a,\\\"onMessageArrived\\\"]));};this._getTrace=function(){return l.traceFunction};this._setTrace=function(a){if(\\\"function\\\"===typeof a)l.traceFunction=a;else throw Error(f(h.INVALID_TYPE,[typeof a,\\\"onTrace\\\"]));};this.connect=function(a){a=a||{};z(a,\\n{timeout:\\\"number\\\",userName:\\\"string\\\",password:\\\"string\\\",willMessage:\\\"object\\\",keepAliveInterval:\\\"number\\\",cleanSession:\\\"boolean\\\",useSSL:\\\"boolean\\\",invocationContext:\\\"object\\\",onSuccess:\\\"function\\\",onFailure:\\\"function\\\",hosts:\\\"object\\\",ports:\\\"object\\\",reconnect:\\\"boolean\\\",mqttVersion:\\\"number\\\",mqttVersionExplicit:\\\"boolean\\\",uris:\\\"object\\\"});void 0===a.keepAliveInterval&&(a.keepAliveInterval=60);if(4<a.mqttVersion||3>a.mqttVersion)throw Error(f(h.INVALID_ARGUMENT,[a.mqttVersion,\\\"connectOptions.mqttVersion\\\"]));void 0===\\na.mqttVersion?(a.mqttVersionExplicit=!1,a.mqttVersion=4):a.mqttVersionExplicit=!0;if(void 0!==a.password&&void 0===a.userName)throw Error(f(h.INVALID_ARGUMENT,[a.password,\\\"connectOptions.password\\\"]));if(a.willMessage){if(!(a.willMessage instanceof r))throw Error(f(h.INVALID_TYPE,[a.willMessage,\\\"connectOptions.willMessage\\\"]));a.willMessage.stringPayload=null;if(\\\"undefined\\\"===typeof a.willMessage.destinationName)throw Error(f(h.INVALID_TYPE,[typeof a.willMessage.destinationName,\\\"connectOptions.willMessage.destinationName\\\"]));\\n}\\\"undefined\\\"===typeof a.cleanSession&&(a.cleanSession=!0);if(a.hosts){if(!(a.hosts instanceof Array))throw Error(f(h.INVALID_ARGUMENT,[a.hosts,\\\"connectOptions.hosts\\\"]));if(1>a.hosts.length)throw Error(f(h.INVALID_ARGUMENT,[a.hosts,\\\"connectOptions.hosts\\\"]));for(var b=!1,d=0;d<a.hosts.length;d++){if(\\\"string\\\"!==typeof a.hosts[d])throw Error(f(h.INVALID_TYPE,[typeof a.hosts[d],\\\"connectOptions.hosts[\\\"+d+\\\"]\\\"]));if(/^(wss?):\\\\/\\\\/((\\\\[(.+)\\\\])|([^\\\\/]+?))(:(\\\\d+))?(\\\\/.*)$/.test(a.hosts[d]))if(0===d)b=!0;else{if(!b)throw Error(f(h.INVALID_ARGUMENT,\\n[a.hosts[d],\\\"connectOptions.hosts[\\\"+d+\\\"]\\\"]));}else if(b)throw Error(f(h.INVALID_ARGUMENT,[a.hosts[d],\\\"connectOptions.hosts[\\\"+d+\\\"]\\\"]));}if(b)a.uris=a.hosts;else{if(!a.ports)throw Error(f(h.INVALID_ARGUMENT,[a.ports,\\\"connectOptions.ports\\\"]));if(!(a.ports instanceof Array))throw Error(f(h.INVALID_ARGUMENT,[a.ports,\\\"connectOptions.ports\\\"]));if(a.hosts.length!==a.ports.length)throw Error(f(h.INVALID_ARGUMENT,[a.ports,\\\"connectOptions.ports\\\"]));a.uris=[];for(d=0;d<a.hosts.length;d++){if(\\\"number\\\"!==typeof a.ports[d]||\\n0>a.ports[d])throw Error(f(h.INVALID_TYPE,[typeof a.ports[d],\\\"connectOptions.ports[\\\"+d+\\\"]\\\"]));var b=a.hosts[d],g=a.ports[d];e=\\\"ws://\\\"+(-1!==b.indexOf(\\\":\\\")?\\\"[\\\"+b+\\\"]\\\":b)+\\\":\\\"+g+c;a.uris.push(e)}}}l.connect(a)};this.subscribe=function(a,b){if(\\\"string\\\"!==typeof a)throw Error(\\\"Invalid argument:\\\"+a);b=b||{};z(b,{qos:\\\"number\\\",invocationContext:\\\"object\\\",onSuccess:\\\"function\\\",onFailure:\\\"function\\\",timeout:\\\"number\\\"});if(b.timeout&&!b.onFailure)throw Error(\\\"subscribeOptions.timeout specified with no onFailure callback.\\\");\\nif(\\\"undefined\\\"!==typeof b.qos&&0!==b.qos&&1!==b.qos&&2!==b.qos)throw Error(f(h.INVALID_ARGUMENT,[b.qos,\\\"subscribeOptions.qos\\\"]));l.subscribe(a,b)};this.unsubscribe=function(a,b){if(\\\"string\\\"!==typeof a)throw Error(\\\"Invalid argument:\\\"+a);b=b||{};z(b,{invocationContext:\\\"object\\\",onSuccess:\\\"function\\\",onFailure:\\\"function\\\",timeout:\\\"number\\\"});if(b.timeout&&!b.onFailure)throw Error(\\\"unsubscribeOptions.timeout specified with no onFailure callback.\\\");l.unsubscribe(a,b)};this.send=function(a,b,c,d){var e;if(0===\\narguments.length)throw Error(\\\"Invalid argument.length\\\");if(1==arguments.length){if(!(a instanceof r)&&\\\"string\\\"!==typeof a)throw Error(\\\"Invalid argument:\\\"+typeof a);e=a;if(\\\"undefined\\\"===typeof e.destinationName)throw Error(f(h.INVALID_ARGUMENT,[e.destinationName,\\\"Message.destinationName\\\"]));}else e=new r(b),e.destinationName=a,3<=arguments.length&&(e.qos=c),4<=arguments.length&&(e.retained=d);l.send(e)};this.publish=function(a,b,c,d){console.log(\\\"Publising message to: \\\",a);var e;if(0===arguments.length)throw Error(\\\"Invalid argument.length\\\");\\nif(1==arguments.length){if(!(a instanceof r)&&\\\"string\\\"!==typeof a)throw Error(\\\"Invalid argument:\\\"+typeof a);e=a;if(\\\"undefined\\\"===typeof e.destinationName)throw Error(f(h.INVALID_ARGUMENT,[e.destinationName,\\\"Message.destinationName\\\"]));}else e=new r(b),e.destinationName=a,3<=arguments.length&&(e.qos=c),4<=arguments.length&&(e.retained=d);l.send(e)};this.disconnect=function(){l.disconnect()};this.getTraceLog=function(){return l.getTraceLog()};this.startTrace=function(){l.startTrace()};this.stopTrace=\\nfunction(){l.stopTrace()};this.isConnected=function(){return l.connected}};G.prototype={get host(){return this._getHost()},set host(a){this._setHost(a)},get port(){return this._getPort()},set port(a){this._setPort(a)},get path(){return this._getPath()},set path(a){this._setPath(a)},get clientId(){return this._getClientId()},set clientId(a){this._setClientId(a)},get onConnected(){return this._getOnConnected()},set onConnected(a){this._setOnConnected(a)},get disconnectedPublishing(){return this._getDisconnectedPublishing()},\\nset disconnectedPublishing(a){this._setDisconnectedPublishing(a)},get disconnectedBufferSize(){return this._getDisconnectedBufferSize()},set disconnectedBufferSize(a){this._setDisconnectedBufferSize(a)},get onConnectionLost(){return this._getOnConnectionLost()},set onConnectionLost(a){this._setOnConnectionLost(a)},get onMessageDelivered(){return this._getOnMessageDelivered()},set onMessageDelivered(a){this._setOnMessageDelivered(a)},get onMessageArrived(){return this._getOnMessageArrived()},set onMessageArrived(a){this._setOnMessageArrived(a)},\\nget trace(){return this._getTrace()},set trace(a){this._setTrace(a)}};var r=function(a){var b;if(\\\"string\\\"===typeof a||a instanceof ArrayBuffer||a instanceof Int8Array||a instanceof Uint8Array||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)b=a;else throw f(h.INVALID_ARGUMENT,[a,\\\"newPayload\\\"]);this._getPayloadString=function(){return\\\"string\\\"===typeof b?b:E(b,0,b.length)};this._getPayloadBytes=\\nfunction(){if(\\\"string\\\"===typeof b){var a=new ArrayBuffer(n(b)),a=new Uint8Array(a);D(b,a,0);return a}return b};var c;this._getDestinationName=function(){return c};this._setDestinationName=function(a){if(\\\"string\\\"===typeof a)c=a;else throw Error(f(h.INVALID_ARGUMENT,[a,\\\"newDestinationName\\\"]));};var d=0;this._getQos=function(){return d};this._setQos=function(a){if(0===a||1===a||2===a)d=a;else throw Error(\\\"Invalid argument:\\\"+a);};var e=!1;this._getRetained=function(){return e};this._setRetained=function(a){if(\\\"boolean\\\"===\\ntypeof a)e=a;else throw Error(f(h.INVALID_ARGUMENT,[a,\\\"newRetained\\\"]));};var g=!1;this._getDuplicate=function(){return g};this._setDuplicate=function(a){g=a}};r.prototype={get payloadString(){return this._getPayloadString()},get payloadBytes(){return this._getPayloadBytes()},get destinationName(){return this._getDestinationName()},set destinationName(a){this._setDestinationName(a)},get topic(){return this._getDestinationName()},set topic(a){this._setDestinationName(a)},get qos(){return this._getQos()},\\nset qos(a){this._setQos(a)},get retained(){return this._getRetained()},set retained(a){this._setRetained(a)},get duplicate(){return this._getDuplicate()},set duplicate(a){this._setDuplicate(a)}};return{Client:G,Message:r}}(window)});\\nfunction _clspRouter() {\\n    function send(m){\\n        // route message to parent which will in turn route to the correct\\n        // player based on clientId.\\n        m.clientId = MqttClientId;\\n        // console.log(m);\\n        window.parent.postMessage(m,\\\"*\\\");\\n    }// end send\\n\\n\\n    function routeInbound(message){\\n        var pstring = \\\"\\\";\\n\\n        try {\\n            pstring = message.payloadString;\\n        } catch(e) {\\n            //bogus excepton?\\n        }\\n\\n        send({\\n          event: \\'data\\',\\n          destinationName: message.destinationName,\\n          payloadString: pstring,\\n          payloadBytes: message.payloadBytes || null\\n        });\\n    }// end route inbound\\n\\n\\n    function eventHandler(evt){\\n        var m = evt.data;\\n\\n        try {\\n            if (m.method === \\'subscribe\\') {\\n                MQTTClient.subscribe(m.topic);\\n            } else if (m.method === \\'unsubscribe\\') {\\n                MQTTClient.unsubscribe(m.topic);\\n            } else if (m.method === \\'publish\\') {\\n                var mqtt_payload = null;\\n                try {\\n                    mqtt_payload = JSON.stringify(m.data);\\n                } catch( json_error ) {\\n                    console.error(\\\"json stringify error: \\\" + m.data);\\n                    return;\\n                }\\n\\n                var mqtt_msg = new Paho.MQTT.Message(mqtt_payload);\\n                mqtt_msg.destinationName = m.topic;\\n                MQTTClient.send(mqtt_msg);\\n            }\\n        } catch(e) {\\n            // we are dead!\\n           send({\\n               event: \\'fail\\',\\n               reason: \\\"network failure\\\"\\n            });\\n            try {\\n                MQTTClient.disconnect();\\n            } catch(e) {\\n                console.error(e);\\n            }\\n        }\\n\\n    }\\n\\n    function AppReady() {\\n\\n        if (window.addEventListener) {\\n            window.addEventListener(\\\"message\\\", eventHandler, false);\\n        } else if (window.attachEvent) {\\n            window.attachEvent(\\'onmessage\\', eventHandler);\\n        }\\n\\n        send({\\n          event: \\'ready\\'\\n        });\\n\\n        if (Reconnect !== -1)\\n        {\\n            clearInterval(Reconnect);\\n            Reconnect = -1;\\n        }\\n\\n    }// application ready\\n\\n\\n    function AppFail(message) {\\n      var e = \\\"Error code \\\" +\\n          parseInt(message.errorCode) + \\\": \\\" + message.errorMessage;\\n      send({\\n        event: \\'fail\\',\\n        reason: e\\n      });\\n    }\\n\\n    MQTTClient = new Paho.MQTT.Client(\\n        MqttIp,\\n        MqttPort,\\n        MqttClientId\\n    );\\n\\n    /*\\n     * Hold the id of the reconnect interval task\\n     */\\n    var Reconnect = -1;\\n\\n    /*\\n     * Callback which gets called when the connection is lost\\n     */\\n    function onConnectionLost(message){\\n        send({\\n            event: \\'fail\\',\\n            reason: \\\"connection lost error code \\\" + parseInt(message.errorCode)\\n        });\\n        if (Reconnect === -1) {\\n            Reconnect = setInterval(() => connect(), 2000);\\n        }\\n    }\\n\\n    MQTTClient.onConnectionLost = onConnectionLost;\\n\\n    // perhaps the busiest function in this module ;)\\n    MQTTClient.onMessageArrived = function(message) {\\n        // console.log(message);\\n        try {\\n             routeInbound(message);\\n        }catch(e) {\\n            if (e) {\\n                console.error(e);\\n            }\\n        }\\n    };\\n\\n    /**\\n     * Connect to MQTT...\\n     */\\n    function connect()\\n    {\\n        // setup connection options\\n        var options = {\\n            timeout: 120,\\n            onSuccess:  AppReady,\\n            onFailure: AppFail\\n        };\\n        // last will message sent on disconnect\\n        var willmsg = new Paho.MQTT.Message(JSON.stringify({\\n            clientId: MqttClientId\\n        }));\\n        willmsg.destinationName = \\\"iov/clientDisconnect\\\";\\n        options.willMessage = willmsg;\\n\\n        if (MqttUseSSL === true) {\\n            options.useSSL = true;\\n        }\\n\\n        try {\\n            MQTTClient.connect(options);\\n        } catch(e) {\\n            console.error(\\\"connect failed\\\", e);\\n            send({\\n                event: \\'fail\\',\\n                reason: \\\"connect failed\\\"\\n            });\\n        }\\n    }\\n\\n    connect();\\n}\\n\\nfunction clspRouter() {\\n    try {\\n        _clspRouter();\\n    } catch(e) {\\n        console.error(\\\"IFRAME error\\\");\\n        console.error(e);\\n    }\\n}\\n\\nfunction onunload()\\n{\\n    if (typeof MQTTClient !== \\'undefined\\') {\\n        MQTTClient.disconnect();\\n    }\\n}\\n\";\n\n\n\nfunction pframe_client(iframe, config, onReady) {\n    var self = {\n        dispatch: {}\n    };\n\n\n    // primitive function that routes message to iframe\n    function command(m) {\n\n        if (iframe.contentWindow !== null) {\n            iframe.contentWindow.postMessage(m,\"*\");\n            return;\n        }\n\n        var t = setInterval(function(){\n            if (iframe.contentWindow !== null) {\n                iframe.contentWindow.postMessage(m,\"*\");\n                clearInterval(t);\n            }\n        },1000);\n    }\n\n\n    // called when mqtt has connected\n    self.onReady = onReady;\n\n    /* message from mqttRouter routeInbound go handler which associates this\n       client with the clientId. It then calls self.inboundHandler handler to\n       process the message from the iframe.\n    */\n    self.inboundHandler = function(message) {\n        var handler = self.dispatch[message.destinationName];\n        if ( typeof handler !== 'undefined'){\n             try {\n                handler(message);\n             } catch( e ) {\n                console.error( e );\n             }\n        } else {\n            console.error(\"No handler for \" + message.destinationName);\n        }\n    };\n\n    self.subscribe = function(topic, callback) {\n        self.dispatch[topic] = callback;\n        command({\n            method: \"subscribe\",\n            topic: topic\n        });\n    };\n\n    self.unsubscribe = function(topic) {\n        if ( topic in self.dispatch ){\n            delete self.dispatch[topic];\n        }\n        command({\n            method: \"unsubscribe\",\n            topic: topic\n        });\n    };\n\n    self.publish = function(topic, data){\n      command({\n          method: \"publish\",\n          topic: topic,\n          data: data\n      });\n    };\n\n\n    self.transaction = function( topic, callback, obj ) {\n        obj.resp_topic = config.clientId + \"/response/\"+parseInt(Math.random()*1000000);\n        self.subscribe(obj.resp_topic,function(mqtt_resp){\n            //call user specified callback to handle response from remote process\n            var resp = JSON.parse(mqtt_resp.payloadString);\n            // call user specified callback to handle response\n            callback(resp);\n            // cleanup.\n            self.unsubscribe(obj.resp_topic);\n        });\n\n        // start transaction\n        //MQTTClient.send(mqtt_msg);\n        self.publish(topic, obj );\n    };\n\n    // return client for video player.\n    return self;\n}\n\n\nwindow.mqttConduit = function( config, onReady ){\n    /*\n        config = {\n            ip: ... mqtt ip address\n            port: websocket port\n        }\n      }\n    */\n    var client = {};\n    var iframe = document.createElement('iframe');\n    var MqttUseSSL = (config.useSSL || false) ? \"true\": \"false\";\n\n    var markup =\n        '<html><head>'+\n        '<script>\\n' +\n            \"var MqttIp = '\" + config.wsbroker + \"' ; \\n\" +\n            \"var MqttPort = \" + config.wsport + \"; \\n\" +\n            \"var MqttUseSSL = \" + MqttUseSSL + \"; \\n\" +\n            \"var MqttClientId = '\" + config.clientId + \"' ; \\n\" +\n            \"var Origin = '\" + window.location.origin + \"' ; \\n\" +\n            iframe_code + '\\n' +\n        '</script>\\n' +\n        '</head><body onload=\"clspRouter();\" onunload=\"onunload();\"><body>'+\n        '<div id=\"message\"></div>'+\n        '</body></html>'\n    ;\n\n\n\n    // inject code into iframe\n    iframe.srcdoc = markup;\n\n    iframe.width = 0;\n    iframe.height = 0;\n    iframe.setAttribute('style','display:none;');\n    iframe.setAttribute('id',config.clientId);\n\n\n    // attach hidden iframe to player\n    //document.body.appendChild(iframe);\n    if (config.videoElementParent !== null) {\n        config.videoElementParent.appendChild(iframe);\n    } else if (config.videoElement.parentNode !== null) {\n        config.videoElement.parentNode.appendChild(iframe);\n        config.videoElementParent = config.videoElement.parentNode;\n    } else {\n        var t = setInterval(function(){\n            if (config.videoElement.parentNode !== null) {\n                config.videoElement.parentNode.appendChild(iframe);\n                config.videoElementParent = config.videoElement.parentNode;\n                clearInterval(t);\n            }\n        },1000);\n    }\n\n\n    return pframe_client(iframe,config,onReady);\n}\n","import Debug from 'debug';\nimport uuidv4 from 'uuid/v4';\n\nimport MqttTopicHandlers from './MqttTopicHandlers';\nimport MqttConduitCollection from './MqttConduitCollection';\nimport MqttTransport from './MqttTransport';\nimport IOVPlayer from './player';\n\nconst DEBUG_PREFIX = 'skyline:clsp:iov';\n\n/**\n * Internet of Video client. This module uses the MediaSource API to\n * deliver video content streamed through MQTT from distributed sources.\n */\n\nexport default class IOV {\n  static compatibilityCheck () {\n    // @todo - shouldn't this be done in the utils function?\n    // For the MAC\n    var NoMediaSourceAlert = false;\n\n    window.MediaSource = window.MediaSource || window.WebKitMediaSource;\n\n    if (!window.MediaSource) {\n      if (NoMediaSourceAlert === false) {\n        window.alert('Media Source Extensions not supported in your browser: Claris Live Streaming will not work!');\n      }\n\n      NoMediaSourceAlert = true;\n    }\n  }\n\n  static factory (player, config) {\n    return new IOV(player, config);\n  }\n\n  constructor (player, config) {\n    this.id = uuidv4();\n    this.debug = Debug(`${DEBUG_PREFIX}:${this.id}:main`);\n\n    this.playerInstance = player;\n\n    this.config = {\n      // web socket address defaults to the address of the server that loaded this page.\n      wsbroker: config.address,\n      // default port number\n      wsport: config.port,\n      // default clientId\n      clientId: this.id,\n      // to be overriden by user.\n      appStart: config.appStart,\n      useSSL: config.useSSL || false,\n      videoElement: config.videoElement,\n      videoElementParent: null,\n    };\n\n    // handle inbound messages from MQTT, including video\n    // and distributes them to players.\n    this.mqttTopicHandlers = new MqttTopicHandlers(this.id, this);\n    this.mqttConduitCollection = config.mqttConduitCollection || new MqttConduitCollection(this.id);\n    this.transport = new MqttTransport(this.id, this);\n\n    this.events = {\n      connection_lost : function (responseObject) {\n        // @todo - close all players and display an error message\n        console.error('MQTT connection lost');\n        console.error(responseObject);\n      },\n\n      on_message: this.mqttTopicHandlers.msghandler,\n\n      // generic exception handler\n      exception: function (text, e) {\n        console.error(text);\n        if (typeof e !== 'undefined') {\n          console.error(e.stack);\n        }\n      },\n    };\n\n    this.player = IOVPlayer.factory(this, this.playerInstance);\n\n    if (config.initialize) {\n      this.initialize();\n    }\n  }\n\n  clone (config) {\n    return IOV.factory(this.playerInstance, {\n      ...config,\n      mqttConduitCollection: this.mqttConduitCollection,\n      videoElementParent: this.config.videoElementParent,\n    });\n  }\n\n  initialize () {\n    IOV.compatibilityCheck();\n\n    // @todo - this listener has no concept of this instance, so it should be\n    // moved elsewhere, or restructured\n    // route inbound data from a frame running mqtt to the appropriate player\n    window.addEventListener('message', (event) => {\n      this.debug('message received', event.data)\n\n      var clientId = event.data.clientId;\n\n      if (!this.mqttConduitCollection.exists(clientId)) {\n        return;\n      }\n\n      var conduit = this.mqttConduitCollection.getById(clientId);\n      var eventType = event.data.event;\n\n      switch (eventType) {\n        case 'data': {\n          conduit.inboundHandler(event.data);\n          break;\n        }\n        case 'ready': {\n          if (this.config.videoElement.parentNode !== null) {\n            this.config.videoElementParentId = this.config.videoElement.parentNode.id;\n          }\n          conduit.onReady();\n          break;\n        }\n        case 'fail': {\n          this.debug('network error', event.data.reason);\n          this.playerInstance.trigger('network-error', event.data.reason);\n          break;\n        }\n        default: {\n          console.error(`No match for event: ${eventType}`);\n        }\n      }\n    });\n\n    return this;\n  }\n\n  // query remote server and get a list of all stream names\n  getAvailableStreams (callback) {\n    this.transport.transaction('iov/video/list', callback, {});\n  }\n}\n","import Debug from 'debug';\n\nconst DEBUG_PREFIX = 'skyline:clsp:iov';\n\nexport default class MqttConduitCollection {\n  constructor (id) {\n    this.id = id;\n    this.debug = Debug(`${DEBUG_PREFIX}:${this.id}:MqttConduitCollection`);\n\n    this.debug('constructing...');\n\n    this._conduits = {};\n  }\n\n  set (id, conduit) {\n    this.debug('setting...', id, conduit);\n\n    this._conduits[id] = conduit;\n\n    return conduit;\n  }\n\n  addFromIov (transport, iov) {\n    this.debug('adding from iov...', iov);\n\n    return this.set(iov.config.clientId, window.mqttConduit(iov.config, () => {\n      this.debug('onReady...', iov.config.clientId);\n\n      iov.config.appStart(iov);\n\n      // the mse service will stop streaming to us if we don't send\n      // a message to iov/stats within 1 minute.\n      iov._statsTimer = setInterval(() => {\n        iov.statsMsg.inkbps = (iov.statsMsg.byteCount * 8) / 30000.0;\n        iov.statsMsg.byteCount = 0;\n\n        transport.publish('iov/stats', iov.statsMsg);\n\n        this.debug('iov status', iov.statsMsg);\n      }, 5000);\n    }));\n  }\n\n  getById (id) {\n    this.debug('getting...', id);\n\n    return this._conduits[id];\n  }\n\n  exists (id) {\n    this.debug('exists?', id);\n\n    return this._conduits.hasOwnProperty(id);\n  }\n}\n","import Debug from 'debug';\n\nconst DEBUG_PREFIX = 'skyline:clsp:iov';\n\n/**\n * route inbound messages/data to player's event handlers.\n */\nexport default class MqttTopicHandlers {\n  constructor (id, iov) {\n    this.id = id;\n    this.debug = Debug(`${DEBUG_PREFIX}:${this.id}:MqttTopicHandlers`);\n\n    this.debug('constructing...');\n\n    this.iov = iov;\n    this._handlers = {};\n  }\n\n  get (topic) {\n    this.debug('getting...', topic);\n\n    return this._handlers[topic];\n  }\n\n  register (topic, callback) {\n    this.debug('register...', topic);\n\n    this._handlers[topic] = (...args) => {\n      this.debug('executing handler...', topic);\n\n      callback(...args);\n    };\n  }\n\n  unregister (topic) {\n    this.debug('unregistering...', topic);\n\n    if (this.exists(topic)) {\n      delete this._handlers[topic];\n    }\n  }\n\n  exists (topic) {\n    this.debug('exists?', topic);\n\n    return this._handlers.hasOwnProperty(topic);\n  }\n\n  // central entry point for all MQTT inbound traffic.\n  msghandler (message) {\n    this.debug('msghandler...', message);\n\n    var topic = message.destinationName;\n\n    if (!this.exists(topic)) {\n      this.debug(`No handler for ${topic} - message dropped`, message);\n\n      return;\n    }\n\n    try {\n      this.get(topic)(message);\n    }\n    catch (e) {\n      this.iov.events.exception(`${topic} handler exception`, e);\n    }\n  }\n}\n","import Debug from 'debug';\n\nconst DEBUG_PREFIX = 'skyline:clsp:iov';\n\nexport default class MqttTransport {\n  constructor (id, iov) {\n    this.id = id;\n    this.debug = Debug(`${DEBUG_PREFIX}:${this.id}:MqttConduitCollection`);\n\n    this.debug('constructing...');\n\n    // setup stats\n    iov.statsMsg = {\n      byteCount: 0,\n      inkbps: 0,\n      host: document.location.host,\n      clientId: iov.config.clientId,\n    };\n\n    this.clientId = iov.config.clientId;\n    this.iov = iov;\n\n    this.debug('looking for useSSL', iov);\n    this.conduit = iov.mqttConduitCollection.addFromIov(this, iov);\n  }\n\n  // create a temporary resp_topic to receive a query response\n  // upon response remove the temporary topic. Assume both request\n  // and response are json formateed text.\n  transaction (topic, callback, data) {\n    this.debug('transaction...');\n\n    this.conduit.transaction(topic, (event) => {\n      this.debug('transaction callback...', event);\n      if (callback) {\n        callback(event);\n      }\n    }, data);\n  }\n\n  subscribe (topic, callback) {\n    this.debug('subscribe...');\n\n    this.conduit.subscribe(topic, (event) => {\n      this.debug('subscribe callback...', event);\n      if (callback) {\n        callback(event);\n      }\n    });\n  }\n\n  unsubscribe (topic, callback) {\n    this.debug('unsubscribe...');\n\n    this.conduit.unsubscribe(topic, (event) => {\n      this.debug('unsubscribe callback...', event);\n      if (callback) {\n        callback(event);\n      }\n    });\n  }\n\n  publish (topic, data, callback) {\n    this.debug('publish...');\n\n    this.conduit.publish(topic, data, (event) => {\n      this.debug('publish callback...', event);\n      if (callback) {\n        callback(event);\n      }\n    });\n  }\n}\n","import Debug from 'debug';\nimport videojs from 'video.js';\n\nconst DEBUG_PREFIX = 'skyline:clsp:iov';\nconst debug = Debug(`${DEBUG_PREFIX}:IOVPlayer`);\nconst silly = Debug(`silly:${DEBUG_PREFIX}:IOVPlayer`);\n\n/**\n * Responsible for receiving stream input and routing it to the media source\n * buffer for rendering on the video tag. There is some 'light' reworking of\n * the binary data that is required.\n *\n * var player = IOVPlayer.factory(iov);\n * player.play( video_element_id, stream_name );\n*/\nexport default class IOVPlayer {\n  static factory (iov) {\n    return new IOVPlayer(iov);\n  }\n\n  static generateIOVConfigFromCLSPURL (_src) {\n    debug('generateIOVConfigFromCLSPURL');\n\n    if (!_src) {\n      throw new Error('No source was given to be parsed!');\n    }\n\n    // We use an anchor tag here beacuse, when an href is added to\n    // an anchor dom Element, the parsing is done for you by the\n    // browser.\n    const parser = document.createElement('a');\n\n    let useSSL;\n    let default_port;\n\n    // Chrome is the only browser that allows non-http protocols in\n    // the anchor tag's href, so change them all to http here so we\n    // get the benefits of the anchor tag's parsing\n    if (_src.substring(0, 5).toLowerCase() === 'clsps') {\n      useSSL = true;\n      parser.href = _src.replace('clsps', 'https');\n      default_port = 443;\n    }\n    else if (_src.substring(0, 4).toLowerCase() === 'clsp') {\n      useSSL = false;\n      parser.href = _src.replace('clsp', 'http');\n      default_port = 9001;\n    }\n    else {\n      throw new Error('The given source is not a clsp url, and therefore cannot be parsed.');\n    }\n\n    const paths = parser.pathname.split('/');\n    const streamName = paths[paths.length - 1];\n\n    let hostname = parser.hostname;\n    let port = parser.port;\n\n    if (port.length === 0) {\n      port = default_port;\n    }\n\n    // @ is a special address meaning the server that loaded the web page.\n    if (hostname === '@') {\n      hostname = window.location.hostname;\n    }\n\n    return {\n      port: parseInt(port),\n      address: hostname,\n      streamName,\n      useSSL,\n    };\n  };\n\n  constructor (iov) {\n    debug('constructor');\n\n    this.iov = iov;\n\n    this.MAX_SEQ_PROC = 2;\n\n    // Used for determining the size of the internal buffer hidden from the MSE\n    // api by recording the size and time of each chunk of video upon buffer append\n    // and recording the time when the updateend event is called.\n    this.LogSourceBuffer = false;\n    this.LogSourceBufferTopic = null;\n\n    this.resetPlayState();\n\n    this.moovBox = null;\n    this.moofBox = null;\n\n    // -1 is forever\n    this.retry_count = 3;\n\n    this._start_play = this._start_play.bind(this);\n    this._on_sourceopen = this._on_sourceopen.bind(this);\n    this._on_sourceended = this._on_sourceended.bind(this);\n    this._on_moof = this._on_moof.bind(this);\n    this._on_updateend = this._on_updateend.bind(this);\n    this.onTransportTransaction = this.onTransportTransaction.bind(this);\n  }\n\n  resetPlayState () {\n    this.state = 'idle';\n    this.seqnum = 1;\n    this.seqnumProcessed = 1; // last sequence number processed\n    this.source_buffer_ready = false;\n    this.dropCounter = 0;\n  }\n\n  isMimeCodecSupported (mimeCodec) {\n    if (!window.MediaSource || !window.MediaSource.isTypeSupported(mimeCodec)) {\n      // the browser does not support this video format\n      this._fault(`Unsupported mime codec: ${mimeCodec}`);\n\n      return false;\n    }\n\n    return true;\n  }\n\n  onTransportTransaction (iov, response) {\n    const new_mimeCodec = response.mimeCodec;\n    const new_guid = response.guid; // stream guid\n\n    if (!this.isMimeCodecSupported(new_mimeCodec)) {\n      return;\n    }\n\n    const initSegmentTopic = `${this.iov.config.clientId}/init-segment/${parseInt(Math.random() * 1000000)}`;\n\n    const transport = (iov === null)\n      ? this.iov.transport\n      : iov.transport;\n\n    transport.subscribe(initSegmentTopic, (mqtt_msg) => {\n      const moov = mqtt_msg.payloadBytes; // store new MOOV atom.\n\n      transport.unsubscribe(initSegmentTopic);\n\n      const oldTopic = `iov/video/${this.guid}/live`;\n      const newTopic = `iov/video/${new_guid}/live`;\n\n      transport.subscribe(newTopic, (moof_mqtt_msg) => {\n        const moofBox = moof_mqtt_msg.payloadBytes;\n\n        this.vqueue.push(moofBox.slice(0));\n\n        // unsubscribe to existing live\n        // 1) unsubscribe to remove avoid callback\n        transport.unsubscribe(newTopic);\n\n        // 2) unsubscribe to live callback for the old stream\n        this.iov.transport.unsubscribe(oldTopic);\n\n        // 3) resubscribe with different callback\n        transport.subscribe(newTopic, this._on_moof);\n\n        // alter object properties to reflect new stream\n        this.guid = new_guid;\n        this.moovBox = moov;\n        this.mimeCodec = new_mimeCodec;\n\n        // remove media source buffer, reinitialize\n        this.reinitializeMse();\n\n        if (!iov) {\n          return;\n        }\n\n        if (iov.config.parentNodeId !== null) {\n          var iframe_elm = document.getElementById(this.iov.config.clientId);\n          var parent = document.getElementById(iov.config.parentNodeId);\n\n          if (parent) {\n            parent.removeChild(iframe_elm);\n          }\n\n          // remove code from iframe.\n          iframe_elm.srcdoc = '';\n        }\n\n        // replace iov variable with the new one created.\n        this.iov = iov;\n      });\n    });\n\n    const play_request_topic = `iov/video/${new_guid}/play`;\n\n    transport.publish(play_request_topic, {\n      initSegmentTopic,\n      clientId: (iov === null)\n        ? this.iov.config.clientId\n        : iov.config.clientId,\n    });\n  }\n\n  change (newStream, iov) {\n    debug('change');\n\n    const request = { clientId: this.iov.config.clientId };\n    const topic = `iov/video/${window.btoa(newStream)}/request`;\n\n    if (iov) {\n      iov.transport.transaction(topic, (...args) => this.onTransportTransaction(iov, ...args), request);\n      return;\n    }\n\n    this.iov.transport.transaction(topic, (...args) => this.onTransportTransaction(iov, ...args), request);\n  }\n\n  _fault (message) {\n    debug('_fault');\n\n    this.videoPlayer.errors.extend({\n      PLAYER_ERR_IOV: {\n        headline: 'Error Playing Stream',\n        message,\n      },\n    });\n\n    this.videoPlayer.error({ code: 'PLAYER_ERR_IOV' });\n    this.state = 'fault';\n  }\n\n  reinitializeMse () {\n    debug('reinitializeMse');\n\n    this.resetPlayState();\n\n    // free resource\n    if (this.mediaSource) {\n      URL.revokeObjectURL(this.mediaSource);\n\n      // reallocate, this will call media source open which will\n      // append the MOOV atom.\n      this.video.src = URL.createObjectURL(this.mediaSource);\n    }\n  }\n\n  restart () {\n    debug('restart');\n\n    this.stop();\n    this.play(this.eid, this.streamName, this.onFirstChunk, this.onVideoRecv);\n  }\n\n  play (eid, streamName, onFirstChunk, onVideoRecv) {\n    debug('play');\n\n    this.video = document.getElementById(eid);\n\n    this.eid = eid;\n    this.id = eid.replace('_html5_api', '');\n    this.streamName = streamName;\n    this.onFirstChunk = onFirstChunk;\n    this.onVideoRecv = onVideoRecv;\n    this.videoPlayer = videojs.getPlayer(this.id);\n\n    if (typeof this.video === 'undefined') {\n      this._fault(\"Unable to match id '\" + eid + \"'\");\n      return;\n    }\n\n    const request = { clientId: this.iov.config.clientId };\n    const topic = `iov/video/${window.btoa(this.streamName)}/request`;\n\n    this.iov.transport.transaction(topic, this._start_play, request);\n  }\n\n  resume (onFirstChunk, onVideoRecv) {\n    debug('resume');\n\n    const self = this;\n\n    self.onFirstChunk = onFirstChunk;\n    self.onVideoRecv = onVideoRecv;\n\n    var request = { clientId: self.iov.config.clientId };\n    var topic = \"iov/video/\" + window.btoa(self.streamName) + \"/request\";\n    self.iov.transport.transaction(topic, self._start_play, request);\n  }\n\n  _appendBuffer_event (bytearray) {\n    silly('_appendBuffer_event');\n\n    const self = this;\n\n    if ((self.LogSourceBuffer === true) &&\n      (self.LogSourceBufferTopic !== null)) {\n      //debug(\"recording \"+parseInt(bytearray.length)+\" bytes of data\");\n      var mqtt_msg = new Paho.MQTT.Message(bytearray);\n      mqtt_msg.destinationName = self.LogSourceBufferTopic;\n      MQTTClient.send(mqtt_msg);\n    }\n\n    self.onVideoRecv();\n\n    // increment bytecount stats\n    self.iov.statsMsg.byteCount += bytearray.length;\n  }\n\n  stop () {\n    debug('stop');\n\n    const self = this;\n\n    // stop streaming live video\n    if (typeof self.guid !== 'undefined') {\n      self.iov.transport.unsubscribe(\"iov/video/\" + self.guid + \"/live\");\n    }\n\n    self.state = \"idle\";\n\n    // free resources associated with player\n    self.seqnum = 1;\n    self.moovBox = null;\n    self.moofBox = null;\n\n    var request = { clientId: self.iov.config.clientId };\n    self.iov.transport.publish(\"iov/video/\" + self.guid + \"/stop\", request);\n  }\n\n  _start_play (resp) {\n    debug('_start_play');\n\n    const self = this;\n\n    self.mimeCodec = resp.mimeCodec;\n    self.guid = resp.guid; // stream guid\n\n    if ('MediaSource' in window && MediaSource.isTypeSupported(self.mimeCodec)) {\n      var initseg_topic = self.iov.config.clientId + \"/init-segment/\" +\n        parseInt(Math.random() * 1000000);\n\n      self._async_play_loop(resp, initseg_topic);\n      var play_request_topic = \"iov/video/\" + self.guid + \"/play\";\n      self.iov.transport.publish(play_request_topic, {\n        initSegmentTopic: initseg_topic,\n        clientId: self.iov.config.clientId\n      });\n    } else {\n      // the browser does not support this video format\n      self._fault(\"Unsupported mime codec \" + self.mimeCodec);\n    }\n  }\n\n  _async_play_loop (resp, initSegmentTopic) {\n    debug('_async_play_loop');\n\n    const self = this;\n\n    // setup handlers for video\n    self.vqueue = []; // used if the media source buffer is busy\n\n    self.state = \"waiting-for-moov\";\n\n    self.iov.transport.subscribe(initSegmentTopic, function (mqtt_msg) {\n\n      // capture the initial segment\n      self.moovBox = mqtt_msg.payloadBytes;\n      //debug(typeof mqtt_msg.payloadBytes);\n      //debug(\"received moov from server\");\n\n\n      self.state = \"waiting-for-moof\";\n      // unsubscribe to this group\n      self.iov.transport.unsubscribe(initSegmentTopic);\n\n      // subscribe to the live video topic.\n      self.state = \"playing\";\n      self.iov.transport.subscribe(\"iov/video/\" + self.guid + \"/live\", self._on_moof);\n      // create media source buffer and start routing video traffic.\n\n\n      self.onFirstChunk(); // first chunk of video received.\n\n      self.mediaSource = new MediaSource();\n\n      // when videojs initializes the video element (or something like that),\n      // it creates events and listeners on that element that it uses, however\n      // these events interfere with our ability to play clsp streams.  Cloning\n      // the element like this and reinserting it is a blunt instrument to remove\n      // all of the videojs events so that we are in control of the player.\n      var clone = self.video.cloneNode();\n      var parent = self.video.parentNode;\n\n      if (parent !== null) {\n        parent.replaceChild(clone, self.video);\n        self.video = clone;\n      }\n\n      self.videoPlayer.on('changesrc', function (event, { eid, url }) {\n        debug(`iov-change-src on id ${self.videoPlayer.id()}`);\n\n        if (!url) {\n          throw new Error('Unable to process change event because there is no url!');\n        }\n\n        // parse url, extract the ip of the sfs and the port as well as useSSL\n        const new_cfg = IOVPlayer.generateIOVConfigFromCLSPURL(url);\n\n        if (new_cfg.address === self.iov.config.wsbroker) {\n          self.change(new_cfg.streamName, null);\n          return;\n        }\n\n        new_cfg.initialize = false;\n        new_cfg.videoElement = self.iov.config.videoElement;\n        new_cfg.appStart = (iov) => {\n          // conected to new mqtt\n          self.change(new_cfg.streamName, iov);\n        };\n\n        self.iov.clone(new_cfg);\n      });\n\n      self.mediaSource.addEventListener('sourceopen', self._on_sourceopen);\n      self.mediaSource.addEventListener('sourceended', self._on_sourceended);\n      self.mediaSource.addEventListener('error', function (e) {\n        console.error(\"MSE error\");\n        console.error(e);\n      });\n\n      // now assign media source extensions\n      //debug(\"Disregard: The play() request was interrupted ... its not an error!\");\n      self.video.src = URL.createObjectURL(self.mediaSource);\n\n      // subscribe to a sync topic that will be called if the stream that is feeding\n      // the mse service dies and has to be restarted that this player should restart the stream\n      var resync_topic = \"iov/video/\" + self.guid + \"/resync\";\n      debug(\"Call \" + resync_topic + \" to resync stream\");\n      self.iov.transport.subscribe(resync_topic,\n        function (mqtt_msg) {\n          debug(\"sync received re-initialize media source buffer\");\n          self.reinitializeMse();\n        }\n      );\n\n    });\n  }\n\n  _on_moof (mqtt_msg) {\n    silly('_on_moof');\n\n    const self = this;\n\n    if (self.source_buffer_ready == false) {\n      //debug(\"media source not yet open dropping frame\");\n      return;\n    }\n\n    /**\n        Enqueues or sends to the media source buffer an MP4 moof atom. This contains a\n        chunk of video/audio tracks.\n      */\n    // pace control. Allow a maximum of MAX_SEQ_PROC MOOF boxes to be held within\n    // the source buffer.\n    if ((self.seqnum - self.seqnumProcessed) > self.MAX_SEQ_PROC) {\n      //debug(\"DROPPING FRAME DRIFT TOO HIGH, dropCounter = \" + parseInt(self.dropCounter));\n      return; // DROP this frame since the borwser is falling\n    }\n\n    var moofBox = mqtt_msg.payloadBytes;\n    moofBox[20] = (self.seqnum & 0xFF000000) >> 24;\n    moofBox[21] = (self.seqnum & 0x00FF0000) >> 16;\n    moofBox[22] = (self.seqnum & 0x0000FF00) >> 8;\n    moofBox[23] = self.seqnum & 0xFF;\n\n    //debug(\"moof handler: data seqnum chunk \");\n    //debug(self.seqnum);\n\n    if (self.sourceBuffer.updating === false) {\n      try {\n        //debug(typeof moofBox);\n        //debug(\"calling append buffer\");\n        self._appendBuffer_event(moofBox);\n        self.sourceBuffer.appendBuffer(moofBox);\n        self.seqnum += 1; // increment sequence number for next chunk\n      } catch (e) {\n        console.error(\"Excetion thrown from appendBuffer\", e);\n        self.videoPlayer.error({ code: 3 });\n        self.reinitializeMse();\n      }\n    } else {\n      self.vqueue.push(moofBox.slice(0));\n    }\n  }\n\n  // found when stress testing many videos, it is possible for the\n  // media source ready state not to be open even though\n  // source open callback is being called.\n  _on_sourceopen () {\n    debug('_on_sourceopen');\n\n    const self = this;\n\n    if (self.mediaSource.readyState === \"open\") {\n      self._do_on_sourceopen();\n      return;\n    }\n\n    var t = setInterval(function () {\n      if (self.mediaSource.readyState === \"open\") {\n        self._do_on_sourceopen();\n        clearInterval(t);\n      }\n    }, 1000);\n  }\n\n  _do_on_sourceopen () {\n    debug('_do_on_sourceopen');\n\n    const self = this;\n\n    /** New media source opened. Add a buffer and append the moov MP4 video data.\n    */\n\n    // add buffer\n    self.sourceBuffer = self.mediaSource.addSourceBuffer(self.mimeCodec);\n    self.sourceBuffer.mode = 'sequence';\n    self.sourceBuffer.addEventListener('updateend', self._on_updateend);\n\n    self.sourceBuffer.addEventListener('error', function (e) {\n      console.error(\"MSE sourceBffer error\");\n      console.error(e);\n    });\n\n    // we are now able to process video\n    self.source_buffer_ready = true;\n\n    self._appendBuffer_event(self.moovBox);\n    self.sourceBuffer.appendBuffer(self.moovBox);\n  }\n\n  _on_sourceended () {\n    debug('_on_sourceended');\n\n    const self = this;\n\n    // @todo - do we need to clear the buffer manually?\n    self.stop();\n    self.source_buffer_ready = false;\n  }\n\n  _on_updateend () {\n    silly('_on_updateend');\n\n    const self = this;\n\n    // identify what seqnum of the MOOF message has actually been processed.\n    self.seqnumProcessed += 1;\n\n    if (self.video.paused === true) {\n      try {\n        // console.log(\"video paused calling video.play()\", self.videoPlayer.id());\n        var promise = self.video.play();\n        // console.log(\"video.play() called\", self.videoPlayer.id());\n        if (typeof promise !== 'undefined') {\n          promise.then(function (_) { }).catch(function (e) { });\n        }\n      } catch (ex) {\n        console.error(\"Exception while trying to play:\" + ex.message);\n      }\n      //debug(\"setting video player from paused to play\");\n    }\n\n    /*\n    var logmsg =\n        \"_on_updateend: \" +\n        ((self.video.paused) ? \" video is paused,\": \"video is playing,\")   +\n        \" ready state = '\" + self.mediaSource.readyState + \"', \" +\n        \" video queue size = \" + parseInt(self.vqueue.length)\n    ;\n    debug(logmsg);\n    */\n    if (self.mediaSource.readyState === \"open\") {\n      if (self.sourceBuffer.buffered.length > 0) {\n        var start = self.sourceBuffer.buffered.start(0);\n        var end = self.sourceBuffer.buffered.end(0);\n        var time_buffered = end - start;\n        var limit = 15.0;\n        if (time_buffered > 30.0) {\n          try {\n            // observed this fail during a memry snapshot in chrome\n            // otherwise no observed failure, so ignore exception.\n            self.sourceBuffer.remove(start, start + limit);\n          } catch (e) {\n            console.log('error while removing', self.videoPlayer.id())\n            console.error(e)\n          }\n        }\n      }\n\n      if (self.vqueue.length > 0) {\n        self._appendBuffer_event(self.vqueue[0]);\n        setTimeout(function () {\n          // deqeue next prepared moof atom\n          if (self.sourceBuffer.updating === false) {\n            try {\n              self.sourceBuffer.appendBuffer(self.vqueue[0]);\n            } catch (ex) {\n              // internal error, this has been observed to happen the tab\n              // in the browser where this video player lives is hidden\n              // then reselected. 'ex' is undefined the error is bug\n              // within the MSE C++ implementation in the browser.\n              self.reinitializeMse();\n            }\n          }\n          // regardless we must proceed to the frame.\n          self.vqueue = self.vqueue.slice(1);\n        }, 0);\n      }\n    }\n  }\n};\n","const MINIMUM_CHROME_VERSION = 52;\n\nfunction browserIsCompatable () {\n  // Chrome 1+\n  const isChrome = (Boolean(window.chrome) && Boolean(window.chrome.webstore));\n\n  if (!isChrome) {\n    return false;\n  }\n\n  try {\n    return (parseInt(navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./)[2], 10) >= MINIMUM_CHROME_VERSION);\n  }\n  catch (error) {\n    return false;\n  }\n}\n\n\n\n\n\n\nexport default {\n  supported: browserIsCompatable,\n};\n","import 'videojs-errors';\n\nimport 'srcdoc-polyfill';\nimport './conduit/clspConduit.generated.js';\n// import './conduit/clspConduit.generated.min.js';\n\nimport MseOverMqttPlugin from './MseOverMqttPlugin';\nimport '../styles/videojs-mse-over-clsp.scss';\n\n// @todo - do not initialize the plugin by default, since that is a side\n// effect.  make the caller call the initialize function.  also, is it\n// possible to unregister the plugin?\nconst clspPlugin = MseOverMqttPlugin();\n\nclspPlugin.register();\n\nexport default clspPlugin;\n","// removed by extract-text-webpack-plugin","/* (ignored) */","module.exports = videojs;"],"sourceRoot":""}