{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/debug/src/browser.js","webpack:///./node_modules/debug/src/debug.js","webpack:///./node_modules/ms/index.js","webpack:///./node_modules/node-libs-browser/node_modules/process/browser.js","webpack:///./node_modules/srcdoc-polyfill/srcdoc-polyfill.js","webpack:///./node_modules/uuid/lib/bytesToUuid.js","webpack:///./node_modules/uuid/lib/rng-browser.js","webpack:///./node_modules/uuid/v4.js","webpack:///./node_modules/videojs-errors/dist/videojs-errors.es.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/js/MqttHandler.js","webpack:///./src/js/MqttSourceHandler.js","webpack:///./src/js/conduit/clspConduit.generated.js","webpack:///./src/js/iov/IOV.js","webpack:///./src/js/iov/MqttConduitCollection.js","webpack:///./src/js/iov/MqttTopicHandlers.js","webpack:///./src/js/iov/MqttTransport.js","webpack:///./src/js/iov/player.js","webpack:///./src/js/mseOverMqtt.js","webpack:///./src/js/utils.js","webpack:///./src/js/videojs-mse-over-clsp.js","webpack:///./src/styles/videojs-mse-over-clsp.scss","webpack:///external \"videojs\""],"names":["exports","module","require","log","formatArgs","save","load","useColors","storage","chrome","local","localstorage","colors","window","process","type","navigator","userAgent","toLowerCase","match","document","documentElement","style","WebkitAppearance","console","firebug","exception","table","parseInt","RegExp","$1","formatters","j","v","JSON","stringify","err","message","args","namespace","humanize","diff","c","color","splice","index","lastC","replace","Function","prototype","apply","call","arguments","namespaces","removeItem","debug","e","r","env","DEBUG","enable","localStorage","createDebug","coerce","disable","enabled","instances","names","skips","selectColor","hash","i","charCodeAt","Math","abs","length","prevTime","self","curr","Date","ms","prev","Array","unshift","format","formatter","val","logFn","bind","destroy","init","push","indexOf","split","len","substr","instance","name","test","Error","stack","s","m","h","d","y","options","parse","isNaN","long","fmtLong","fmtShort","str","String","exec","n","parseFloat","undefined","round","plural","floor","ceil","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","setTimeout","clearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","run","nextTick","Item","array","title","browser","argv","version","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","root","factory","_srcDoc","srcDoc","define","idx","iframes","isCompliant","createElement","sandboxMsg","sandboxAllow","validate","iframe","sandbox","getAttribute","force","removeAttribute","logError","setAttribute","implementations","compliant","content","legacy","jsUrl","contentWindow","location","error","msg","set","noConflict","getElementsByTagName","byteToHex","toString","bytesToUuid","buf","offset","bth","join","getRandomValues","crypto","msCrypto","rnds8","Uint8Array","whatwgRNG","rnds","mathRNG","random","rng","v4","ii","commonjsGlobal","global","empty","empty$1","Object","freeze","default","minDoc","topLevel","doccy","document_1","FlashObj","videojs","getComponent","defaultDismiss","IS_IPHONE","registerPlugin","plugin","defaults","header","code","dismiss","progressDisabled","errors","headline","initPlugin","player","monitor","waiting","isStalling","updateErrors","updates","mergeOptions","keys","forEach","k","resetMonitor","removeClass","paused","ended","addClass","cleanup","listener","shift","healthcheck","fn","check","tech","$","vjs_getProperty","onPlayStartMonitor","lastTime","currentTime","onPlayNoSource","currentSrc","onErrorHandler","details","dialogContent","localize","isSupported","flashMessage","display","getChild","className","id","closeable","innerHTML","fillWith","contentEl","firstChild","appendChild","el","okButton","querySelector","close","currentWidth","currentHeight","one","onDisposeHandler","reInitPlugin","newOptions","extend","getAll","disableProgress","disabled","ready","VERSION","warn","g","eval","Component","SrcsLookupTable","MqttHandler","source","mqtt","tech_","source_","playing","_src","parser","useSSL","default_port","kluged_src","substring","href","hostname","port","t","pathname","streamName","mqtt_player","address","onMqttReady","velm","iov","appStart","evt","CustomEvent","dispatchEvent","addEventListener","restart","videoElement","initialize","MqttSourceHandler","mode","obj","canPlayType","canHandleSource","srcObj","localOptions","src","startsWith","utils","supported","handleSource","iframe_code","pframe_client","config","onReady","dispatch","command","postMessage","setInterval","clearInterval","inboundHandler","handler","destinationName","subscribe","topic","callback","method","unsubscribe","publish","data","transaction","resp_topic","clientId","mqtt_resp","resp","payloadString","mqttConduit","client","MqttUseSSL","markup","wsbroker","wsport","origin","srcdoc","width","height","parentNode","DEBUG_PREFIX","IOV","NoMediaSourceAlert","MediaSource","WebKitMediaSource","alert","uuidv4","Debug","mqttTopicHandlers","mqttConduitCollection","transport","events","connection_lost","responseObject","on_message","msghandler","text","compatibilityCheck","event","exists","conduit","getById","eventType","reason","_player","MqttConduitCollection","_conduits","_statsTimer","statsMsg","inkbps","byteCount","hasOwnProperty","MqttTopicHandlers","_handlers","get","MqttTransport","host","addFromIov","LogSourceBuffer","LogSourceBufferTopic","state","seqnum","seqnumProcessed","MAX_SEQ_PROC","dropCounter","moovBox","moofBox","retry_count","source_buffer_ready","_fault","_ThePlayer","PLAYER_ERR_IOV","reinitializeMse","URL","revokeObjectURL","mediaSource","video","createObjectURL","stop","play","eid","onFirstChunk","onVideoRecv","getElementById","request","btoa","_start_play","resume","_appendBuffer_event","bytearray","mqtt_msg","Paho","MQTT","Message","MQTTClient","send","guid","mimeCodec","isTypeSupported","initseg_topic","_async_play_loop","play_request_topic","initSegmentTopic","vqueue","payloadBytes","_on_moof","clone","cloneNode","parent","replaceChild","_on_sourceopen","_on_sourceended","resync_topic","sourceBuffer","updating","appendBuffer","slice","readyState","_do_on_sourceopen","addSourceBuffer","_on_updateend","buffered","start","end","time_buffered","limit","remove","ex","promise","then","_","catch","onPlayerReady","mseOverMqtt","PLAYER_ERR_NOT_COMPAT","spinner","player_","loadingSpinner","videojs_player","source_tag","currentSource","launchIovPlayer","iov_player","setupControlBar","controlBar","playToggle","children_","el_","handlePause","show","hide","trigger","handlePlay","target","videoTag","children","MINIMUM_CHROME_VERSION","browserIsCompatable","isChrome","Boolean","webstore","mqttHandler","mqttSourceHandler","mqttSupported","getTech","registerSourceHandler","clspPlugin"],"mappings":"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","file":"videojs-mse-over-clsp.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/videojs-mse-over-clsp.js\");\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","(function(root, factory) {\n\t// `root` does not resolve to the global window object in a Browserified\n\t// bundle, so a direct reference to that object is used instead.\n\tvar _srcDoc = window.srcDoc;\n\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(['exports'], function(exports) {\n\t\t\tfactory(exports, _srcDoc);\n\t\t\troot.srcDoc = exports;\n\t\t});\n\t} else if (typeof exports === \"object\") {\n\t\tfactory(exports, _srcDoc);\n\t} else {\n\t\troot.srcDoc = {};\n\t\tfactory(root.srcDoc, _srcDoc);\n\t}\n})(this, function(exports, _srcDoc) {\n\tvar idx, iframes;\n\tvar isCompliant = !!(\"srcdoc\" in document.createElement(\"iframe\"));\n\tvar sandboxMsg = \"Polyfill may not function in the presence of the \" +\n\t\t\"`sandbox` attribute. Consider using the `force` option.\";\n\tvar sandboxAllow = /\\ballow-same-origin\\b/;\n\t/**\n\t * Determine if the operation may be blocked by the `sandbox` attribute in\n\t * some environments, and optionally issue a warning or remove the\n\t * attribute.\n\t */\n\tvar validate = function( iframe, options ) {\n\t\tvar sandbox = iframe.getAttribute(\"sandbox\");\n\t\tif (typeof sandbox === \"string\" && !sandboxAllow.test(sandbox)) {\n\t\t\tif (options && options.force) {\n\t\t\t\tiframe.removeAttribute(\"sandbox\");\n\t\t\t} else if (!options || options.force !== false) {\n\t\t\t\tlogError(sandboxMsg);\n\t\t\t\tiframe.setAttribute(\"data-srcdoc-polyfill\", sandboxMsg);\n\t\t\t}\n\t\t}\n\t};\n\tvar implementations = {\n\t\tcompliant: function( iframe, content, options ) {\n\n\t\t\tif (content) {\n\t\t\t\tvalidate(iframe, options);\n\t\t\t\tiframe.setAttribute(\"srcdoc\", content);\n\t\t\t}\n\t\t},\n\t\tlegacy: function( iframe, content, options ) {\n\n\t\t\tvar jsUrl;\n\n\t\t\tif (!iframe || !iframe.getAttribute) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!content) {\n\t\t\t\tcontent = iframe.getAttribute(\"srcdoc\");\n\t\t\t} else {\n\t\t\t\tiframe.setAttribute(\"srcdoc\", content);\n\t\t\t}\n\n\t\t\tif (content) {\n\t\t\t\tvalidate(iframe, options);\n\n\t\t\t\t// The value returned by a script-targeted URL will be used as\n\t\t\t\t// the iFrame's content. Create such a URL which returns the\n\t\t\t\t// iFrame element's `srcdoc` attribute.\n\t\t\t\tjsUrl = \"javascript: window.frameElement.getAttribute('srcdoc');\";\n\n\t\t\t\t// Explicitly set the iFrame's window.location for\n\t\t\t\t// compatability with IE9, which does not react to changes in\n\t\t\t\t// the `src` attribute when it is a `javascript:` URL, for\n\t\t\t\t// some reason\n\t\t\t\tif (iframe.contentWindow) {\n\t\t\t\t\tiframe.contentWindow.location = jsUrl;\n\t\t\t\t}\n\n\t\t\t\tiframe.setAttribute(\"src\", jsUrl);\n\t\t\t}\n\t\t}\n\t};\n\tvar srcDoc = exports;\n\tvar logError;\n\n\tif (window.console && window.console.error) {\n\t\tlogError = function(msg) {\n\t\t\twindow.console.error(\"[srcdoc-polyfill] \" + msg);\n\t\t};\n\t} else {\n\t\tlogError = function() {};\n\t}\n\n\t// Assume the best\n\tsrcDoc.set = implementations.compliant;\n\tsrcDoc.noConflict = function() {\n\t\twindow.srcDoc = _srcDoc;\n\t\treturn srcDoc;\n\t};\n\n\t// If the browser supports srcdoc, no shimming is necessary\n\tif (isCompliant) {\n\t\treturn;\n\t}\n\n\tsrcDoc.set = implementations.legacy;\n\n\t// Automatically shim any iframes already present in the document\n\tiframes = document.getElementsByTagName(\"iframe\");\n\tidx = iframes.length;\n\n\twhile (idx--) {\n\t\tsrcDoc.set( iframes[idx] );\n\t}\n\n});\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","/*! @name videojs-errors @version 4.1.1 @license Apache-2.0 */\nimport videojs from 'video.js';\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nvar empty = {};\n\nvar empty$1 = /*#__PURE__*/Object.freeze({\n\tdefault: empty\n});\n\nvar minDoc = ( empty$1 && empty ) || empty$1;\n\nvar topLevel = typeof commonjsGlobal !== 'undefined' ? commonjsGlobal :\n    typeof window !== 'undefined' ? window : {};\n\n\nvar doccy;\n\nif (typeof document !== 'undefined') {\n    doccy = document;\n} else {\n    doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'];\n\n    if (!doccy) {\n        doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'] = minDoc;\n    }\n}\n\nvar document_1 = doccy;\n\nvar version = \"4.1.1\";\n\nconst FlashObj = videojs.getComponent('Flash');\nconst defaultDismiss = !videojs.browser.IS_IPHONE;\n\n// Video.js 5/6 cross-compatibility.\nconst registerPlugin = videojs.registerPlugin || videojs.plugin;\n\n// Default options for the plugin.\nconst defaults = {\n  header: '',\n  code: '',\n  message: '',\n  timeout: 45 * 1000,\n  dismiss: defaultDismiss,\n  progressDisabled: false,\n  errors: {\n    '1': {\n      type: 'MEDIA_ERR_ABORTED',\n      headline: 'The video download was cancelled'\n    },\n    '2': {\n      type: 'MEDIA_ERR_NETWORK',\n      headline: 'The video connection was lost, please confirm you are ' +\n                'connected to the internet'\n    },\n    '3': {\n      type: 'MEDIA_ERR_DECODE',\n      headline: 'The video is bad or in a format that cannot be played on your browser'\n    },\n    '4': {\n      type: 'MEDIA_ERR_SRC_NOT_SUPPORTED',\n      headline: 'This video is either unavailable or not supported in this browser'\n    },\n    '5': {\n      type: 'MEDIA_ERR_ENCRYPTED',\n      headline: 'The video you are trying to watch is encrypted and we do not know how ' +\n                'to decrypt it'\n    },\n    'unknown': {\n      type: 'MEDIA_ERR_UNKNOWN',\n      headline: 'An unanticipated problem was encountered, check back soon and try again'\n    },\n    '-1': {\n      type: 'PLAYER_ERR_NO_SRC',\n      headline: 'No video has been loaded'\n    },\n    '-2': {\n      type: 'PLAYER_ERR_TIMEOUT',\n      headline: 'Could not download the video'\n    },\n    'PLAYER_ERR_DOMAIN_RESTRICTED': {\n      headline: 'This video is restricted from playing on your current domain'\n    },\n    'PLAYER_ERR_IP_RESTRICTED': {\n      headline: 'This video is restricted at your current IP address'\n    },\n    'PLAYER_ERR_GEO_RESTRICTED': {\n      headline: 'This video is restricted from playing in your current geographic region'\n    },\n    'FLASHLS_ERR_CROSS_DOMAIN': {\n      headline: 'The video could not be loaded: crossdomain access denied.'\n    }\n  }\n};\n\nconst initPlugin = function(player, options) {\n  let monitor;\n  let waiting;\n  let isStalling;\n  const listeners = [];\n\n  const updateErrors = function(updates) {\n    options.errors = videojs.mergeOptions(options.errors, updates);\n\n    // Create `code`s from errors which don't have them (based on their keys).\n    Object.keys(options.errors).forEach(k => {\n      const err = options.errors[k];\n\n      if (!err.type) {\n        err.type = k;\n      }\n    });\n  };\n\n  // Make sure we flesh out initially-provided errors.\n  updateErrors();\n\n  // clears the previous monitor timeout and sets up a new one\n  const resetMonitor = function() {\n    // at this point the player has recovered\n    player.clearTimeout(waiting);\n    if (isStalling) {\n      isStalling = false;\n      player.removeClass('vjs-waiting');\n    }\n\n    // start the loading spinner if player has stalled\n    waiting = player.setTimeout(function() {\n      // player already has an error\n      // or is not playing under normal conditions\n      if (player.error() || player.paused() || player.ended()) {\n        return;\n      }\n\n      isStalling = true;\n      player.addClass('vjs-waiting');\n    }, 1000);\n\n    player.clearTimeout(monitor);\n    monitor = player.setTimeout(function() {\n      // player already has an error\n      // or is not playing under normal conditions\n      if (player.error() || player.paused() || player.ended()) {\n        return;\n      }\n\n      player.error({\n        code: -2,\n        type: 'PLAYER_ERR_TIMEOUT'\n      });\n    }, options.timeout);\n\n    // clear out any existing player timeout\n    // playback has recovered\n    if (player.error() && player.error().code === -2) {\n      player.error(null);\n    }\n  };\n\n  // clear any previously registered listeners\n  const cleanup = function() {\n    let listener;\n\n    while (listeners.length) {\n      listener = listeners.shift();\n      player.off(listener[0], listener[1]);\n    }\n    player.clearTimeout(monitor);\n    player.clearTimeout(waiting);\n  };\n\n  // creates and tracks a player listener if the player looks alive\n  const healthcheck = function(type, fn) {\n    const check = function() {\n      // if there's an error do not reset the monitor and\n      // clear the error unless time is progressing\n      if (!player.error()) {\n        // error if using Flash and its API is unavailable\n        const tech = player.$('.vjs-tech');\n\n        if (tech &&\n            tech.type === 'application/x-shockwave-flash' &&\n            !tech.vjs_getProperty) {\n          player.error({\n            code: -2,\n            type: 'PLAYER_ERR_TIMEOUT'\n          });\n          return;\n        }\n\n        // playback isn't expected if the player is paused\n        if (player.paused()) {\n          return resetMonitor();\n        }\n        // playback isn't expected once the video has ended\n        if (player.ended()) {\n          return resetMonitor();\n        }\n      }\n\n      fn.call(this);\n    };\n\n    player.on(type, check);\n    listeners.push([type, check]);\n  };\n\n  const onPlayStartMonitor = function() {\n    let lastTime = 0;\n\n    cleanup();\n\n    // if no playback is detected for long enough, trigger a timeout error\n    resetMonitor();\n    healthcheck(['timeupdate', 'adtimeupdate'], function() {\n      const currentTime = player.currentTime();\n\n      // playback is operating normally or has recovered\n      if (currentTime !== lastTime) {\n        lastTime = currentTime;\n        resetMonitor();\n      }\n    });\n\n    if (!options.progressDisabled) {\n      healthcheck('progress', resetMonitor);\n    }\n  };\n\n  const onPlayNoSource = function() {\n    if (!player.currentSrc()) {\n      player.error({\n        code: -1,\n        type: 'PLAYER_ERR_NO_SRC'\n      });\n    }\n  };\n\n  const onErrorHandler = function() {\n    let details = '';\n    let error = player.error();\n    const content = document_1.createElement('div');\n    let dialogContent = '';\n\n    // In the rare case when `error()` does not return an error object,\n    // defensively escape the handler function.\n    if (!error) {\n      return;\n    }\n\n    error = videojs.mergeOptions(error, options.errors[error.code || error.type || 0]);\n\n    if (error.message) {\n      details = `<div class=\"vjs-errors-details\">${player.localize('Technical details')}\n        : <div class=\"vjs-errors-message\">${player.localize(error.message)}</div>\n        </div>`;\n    }\n\n    if (error.code === 4 && FlashObj && !FlashObj.isSupported()) {\n      const flashMessage = player.localize(\n        'If you are using an older browser please try upgrading or installing Flash.'\n      );\n\n      details += `<span class=\"vjs-errors-flashmessage\">${flashMessage}</span>`;\n    }\n\n    const display = player.getChild('errorDisplay');\n\n    content.className = 'vjs-errors-dialog';\n    content.id = 'vjs-errors-dialog';\n    dialogContent =\n     `<div class=\"vjs-errors-content-container\">\n      <h2 class=\"vjs-errors-headline\">${this.localize(error.headline)}</h2>\n        <div><b>${this.localize('Error Code')}</b>: ${(error.type || error.code)}</div>\n        ${details}\n      </div>`;\n\n    const closeable = display.closeable(!('dismiss' in error) || error.dismiss);\n\n    // We should get a close button\n    if (closeable) {\n      dialogContent +=\n       `<div class=\"vjs-errors-ok-button-container\">\n          <button class=\"vjs-errors-ok-button\">${this.localize('OK')}</button>\n        </div>`;\n      content.innerHTML = dialogContent;\n      display.fillWith(content);\n      // Get the close button inside the error display\n      display.contentEl().firstChild.appendChild(display.getChild('closeButton').el());\n\n      const okButton = display.el().querySelector('.vjs-errors-ok-button');\n\n      player.on(okButton, 'click', function() {\n        display.close();\n      });\n    } else {\n      content.innerHTML = dialogContent;\n      display.fillWith(content);\n    }\n\n    if (player.currentWidth() <= 600 || player.currentHeight() <= 250) {\n      display.addClass('vjs-xs');\n    }\n\n    display.one('modalclose', () => player.error(null));\n  };\n\n  const onDisposeHandler = function() {\n    cleanup();\n\n    player.removeClass('vjs-errors');\n    player.off('play', onPlayStartMonitor);\n    player.off('play', onPlayNoSource);\n    player.off('dispose', onDisposeHandler);\n    player.off(['aderror', 'error'], onErrorHandler);\n  };\n\n  const reInitPlugin = function(newOptions) {\n    onDisposeHandler();\n    initPlugin(player, videojs.mergeOptions(defaults, newOptions));\n  };\n\n  reInitPlugin.extend = (errors) => updateErrors(errors);\n  reInitPlugin.getAll = () => videojs.mergeOptions(options.errors);\n\n  // Get / set timeout value. Restart monitor if changed.\n  reInitPlugin.timeout = function(timeout) {\n    if (typeof timeout === 'undefined') {\n      return options.timeout;\n    }\n    if (timeout !== options.timeout) {\n      options.timeout = timeout;\n      if (!player.paused()) {\n        onPlayStartMonitor();\n      }\n    }\n  };\n\n  reInitPlugin.disableProgress = function(disabled) {\n    options.progressDisabled = disabled;\n    onPlayStartMonitor();\n  };\n\n  player.on('play', onPlayStartMonitor);\n  player.on('play', onPlayNoSource);\n  player.on('dispose', onDisposeHandler);\n  player.on(['aderror', 'error'], onErrorHandler);\n\n  player.ready(() => {\n    player.addClass('vjs-errors');\n  });\n\n  // if the plugin is re-initialised during playback, start the timeout handler.\n  if (!player.paused()) {\n    onPlayStartMonitor();\n  }\n\n  // Include the version number.\n  reInitPlugin.VERSION = version;\n\n  player.errors = reInitPlugin;\n};\n\nconst errors = function(options) {\n  initPlugin(this, videojs.mergeOptions(defaults, options));\n};\n\n['extend', 'getAll', 'disableProgress'].forEach(k => {\n  errors[k] = function() {\n    videojs.log.warn(\n      `The errors.${k}() method is not available until the plugin has been initialized!`\n    );\n  };\n});\n\n// Include the version number.\nerrors.VERSION = version;\n\n// Register the plugin with video.js.\nregisterPlugin('errors', errors);\n\nexport default errors;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import videojs from 'video.js';\n\nimport IOV from './iov/IOV';\n\nconst Component = videojs.getComponent('Component');\n\nexport default function (SrcsLookupTable) {\n    class MqttHandler extends Component {\n\n        constructor(source, tech, options) {\n            super(tech,options.mqtt);\n            this.tech_ = tech;\n            this.source_ = source;\n            this.enabled = false;\n            this.playing = false;\n        }\n\n        src(_src) {\n            if (!_src) {\n                 return;\n            }\n            var parser = document.createElement('a');\n\n            var useSSL = false;\n            var default_port;\n            var kluged_src;\n\n            if (_src.substring(0,5).toLowerCase() === 'clsps') {\n                useSSL = true;\n                kluged_src = _src.replace('clsps','https');   \n                default_port = 443;              \n            } else { \n                // firefox/ie hack!\n                kluged_src = _src.replace('clsp','http');\n                default_port = 9001;\n            }\n\n            parser.href = kluged_src;\n            //parser.href = \"http:\" + parser.pathname;\n\n            var hostname = parser.hostname;\n            var port = parser.port;\n            var t = parser.pathname.split(\"/\");\n            var streamName = t[t.length-1];\n\n            if (port.length === 0) {\n                port = default_port;\n            }\n\n\n            // @ is a special address maening the server that loaded the web page.\n            if (hostname === '@') {\n                hostname = window.location.hostname;\n            }\n\n            this.mqtt_player = null;\n            this.port = parseInt(port);\n            this.address = hostname;\n            this.streamName = streamName;\n            this.enabled = true;\n            this.useSSL = useSSL;\n\n            SrcsLookupTable[_src] = this;\n        }\n\n\n        launchIovPlayer(onMqttReady) {\n\n            var velm = this.player().el();\n\n\n            var iov = new IOV({\n                port: this.port,\n                address: this.address,\n                appStart: (iov) => {\n                    // connected to MQTT procede to setting up callbacks\n                    //console.log(\"iov.player() called\")\n                    var mqtt_player = iov.player();\n                    var evt = new CustomEvent(\"mqttReady\");\n                    this.player().el().dispatchEvent( evt );\n                    onMqttReady(mqtt_player);\n\n                    velm.addEventListener(\"mse-error-event\",function(e){\n                        mqtt_player.restart();\n                    },false);\n\n\n                },\n                useSSL: this.useSSL,\n                videoElement: velm\n            });\n\n            iov.initialize();\n        }\n\n\n\n    };\n\n    return MqttHandler;\n}\n","import videojs from 'video.js';\n\nimport utils from './utils';\n\nexport default function (MqttHandler) {\n  /*\n     source handler for the source tag in html5:\n     <video><source src=\"...\" type=\"...\"></video>\n\n     mqttSourceHandler = {\n         canPlayType: function(type) {\n             // only the canned type for MediaSource entensions\n             // use media source extensions to determine if\n             // it can play it. MQTT/video\n         },\n         canHandleSource: function(source, options) {\n             // check for mqtt:// .... as a protocol\n         },\n         handleSource : function(source, tech, options) {\n         },\n         dispose: function() {\n             // destructor.\n         }\n     }\n\n     Html5 = videojs.getTech('Html5');\n     Html5.registerSourceHandler(mqttSourceHandler);\n\n  */\n\n  const MqttSourceHandler = function(mode) {\n      var obj = {\n          canPlayType: function(type){\n              var r = '';\n              if ('MediaSource' in window) {\n                  if (type === \"video/mp4; codecs='avc1.42E01E'\") {\n                      r = 'maybe';\n                  } else {\n                      console.log(\"clsp type='\" + type + \"' rejected\");\n                  }\n              }\n              return r;\n          },\n          canHandleSource: function(srcObj, options={}){\n              /* This method is used to determin if the following html5 tag can be used\n                 as a video source:\n\n                 <source src=\"clsp://<ip addr>:<ws port>/<mqtt topic>\"\n                         type=\"video/mp4; codecs='avc1.42E01E'\" />\n              */\n              let localOptions =\n                   videojs.mergeOptions(videojs.options, options);\n\n              if (!srcObj.src) {\n                  console.log(\"srcObj doesn't contain src\");\n                  console.log(srcObj);\n                  return false;\n              }\n\n              \n\n              if (srcObj.src.startsWith(\"clsp\") === false) {\n                  console.log(\"srcObj.src is not clsp protocol\");\n                  return false;\n              }\n\n              /// restrict to chrome version 52 or greater\n              if (utils.supported() === false) {\n                  console.log(\"Browser not supported. Chrome 52+ is required.\");\n                  return false;\n              }\n\n              return obj.canPlayType(srcObj.type);\n          },\n          handleSource: function(srcObj, tech, options={})  {\n              let localOptions = videojs.mergeOptions(videojs.options, options, {mqtt: {mode}});\n\n              tech.mqtt = new MqttHandler(srcObj,tech,localOptions);\n              tech.mqtt.src(srcObj.src);\n              return tech.mqtt;\n          }\n      };\n      return obj;\n  };\n\n  return MqttSourceHandler;\n}\n","/*\nCreates a hidden iframe that is used to establish a dedicated mqtt websocket\nfor a single video. This is basically an in browser micro service which\nuses cross document communication to route data to and from the iframe.\n*/\n\n\n// The below string literals allow the iframe to be created completely withinjavascript allowing\n// the videojs to be completely protable.\n\n\n// this code is filled in by the gulpfile.js\nvar iframe_code = \"/*******************************************************************************\\n * Copyright (c) 2013, 2016 IBM Corp.\\n *\\n * All rights reserved. This program and the accompanying materials\\n * are made available under the terms of the Eclipse Public License v1.0\\n * and Eclipse Distribution License v1.0 which accompany this distribution.\\n *\\n * The Eclipse Public License is available at\\n *    http://www.eclipse.org/legal/epl-v10.html\\n * and the Eclipse Distribution License is available at\\n *   http://www.eclipse.org/org/documents/edl-v10.php.\\n *\\n *******************************************************************************/\\n(function(p,s){\\\"object\\\"===typeof exports&&\\\"object\\\"===typeof module?module.exports=s():\\\"function\\\"===typeof define&&define.amd?define(s):\\\"object\\\"===typeof exports?exports=s():(\\\"undefined\\\"===typeof p.Paho&&(p.Paho={}),p.Paho.MQTT=s())})(this,function(){return function(p){function s(a,b,c){b[c++]=a>>8;b[c++]=a%256;return c}function u(a,b,c,k){k=s(b,c,k);D(a,c,k);return k+b}function n(a){for(var b=0,c=0;c<a.length;c++){var k=a.charCodeAt(c);2047<k?(55296<=k&&56319>=k&&(c++,b++),b+=3):127<k?b+=2:b++}return b}\\nfunction D(a,b,c){for(var k=0;k<a.length;k++){var e=a.charCodeAt(k);if(55296<=e&&56319>=e){var g=a.charCodeAt(++k);if(isNaN(g))throw Error(f(h.MALFORMED_UNICODE,[e,g]));e=(e-55296<<10)+(g-56320)+65536}127>=e?b[c++]=e:(2047>=e?b[c++]=e>>6&31|192:(65535>=e?b[c++]=e>>12&15|224:(b[c++]=e>>18&7|240,b[c++]=e>>12&63|128),b[c++]=e>>6&63|128),b[c++]=e&63|128)}return b}function E(a,b,c){for(var k=\\\"\\\",e,g=b;g<b+c;){e=a[g++];if(!(128>e)){var m=a[g++]-128;if(0>m)throw Error(f(h.MALFORMED_UTF,[e.toString(16),m.toString(16),\\n\\\"\\\"]));if(224>e)e=64*(e-192)+m;else{var d=a[g++]-128;if(0>d)throw Error(f(h.MALFORMED_UTF,[e.toString(16),m.toString(16),d.toString(16)]));if(240>e)e=4096*(e-224)+64*m+d;else{var l=a[g++]-128;if(0>l)throw Error(f(h.MALFORMED_UTF,[e.toString(16),m.toString(16),d.toString(16),l.toString(16)]));if(248>e)e=262144*(e-240)+4096*m+64*d+l;else throw Error(f(h.MALFORMED_UTF,[e.toString(16),m.toString(16),d.toString(16),l.toString(16)]));}}}65535<e&&(e-=65536,k+=String.fromCharCode(55296+(e>>10)),e=56320+(e&\\n1023));k+=String.fromCharCode(e)}return k}var z=function(a,b){for(var c in a)if(a.hasOwnProperty(c))if(b.hasOwnProperty(c)){if(typeof a[c]!==b[c])throw Error(f(h.INVALID_TYPE,[typeof a[c],c]));}else{c=\\\"Unknown property, \\\"+c+\\\". Valid properties are:\\\";for(var k in b)b.hasOwnProperty(k)&&(c=c+\\\" \\\"+k);throw Error(c);}},v=function(a,b){return function(){return a.apply(b,arguments)}},h={OK:{code:0,text:\\\"AMQJSC0000I OK.\\\"},CONNECT_TIMEOUT:{code:1,text:\\\"AMQJSC0001E Connect timed out.\\\"},SUBSCRIBE_TIMEOUT:{code:2,\\ntext:\\\"AMQJS0002E Subscribe timed out.\\\"},UNSUBSCRIBE_TIMEOUT:{code:3,text:\\\"AMQJS0003E Unsubscribe timed out.\\\"},PING_TIMEOUT:{code:4,text:\\\"AMQJS0004E Ping timed out.\\\"},INTERNAL_ERROR:{code:5,text:\\\"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}\\\"},CONNACK_RETURNCODE:{code:6,text:\\\"AMQJS0006E Bad Connack return code:{0} {1}.\\\"},SOCKET_ERROR:{code:7,text:\\\"AMQJS0007E Socket error:{0}.\\\"},SOCKET_CLOSE:{code:8,text:\\\"AMQJS0008I Socket closed.\\\"},MALFORMED_UTF:{code:9,text:\\\"AMQJS0009E Malformed UTF data:{0} {1} {2}.\\\"},\\nUNSUPPORTED:{code:10,text:\\\"AMQJS0010E {0} is not supported by this browser.\\\"},INVALID_STATE:{code:11,text:\\\"AMQJS0011E Invalid state {0}.\\\"},INVALID_TYPE:{code:12,text:\\\"AMQJS0012E Invalid type {0} for {1}.\\\"},INVALID_ARGUMENT:{code:13,text:\\\"AMQJS0013E Invalid argument {0} for {1}.\\\"},UNSUPPORTED_OPERATION:{code:14,text:\\\"AMQJS0014E Unsupported operation.\\\"},INVALID_STORED_DATA:{code:15,text:\\\"AMQJS0015E Invalid data in local storage key\\\\x3d{0} value\\\\x3d{1}.\\\"},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:\\\"AMQJS0016E Invalid MQTT message type {0}.\\\"},\\nMALFORMED_UNICODE:{code:17,text:\\\"AMQJS0017E Malformed Unicode string:{0} {1}.\\\"},BUFFER_FULL:{code:18,text:\\\"AMQJS0018E Message buffer is full, maximum buffer size: {0}.\\\"}},H={0:\\\"Connection Accepted\\\",1:\\\"Connection Refused: unacceptable protocol version\\\",2:\\\"Connection Refused: identifier rejected\\\",3:\\\"Connection Refused: server unavailable\\\",4:\\\"Connection Refused: bad user name or password\\\",5:\\\"Connection Refused: not authorized\\\"},f=function(a,b){var c=a.text;if(b)for(var k,e,g=0;g<b.length;g++)if(k=\\\"{\\\"+\\ng+\\\"}\\\",e=c.indexOf(k),0<e)var h=c.substring(0,e),c=c.substring(e+k.length),c=h+b[g]+c;return c},A=[0,6,77,81,73,115,100,112,3],B=[0,4,77,81,84,84,4],q=function(a,b){this.type=a;for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c])};q.prototype.encode=function(){var a=(this.type&15)<<4,b=0,c=[],k=0,e;void 0!==this.messageIdentifier&&(b+=2);switch(this.type){case 1:switch(this.mqttVersion){case 3:b+=A.length+3;break;case 4:b+=B.length+3}b+=n(this.clientId)+2;void 0!==this.willMessage&&(b+=n(this.willMessage.destinationName)+\\n2,e=this.willMessage.payloadBytes,e instanceof Uint8Array||(e=new Uint8Array(h)),b+=e.byteLength+2);void 0!==this.userName&&(b+=n(this.userName)+2);void 0!==this.password&&(b+=n(this.password)+2);break;case 8:for(var a=a|2,g=0;g<this.topics.length;g++)c[g]=n(this.topics[g]),b+=c[g]+2;b+=this.requestedQos.length;break;case 10:a|=2;for(g=0;g<this.topics.length;g++)c[g]=n(this.topics[g]),b+=c[g]+2;break;case 6:a|=2;break;case 3:this.payloadMessage.duplicate&&(a|=8);a=a|=this.payloadMessage.qos<<1;this.payloadMessage.retained&&\\n(a|=1);var k=n(this.payloadMessage.destinationName),h=this.payloadMessage.payloadBytes,b=b+(k+2)+h.byteLength;h instanceof ArrayBuffer?h=new Uint8Array(h):h instanceof Uint8Array||(h=new Uint8Array(h.buffer))}var f=b,g=Array(1),d=0;do{var t=f%128,f=f>>7;0<f&&(t|=128);g[d++]=t}while(0<f&&4>d);f=g.length+1;b=new ArrayBuffer(b+f);d=new Uint8Array(b);d[0]=a;d.set(g,1);if(3==this.type)f=u(this.payloadMessage.destinationName,k,d,f);else if(1==this.type){switch(this.mqttVersion){case 3:d.set(A,f);f+=A.length;\\nbreak;case 4:d.set(B,f),f+=B.length}a=0;this.cleanSession&&(a=2);void 0!==this.willMessage&&(a=a|4|this.willMessage.qos<<3,this.willMessage.retained&&(a|=32));void 0!==this.userName&&(a|=128);void 0!==this.password&&(a|=64);d[f++]=a;f=s(this.keepAliveInterval,d,f)}void 0!==this.messageIdentifier&&(f=s(this.messageIdentifier,d,f));switch(this.type){case 1:f=u(this.clientId,n(this.clientId),d,f);void 0!==this.willMessage&&(f=u(this.willMessage.destinationName,n(this.willMessage.destinationName),d,f),\\nf=s(e.byteLength,d,f),d.set(e,f),f+=e.byteLength);void 0!==this.userName&&(f=u(this.userName,n(this.userName),d,f));void 0!==this.password&&u(this.password,n(this.password),d,f);break;case 3:d.set(h,f);break;case 8:for(g=0;g<this.topics.length;g++)f=u(this.topics[g],c[g],d,f),d[f++]=this.requestedQos[g];break;case 10:for(g=0;g<this.topics.length;g++)f=u(this.topics[g],c[g],d,f)}return b};var F=function(a,b,c){this._client=a;this._window=b;this._keepAliveInterval=1E3*c;this.isReset=!1;var k=(new q(12)).encode(),\\ne=function(a){return function(){return g.apply(a)}},g=function(){this.isReset?(this.isReset=!1,this._client._trace(\\\"Pinger.doPing\\\",\\\"send PINGREQ\\\"),this._client.socket.send(k),this.timeout=this._window.setTimeout(e(this),this._keepAliveInterval)):(this._client._trace(\\\"Pinger.doPing\\\",\\\"Timed out\\\"),this._client._disconnected(h.PING_TIMEOUT.code,f(h.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0;this._window.clearTimeout(this.timeout);0<this._keepAliveInterval&&(this.timeout=setTimeout(e(this),\\nthis._keepAliveInterval))};this.cancel=function(){this._window.clearTimeout(this.timeout)}},w=function(a,b,c,f,e){this._window=b;c||(c=30);this.timeout=setTimeout(function(a,b,c){return function(){return a.apply(b,c)}}(f,a,e),1E3*c);this.cancel=function(){this._window.clearTimeout(this.timeout)}},d=function(a,b,c,d,e){if(!(\\\"WebSocket\\\"in p&&null!==p.WebSocket))throw Error(f(h.UNSUPPORTED,[\\\"WebSocket\\\"]));if(!(\\\"localStorage\\\"in p&&null!==p.localStorage))throw Error(f(h.UNSUPPORTED,[\\\"localStorage\\\"]));\\nif(!(\\\"ArrayBuffer\\\"in p&&null!==p.ArrayBuffer))throw Error(f(h.UNSUPPORTED,[\\\"ArrayBuffer\\\"]));this._trace(\\\"Paho.MQTT.Client\\\",a,b,c,d,e);this.host=b;this.port=c;this.path=d;this.uri=a;this.clientId=e;this._wsuri=null;this._localKey=b+\\\":\\\"+c+(\\\"/mqtt\\\"!=d?\\\":\\\"+d:\\\"\\\")+\\\":\\\"+e+\\\":\\\";this._msg_queue=[];this._buffered_msg_queue=[];this._sentMessages={};this._receivedMessages={};this._notify_msg_sent={};this._message_identifier=1;this._sequence=0;for(var g in localStorage)0!==g.indexOf(\\\"Sent:\\\"+this._localKey)&&0!==\\ng.indexOf(\\\"Received:\\\"+this._localKey)||this.restore(g)};d.prototype.host=null;d.prototype.port=null;d.prototype.path=null;d.prototype.uri=null;d.prototype.clientId=null;d.prototype.socket=null;d.prototype.connected=!1;d.prototype.maxMessageIdentifier=65536;d.prototype.connectOptions=null;d.prototype.hostIndex=null;d.prototype.onConnected=null;d.prototype.onConnectionLost=null;d.prototype.onMessageDelivered=null;d.prototype.onMessageArrived=null;d.prototype.traceFunction=null;d.prototype._msg_queue=\\nnull;d.prototype._buffered_msg_queue=null;d.prototype._connectTimeout=null;d.prototype.sendPinger=null;d.prototype.receivePinger=null;d.prototype._reconnectInterval=1;d.prototype._reconnecting=!1;d.prototype._reconnectTimeout=null;d.prototype.disconnectedPublishing=!1;d.prototype.disconnectedBufferSize=5E3;d.prototype.receiveBuffer=null;d.prototype._traceBuffer=null;d.prototype._MAX_TRACE_ENTRIES=100;d.prototype.connect=function(a){var b=this._traceMask(a,\\\"password\\\");this._trace(\\\"Client.connect\\\",\\nb,this.socket,this.connected);if(this.connected)throw Error(f(h.INVALID_STATE,[\\\"already connected\\\"]));if(this.socket)throw Error(f(h.INVALID_STATE,[\\\"already connected\\\"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1);this.connectOptions=a;this._reconnectInterval=1;this._reconnecting=!1;a.uris?(this.hostIndex=0,this._doConnect(a.uris[0])):this._doConnect(this.uri)};d.prototype.subscribe=function(a,b){this._trace(\\\"Client.subscribe\\\",a,b);if(!this.connected)throw Error(f(h.INVALID_STATE,\\n[\\\"not connected\\\"]));var c=new q(8);c.topics=[a];c.requestedQos=void 0!==b.qos?[b.qos]:[0];b.onSuccess&&(c.onSuccess=function(a){b.onSuccess({invocationContext:b.invocationContext,grantedQos:a})});b.onFailure&&(c.onFailure=function(a){b.onFailure({invocationContext:b.invocationContext,errorCode:a,errorMessage:f(a)})});b.timeout&&(c.timeOut=new w(this,window,b.timeout,b.onFailure,[{invocationContext:b.invocationContext,errorCode:h.SUBSCRIBE_TIMEOUT.code,errorMessage:f(h.SUBSCRIBE_TIMEOUT)}]));this._requires_ack(c);\\nthis._schedule_message(c)};d.prototype.unsubscribe=function(a,b){this._trace(\\\"Client.unsubscribe\\\",a,b);if(!this.connected)throw Error(f(h.INVALID_STATE,[\\\"not connected\\\"]));var c=new q(10);c.topics=[a];b.onSuccess&&(c.callback=function(){b.onSuccess({invocationContext:b.invocationContext})});b.timeout&&(c.timeOut=new w(this,window,b.timeout,b.onFailure,[{invocationContext:b.invocationContext,errorCode:h.UNSUBSCRIBE_TIMEOUT.code,errorMessage:f(h.UNSUBSCRIBE_TIMEOUT)}]));this._requires_ack(c);this._schedule_message(c)};\\nd.prototype.send=function(a){this._trace(\\\"Client.send\\\",a);wireMessage=new q(3);wireMessage.payloadMessage=a;if(this.connected)0<a.qos?this._requires_ack(wireMessage):this.onMessageDelivered&&(this._notify_msg_sent[wireMessage]=this.onMessageDelivered(wireMessage.payloadMessage)),this._schedule_message(wireMessage);else if(this._reconnecting&&this.disconnectedPublishing){if(Object.keys(this._sentMessages).length+this._buffered_msg_queue.length>this.disconnectedBufferSize)throw Error(f(h.BUFFER_FULL,\\n[this.disconnectedBufferSize]));0<a.qos?this._requires_ack(wireMessage):(wireMessage.sequence=++this._sequence,this._buffered_msg_queue.push(wireMessage))}else throw Error(f(h.INVALID_STATE,[\\\"not connected\\\"]));};d.prototype.disconnect=function(){this._trace(\\\"Client.disconnect\\\");this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1);if(!this.socket)throw Error(f(h.INVALID_STATE,[\\\"not connecting or connected\\\"]));wireMessage=new q(14);this._notify_msg_sent[wireMessage]=\\nv(this._disconnected,this);this._schedule_message(wireMessage)};d.prototype.getTraceLog=function(){if(null!==this._traceBuffer){this._trace(\\\"Client.getTraceLog\\\",new Date);this._trace(\\\"Client.getTraceLog in flight messages\\\",this._sentMessages.length);for(var a in this._sentMessages)this._trace(\\\"_sentMessages \\\",a,this._sentMessages[a]);for(a in this._receivedMessages)this._trace(\\\"_receivedMessages \\\",a,this._receivedMessages[a]);return this._traceBuffer}};d.prototype.startTrace=function(){null===this._traceBuffer&&\\n(this._traceBuffer=[]);this._trace(\\\"Client.startTrace\\\",new Date,\\\"1.0.3\\\")};d.prototype.stopTrace=function(){delete this._traceBuffer};d.prototype._doConnect=function(a){this.connectOptions.useSSL&&(a=a.split(\\\":\\\"),a[0]=\\\"wss\\\",a=a.join(\\\":\\\"));this._wsuri=a;this.connected=!1;this.socket=4>this.connectOptions.mqttVersion?new WebSocket(a,[\\\"mqttv3.1\\\"]):new WebSocket(a,[\\\"mqtt\\\"]);this.socket.binaryType=\\\"arraybuffer\\\";this.socket.onopen=v(this._on_socket_open,this);this.socket.onmessage=v(this._on_socket_message,\\nthis);this.socket.onerror=v(this._on_socket_error,this);this.socket.onclose=v(this._on_socket_close,this);this.sendPinger=new F(this,window,this.connectOptions.keepAliveInterval);this.receivePinger=new F(this,window,this.connectOptions.keepAliveInterval);this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null);this._connectTimeout=new w(this,window,this.connectOptions.timeout,this._disconnected,[h.CONNECT_TIMEOUT.code,f(h.CONNECT_TIMEOUT)])};d.prototype._schedule_message=function(a){this._msg_queue.push(a);\\nthis.connected&&this._process_queue()};d.prototype.store=function(a,b){var c={type:b.type,messageIdentifier:b.messageIdentifier,version:1};switch(b.type){case 3:b.pubRecReceived&&(c.pubRecReceived=!0);c.payloadMessage={};for(var d=\\\"\\\",e=b.payloadMessage.payloadBytes,g=0;g<e.length;g++)d=15>=e[g]?d+\\\"0\\\"+e[g].toString(16):d+e[g].toString(16);c.payloadMessage.payloadHex=d;c.payloadMessage.qos=b.payloadMessage.qos;c.payloadMessage.destinationName=b.payloadMessage.destinationName;b.payloadMessage.duplicate&&\\n(c.payloadMessage.duplicate=!0);b.payloadMessage.retained&&(c.payloadMessage.retained=!0);0===a.indexOf(\\\"Sent:\\\")&&(void 0===b.sequence&&(b.sequence=++this._sequence),c.sequence=b.sequence);break;default:throw Error(f(h.INVALID_STORED_DATA,[key,c]));}localStorage.setItem(a+this._localKey+b.messageIdentifier,JSON.stringify(c))};d.prototype.restore=function(a){var b=localStorage.getItem(a),c=JSON.parse(b),d=new q(c.type,c);switch(c.type){case 3:for(var b=c.payloadMessage.payloadHex,e=new ArrayBuffer(b.length/\\n2),e=new Uint8Array(e),g=0;2<=b.length;){var m=parseInt(b.substring(0,2),16),b=b.substring(2,b.length);e[g++]=m}b=new Paho.MQTT.Message(e);b.qos=c.payloadMessage.qos;b.destinationName=c.payloadMessage.destinationName;c.payloadMessage.duplicate&&(b.duplicate=!0);c.payloadMessage.retained&&(b.retained=!0);d.payloadMessage=b;break;default:throw Error(f(h.INVALID_STORED_DATA,[a,b]));}0===a.indexOf(\\\"Sent:\\\"+this._localKey)?(d.payloadMessage.duplicate=!0,this._sentMessages[d.messageIdentifier]=d):0===a.indexOf(\\\"Received:\\\"+\\nthis._localKey)&&(this._receivedMessages[d.messageIdentifier]=d)};d.prototype._process_queue=function(){for(var a=null,b=this._msg_queue.reverse();a=b.pop();)this._socket_send(a),this._notify_msg_sent[a]&&(this._notify_msg_sent[a](),delete this._notify_msg_sent[a])};d.prototype._requires_ack=function(a){var b=Object.keys(this._sentMessages).length;if(b>this.maxMessageIdentifier)throw Error(\\\"Too many messages:\\\"+b);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;\\na.messageIdentifier=this._message_identifier;this._sentMessages[a.messageIdentifier]=a;3===a.type&&this.store(\\\"Sent:\\\",a);this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)};d.prototype._on_socket_open=function(){var a=new q(1,this.connectOptions);a.clientId=this.clientId;this._socket_send(a)};d.prototype._on_socket_message=function(a){this._trace(\\\"Client._on_socket_message\\\",a.data);a=this._deframeMessages(a.data);for(var b=0;b<a.length;b+=1)this._handleMessage(a[b])};\\nd.prototype._deframeMessages=function(a){a=new Uint8Array(a);var b=[];if(this.receiveBuffer){var c=new Uint8Array(this.receiveBuffer.length+a.length);c.set(this.receiveBuffer);c.set(a,this.receiveBuffer.length);a=c;delete this.receiveBuffer}try{for(c=0;c<a.length;){var d;a:{var e=a,g=c,m=g,n=e[g],l=n>>4,t=n&15,g=g+1,x=void 0,C=0,p=1;do{if(g==e.length){d=[null,m];break a}x=e[g++];C+=(x&127)*p;p*=128}while(0!==(x&128));x=g+C;if(x>e.length)d=[null,m];else{var y=new q(l);switch(l){case 2:e[g++]&1&&(y.sessionPresent=\\n!0);y.returnCode=e[g++];break;case 3:var m=t>>1&3,s=256*e[g]+e[g+1],g=g+2,u=E(e,g,s),g=g+s;0<m&&(y.messageIdentifier=256*e[g]+e[g+1],g+=2);var r=new Paho.MQTT.Message(e.subarray(g,x));1==(t&1)&&(r.retained=!0);8==(t&8)&&(r.duplicate=!0);r.qos=m;r.destinationName=u;y.payloadMessage=r;break;case 4:case 5:case 6:case 7:case 11:y.messageIdentifier=256*e[g]+e[g+1];break;case 9:y.messageIdentifier=256*e[g]+e[g+1],g+=2,y.returnCode=e.subarray(g,x)}d=[y,x]}}var v=d[0],c=d[1];if(null!==v)b.push(v);else break}c<\\na.length&&(this.receiveBuffer=a.subarray(c))}catch(w){d=\\\"undefined\\\"==w.hasOwnProperty(\\\"stack\\\")?w.stack.toString():\\\"No Error Stack Available\\\";this._disconnected(h.INTERNAL_ERROR.code,f(h.INTERNAL_ERROR,[w.message,d]));return}return b};d.prototype._handleMessage=function(a){this._trace(\\\"Client._handleMessage\\\",a);try{switch(a.type){case 2:this._connectTimeout.cancel();this._reconnectTimeout&&this._reconnectTimeout.cancel();if(this.connectOptions.cleanSession){for(var b in this._sentMessages){var c=this._sentMessages[b];\\nlocalStorage.removeItem(\\\"Sent:\\\"+this._localKey+c.messageIdentifier)}this._sentMessages={};for(b in this._receivedMessages){var d=this._receivedMessages[b];localStorage.removeItem(\\\"Received:\\\"+this._localKey+d.messageIdentifier)}this._receivedMessages={}}if(0===a.returnCode)this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);else{this._disconnected(h.CONNACK_RETURNCODE.code,f(h.CONNACK_RETURNCODE,[a.returnCode,H[a.returnCode]]));break}a=[];for(var e in this._sentMessages)this._sentMessages.hasOwnProperty(e)&&\\na.push(this._sentMessages[e]);if(0<this._buffered_msg_queue.length){e=null;for(var g=this._buffered_msg_queue.reverse();e=g.pop();)a.push(e),this.onMessageDelivered&&(this._notify_msg_sent[e]=this.onMessageDelivered(e.payloadMessage))}a=a.sort(function(a,b){return a.sequence-b.sequence});for(var g=0,m=a.length;g<m;g++)if(c=a[g],3==c.type&&c.pubRecReceived){var n=new q(6,{messageIdentifier:c.messageIdentifier});this._schedule_message(n)}else this._schedule_message(c);if(this.connectOptions.onSuccess)this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});\\nc=!1;this._reconnecting&&(c=!0,this._reconnectInterval=1,this._reconnecting=!1);this._connected(c,this._wsuri);this._process_queue();break;case 3:this._receivePublish(a);break;case 4:if(c=this._sentMessages[a.messageIdentifier])if(delete this._sentMessages[a.messageIdentifier],localStorage.removeItem(\\\"Sent:\\\"+this._localKey+a.messageIdentifier),this.onMessageDelivered)this.onMessageDelivered(c.payloadMessage);break;case 5:if(c=this._sentMessages[a.messageIdentifier])c.pubRecReceived=!0,n=new q(6,{messageIdentifier:a.messageIdentifier}),\\nthis.store(\\\"Sent:\\\",c),this._schedule_message(n);break;case 6:d=this._receivedMessages[a.messageIdentifier];localStorage.removeItem(\\\"Received:\\\"+this._localKey+a.messageIdentifier);d&&(this._receiveMessage(d),delete this._receivedMessages[a.messageIdentifier]);var l=new q(7,{messageIdentifier:a.messageIdentifier});this._schedule_message(l);break;case 7:c=this._sentMessages[a.messageIdentifier];delete this._sentMessages[a.messageIdentifier];localStorage.removeItem(\\\"Sent:\\\"+this._localKey+a.messageIdentifier);\\nif(this.onMessageDelivered)this.onMessageDelivered(c.payloadMessage);break;case 9:if(c=this._sentMessages[a.messageIdentifier]){c.timeOut&&c.timeOut.cancel();if(128===a.returnCode[0]){if(c.onFailure)c.onFailure(a.returnCode)}else if(c.onSuccess)c.onSuccess(a.returnCode);delete this._sentMessages[a.messageIdentifier]}break;case 11:if(c=this._sentMessages[a.messageIdentifier])c.timeOut&&c.timeOut.cancel(),c.callback&&c.callback(),delete this._sentMessages[a.messageIdentifier];break;case 13:this.sendPinger.reset();\\nbreak;case 14:this._disconnected(h.INVALID_MQTT_MESSAGE_TYPE.code,f(h.INVALID_MQTT_MESSAGE_TYPE,[a.type]));break;default:this._disconnected(h.INVALID_MQTT_MESSAGE_TYPE.code,f(h.INVALID_MQTT_MESSAGE_TYPE,[a.type]))}}catch(t){c=\\\"undefined\\\"==t.hasOwnProperty(\\\"stack\\\")?t.stack.toString():\\\"No Error Stack Available\\\",this._disconnected(h.INTERNAL_ERROR.code,f(h.INTERNAL_ERROR,[t.message,c]))}};d.prototype._on_socket_error=function(a){this._reconnecting||this._disconnected(h.SOCKET_ERROR.code,f(h.SOCKET_ERROR,\\n[a.data]))};d.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(h.SOCKET_CLOSE.code,f(h.SOCKET_CLOSE))};d.prototype._socket_send=function(a){if(1==a.type){var b=this._traceMask(a,\\\"password\\\");this._trace(\\\"Client._socket_send\\\",b)}else this._trace(\\\"Client._socket_send\\\",a);this.socket.send(a.encode());this.sendPinger.reset()};d.prototype._receivePublish=function(a){switch(a.payloadMessage.qos){case \\\"undefined\\\":case 0:this._receiveMessage(a);break;case 1:var b=new q(4,{messageIdentifier:a.messageIdentifier});\\nthis._schedule_message(b);this._receiveMessage(a);break;case 2:this._receivedMessages[a.messageIdentifier]=a;this.store(\\\"Received:\\\",a);a=new q(5,{messageIdentifier:a.messageIdentifier});this._schedule_message(a);break;default:throw Error(\\\"Invaild qos\\\\x3d\\\"+wireMmessage.payloadMessage.qos);}};d.prototype._receiveMessage=function(a){if(this.onMessageArrived)this.onMessageArrived(a.payloadMessage)};d.prototype._connected=function(a,b){if(this.onConnected)this.onConnected(a,b)};d.prototype._reconnect=\\nfunction(){this._trace(\\\"Client._reconnect\\\");this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),128>this._reconnectInterval&&(this._reconnectInterval*=2),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))};d.prototype._disconnected=function(a,b){this._trace(\\\"Client._disconnected\\\",a,b);if(void 0!==a&&this._reconnecting)this._reconnectTimeout=new w(this,window,this._reconnectInterval,this._reconnect);\\nelse if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);\\nelse if(void 0===a&&(a=h.OK.code,b=f(h.OK)),this.connected){this.connected=!1;if(this.onConnectionLost)this.onConnectionLost({errorCode:a,errorMessage:b,reconnect:this.connectOptions.reconnect,uri:this._wsuri});a!==h.OK.code&&this.connectOptions.reconnect&&(this._reconnectInterval=1,this._reconnect())}else if(4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit)this._trace(\\\"Failed to connect V4, dropping back to V3\\\"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?\\n(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri);else if(this.connectOptions.onFailure)this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:a,errorMessage:b})};d.prototype._trace=function(){if(this.traceFunction){for(var a in arguments)\\\"undefined\\\"!==typeof arguments[a]&&arguments.splice(a,1,JSON.stringify(arguments[a]));a=Array.prototype.slice.call(arguments).join(\\\"\\\");this.traceFunction({severity:\\\"Debug\\\",message:a})}if(null!==\\nthis._traceBuffer){a=0;for(var b=arguments.length;a<b;a++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===a?this._traceBuffer.push(arguments[a]):\\\"undefined\\\"===typeof arguments[a]?this._traceBuffer.push(arguments[a]):this._traceBuffer.push(\\\"  \\\"+JSON.stringify(arguments[a]))}};d.prototype._traceMask=function(a,b){var c={},d;for(d in a)a.hasOwnProperty(d)&&(c[d]=d==b?\\\"******\\\":a[d]);return c};var G=function(a,b,c,k){var e;if(\\\"string\\\"!==typeof a)throw Error(f(h.INVALID_TYPE,\\n[typeof a,\\\"host\\\"]));if(2==arguments.length){k=b;e=a;var g=e.match(/^(wss?):\\\\/\\\\/((\\\\[(.+)\\\\])|([^\\\\/]+?))(:(\\\\d+))?(\\\\/.*)$/);if(g)a=g[4]||g[2],b=parseInt(g[7]),c=g[8];else throw Error(f(h.INVALID_ARGUMENT,[a,\\\"host\\\"]));}else{3==arguments.length&&(k=c,c=\\\"/mqtt\\\");if(\\\"number\\\"!==typeof b||0>b)throw Error(f(h.INVALID_TYPE,[typeof b,\\\"port\\\"]));if(\\\"string\\\"!==typeof c)throw Error(f(h.INVALID_TYPE,[typeof c,\\\"path\\\"]));e=\\\"ws://\\\"+(-1!==a.indexOf(\\\":\\\")&&\\\"[\\\"!==a.slice(0,1)&&\\\"]\\\"!==a.slice(-1)?\\\"[\\\"+a+\\\"]\\\":a)+\\\":\\\"+b+c}for(var m=\\ng=0;m<k.length;m++){var n=k.charCodeAt(m);55296<=n&&56319>=n&&m++;g++}if(\\\"string\\\"!==typeof k||65535<g)throw Error(f(h.INVALID_ARGUMENT,[k,\\\"clientId\\\"]));var l=new d(e,a,b,c,k);this._getHost=function(){return a};this._setHost=function(){throw Error(f(h.UNSUPPORTED_OPERATION));};this._getPort=function(){return b};this._setPort=function(){throw Error(f(h.UNSUPPORTED_OPERATION));};this._getPath=function(){return c};this._setPath=function(){throw Error(f(h.UNSUPPORTED_OPERATION));};this._getURI=function(){return e};\\nthis._setURI=function(){throw Error(f(h.UNSUPPORTED_OPERATION));};this._getClientId=function(){return l.clientId};this._setClientId=function(){throw Error(f(h.UNSUPPORTED_OPERATION));};this._getOnConnected=function(){return l.onConnected};this._setOnConnected=function(a){if(\\\"function\\\"===typeof a)l.onConnected=a;else throw Error(f(h.INVALID_TYPE,[typeof a,\\\"onConnected\\\"]));};this._getDisconnectedPublishing=function(){return l.disconnectedPublishing};this._setDisconnectedPublishing=function(a){l.disconnectedPublishing=\\na};this._getDisconnectedBufferSize=function(){return l.disconnectedBufferSize};this._setDisconnectedBufferSize=function(a){l.disconnectedBufferSize=a};this._getOnConnectionLost=function(){return l.onConnectionLost};this._setOnConnectionLost=function(a){if(\\\"function\\\"===typeof a)l.onConnectionLost=a;else throw Error(f(h.INVALID_TYPE,[typeof a,\\\"onConnectionLost\\\"]));};this._getOnMessageDelivered=function(){return l.onMessageDelivered};this._setOnMessageDelivered=function(a){if(\\\"function\\\"===typeof a)l.onMessageDelivered=\\na;else throw Error(f(h.INVALID_TYPE,[typeof a,\\\"onMessageDelivered\\\"]));};this._getOnMessageArrived=function(){return l.onMessageArrived};this._setOnMessageArrived=function(a){if(\\\"function\\\"===typeof a)l.onMessageArrived=a;else throw Error(f(h.INVALID_TYPE,[typeof a,\\\"onMessageArrived\\\"]));};this._getTrace=function(){return l.traceFunction};this._setTrace=function(a){if(\\\"function\\\"===typeof a)l.traceFunction=a;else throw Error(f(h.INVALID_TYPE,[typeof a,\\\"onTrace\\\"]));};this.connect=function(a){a=a||{};z(a,\\n{timeout:\\\"number\\\",userName:\\\"string\\\",password:\\\"string\\\",willMessage:\\\"object\\\",keepAliveInterval:\\\"number\\\",cleanSession:\\\"boolean\\\",useSSL:\\\"boolean\\\",invocationContext:\\\"object\\\",onSuccess:\\\"function\\\",onFailure:\\\"function\\\",hosts:\\\"object\\\",ports:\\\"object\\\",reconnect:\\\"boolean\\\",mqttVersion:\\\"number\\\",mqttVersionExplicit:\\\"boolean\\\",uris:\\\"object\\\"});void 0===a.keepAliveInterval&&(a.keepAliveInterval=60);if(4<a.mqttVersion||3>a.mqttVersion)throw Error(f(h.INVALID_ARGUMENT,[a.mqttVersion,\\\"connectOptions.mqttVersion\\\"]));void 0===\\na.mqttVersion?(a.mqttVersionExplicit=!1,a.mqttVersion=4):a.mqttVersionExplicit=!0;if(void 0!==a.password&&void 0===a.userName)throw Error(f(h.INVALID_ARGUMENT,[a.password,\\\"connectOptions.password\\\"]));if(a.willMessage){if(!(a.willMessage instanceof r))throw Error(f(h.INVALID_TYPE,[a.willMessage,\\\"connectOptions.willMessage\\\"]));a.willMessage.stringPayload=null;if(\\\"undefined\\\"===typeof a.willMessage.destinationName)throw Error(f(h.INVALID_TYPE,[typeof a.willMessage.destinationName,\\\"connectOptions.willMessage.destinationName\\\"]));\\n}\\\"undefined\\\"===typeof a.cleanSession&&(a.cleanSession=!0);if(a.hosts){if(!(a.hosts instanceof Array))throw Error(f(h.INVALID_ARGUMENT,[a.hosts,\\\"connectOptions.hosts\\\"]));if(1>a.hosts.length)throw Error(f(h.INVALID_ARGUMENT,[a.hosts,\\\"connectOptions.hosts\\\"]));for(var b=!1,d=0;d<a.hosts.length;d++){if(\\\"string\\\"!==typeof a.hosts[d])throw Error(f(h.INVALID_TYPE,[typeof a.hosts[d],\\\"connectOptions.hosts[\\\"+d+\\\"]\\\"]));if(/^(wss?):\\\\/\\\\/((\\\\[(.+)\\\\])|([^\\\\/]+?))(:(\\\\d+))?(\\\\/.*)$/.test(a.hosts[d]))if(0===d)b=!0;else{if(!b)throw Error(f(h.INVALID_ARGUMENT,\\n[a.hosts[d],\\\"connectOptions.hosts[\\\"+d+\\\"]\\\"]));}else if(b)throw Error(f(h.INVALID_ARGUMENT,[a.hosts[d],\\\"connectOptions.hosts[\\\"+d+\\\"]\\\"]));}if(b)a.uris=a.hosts;else{if(!a.ports)throw Error(f(h.INVALID_ARGUMENT,[a.ports,\\\"connectOptions.ports\\\"]));if(!(a.ports instanceof Array))throw Error(f(h.INVALID_ARGUMENT,[a.ports,\\\"connectOptions.ports\\\"]));if(a.hosts.length!==a.ports.length)throw Error(f(h.INVALID_ARGUMENT,[a.ports,\\\"connectOptions.ports\\\"]));a.uris=[];for(d=0;d<a.hosts.length;d++){if(\\\"number\\\"!==typeof a.ports[d]||\\n0>a.ports[d])throw Error(f(h.INVALID_TYPE,[typeof a.ports[d],\\\"connectOptions.ports[\\\"+d+\\\"]\\\"]));var b=a.hosts[d],g=a.ports[d];e=\\\"ws://\\\"+(-1!==b.indexOf(\\\":\\\")?\\\"[\\\"+b+\\\"]\\\":b)+\\\":\\\"+g+c;a.uris.push(e)}}}l.connect(a)};this.subscribe=function(a,b){if(\\\"string\\\"!==typeof a)throw Error(\\\"Invalid argument:\\\"+a);b=b||{};z(b,{qos:\\\"number\\\",invocationContext:\\\"object\\\",onSuccess:\\\"function\\\",onFailure:\\\"function\\\",timeout:\\\"number\\\"});if(b.timeout&&!b.onFailure)throw Error(\\\"subscribeOptions.timeout specified with no onFailure callback.\\\");\\nif(\\\"undefined\\\"!==typeof b.qos&&0!==b.qos&&1!==b.qos&&2!==b.qos)throw Error(f(h.INVALID_ARGUMENT,[b.qos,\\\"subscribeOptions.qos\\\"]));l.subscribe(a,b)};this.unsubscribe=function(a,b){if(\\\"string\\\"!==typeof a)throw Error(\\\"Invalid argument:\\\"+a);b=b||{};z(b,{invocationContext:\\\"object\\\",onSuccess:\\\"function\\\",onFailure:\\\"function\\\",timeout:\\\"number\\\"});if(b.timeout&&!b.onFailure)throw Error(\\\"unsubscribeOptions.timeout specified with no onFailure callback.\\\");l.unsubscribe(a,b)};this.send=function(a,b,c,d){var e;if(0===\\narguments.length)throw Error(\\\"Invalid argument.length\\\");if(1==arguments.length){if(!(a instanceof r)&&\\\"string\\\"!==typeof a)throw Error(\\\"Invalid argument:\\\"+typeof a);e=a;if(\\\"undefined\\\"===typeof e.destinationName)throw Error(f(h.INVALID_ARGUMENT,[e.destinationName,\\\"Message.destinationName\\\"]));}else e=new r(b),e.destinationName=a,3<=arguments.length&&(e.qos=c),4<=arguments.length&&(e.retained=d);l.send(e)};this.publish=function(a,b,c,d){console.log(\\\"Publising message to: \\\",a);var e;if(0===arguments.length)throw Error(\\\"Invalid argument.length\\\");\\nif(1==arguments.length){if(!(a instanceof r)&&\\\"string\\\"!==typeof a)throw Error(\\\"Invalid argument:\\\"+typeof a);e=a;if(\\\"undefined\\\"===typeof e.destinationName)throw Error(f(h.INVALID_ARGUMENT,[e.destinationName,\\\"Message.destinationName\\\"]));}else e=new r(b),e.destinationName=a,3<=arguments.length&&(e.qos=c),4<=arguments.length&&(e.retained=d);l.send(e)};this.disconnect=function(){l.disconnect()};this.getTraceLog=function(){return l.getTraceLog()};this.startTrace=function(){l.startTrace()};this.stopTrace=\\nfunction(){l.stopTrace()};this.isConnected=function(){return l.connected}};G.prototype={get host(){return this._getHost()},set host(a){this._setHost(a)},get port(){return this._getPort()},set port(a){this._setPort(a)},get path(){return this._getPath()},set path(a){this._setPath(a)},get clientId(){return this._getClientId()},set clientId(a){this._setClientId(a)},get onConnected(){return this._getOnConnected()},set onConnected(a){this._setOnConnected(a)},get disconnectedPublishing(){return this._getDisconnectedPublishing()},\\nset disconnectedPublishing(a){this._setDisconnectedPublishing(a)},get disconnectedBufferSize(){return this._getDisconnectedBufferSize()},set disconnectedBufferSize(a){this._setDisconnectedBufferSize(a)},get onConnectionLost(){return this._getOnConnectionLost()},set onConnectionLost(a){this._setOnConnectionLost(a)},get onMessageDelivered(){return this._getOnMessageDelivered()},set onMessageDelivered(a){this._setOnMessageDelivered(a)},get onMessageArrived(){return this._getOnMessageArrived()},set onMessageArrived(a){this._setOnMessageArrived(a)},\\nget trace(){return this._getTrace()},set trace(a){this._setTrace(a)}};var r=function(a){var b;if(\\\"string\\\"===typeof a||a instanceof ArrayBuffer||a instanceof Int8Array||a instanceof Uint8Array||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)b=a;else throw f(h.INVALID_ARGUMENT,[a,\\\"newPayload\\\"]);this._getPayloadString=function(){return\\\"string\\\"===typeof b?b:E(b,0,b.length)};this._getPayloadBytes=\\nfunction(){if(\\\"string\\\"===typeof b){var a=new ArrayBuffer(n(b)),a=new Uint8Array(a);D(b,a,0);return a}return b};var c;this._getDestinationName=function(){return c};this._setDestinationName=function(a){if(\\\"string\\\"===typeof a)c=a;else throw Error(f(h.INVALID_ARGUMENT,[a,\\\"newDestinationName\\\"]));};var d=0;this._getQos=function(){return d};this._setQos=function(a){if(0===a||1===a||2===a)d=a;else throw Error(\\\"Invalid argument:\\\"+a);};var e=!1;this._getRetained=function(){return e};this._setRetained=function(a){if(\\\"boolean\\\"===\\ntypeof a)e=a;else throw Error(f(h.INVALID_ARGUMENT,[a,\\\"newRetained\\\"]));};var g=!1;this._getDuplicate=function(){return g};this._setDuplicate=function(a){g=a}};r.prototype={get payloadString(){return this._getPayloadString()},get payloadBytes(){return this._getPayloadBytes()},get destinationName(){return this._getDestinationName()},set destinationName(a){this._setDestinationName(a)},get topic(){return this._getDestinationName()},set topic(a){this._setDestinationName(a)},get qos(){return this._getQos()},\\nset qos(a){this._setQos(a)},get retained(){return this._getRetained()},set retained(a){this._setRetained(a)},get duplicate(){return this._getDuplicate()},set duplicate(a){this._setDuplicate(a)}};return{Client:G,Message:r}}(window)});\\nfunction _clspRouter() {\\n    function send(m){\\n        // route message to parent which will in turn route to the correct\\n        // player based on clientId.\\n        m.clientId = MqttClientId;\\n        // console.log(m);\\n        window.parent.postMessage(m,\\\"*\\\");\\n    }// end send\\n\\n\\n    function routeInbound(message){\\n        var pstring = \\\"\\\";\\n\\n        try {\\n            pstring = message.payloadString;\\n        } catch(e) {\\n            //bogus excepton?\\n        }\\n\\n        send({\\n          event: \\'data\\',\\n          destinationName: message.destinationName,\\n          payloadString: pstring,\\n          payloadBytes: message.payloadBytes || null\\n        });\\n    }// end route inbound\\n\\n\\n    function eventHandler(evt){\\n        var m = evt.data;\\n\\n        try {\\n            if (m.method === \\'subscribe\\') {\\n                MQTTClient.subscribe(m.topic);\\n            } else if (m.method === \\'unsubscribe\\') {\\n                MQTTClient.unsubscribe(m.topic);\\n            } else if (m.method === \\'publish\\') {\\n                var mqtt_payload = null;\\n                try {\\n                    mqtt_payload = JSON.stringify(m.data);\\n                } catch( json_error ) {\\n                    console.log(\\\"json stringify error: \\\" + m.data);\\n                    return;\\n                }\\n\\n                var mqtt_msg = new Paho.MQTT.Message(mqtt_payload);\\n                mqtt_msg.destinationName = m.topic;\\n                MQTTClient.send(mqtt_msg);\\n            }\\n        } catch(e) {\\n            // we are dead!\\n            MQTTClient.disconnect();\\n        }\\n\\n    }\\n\\n    function AppReady() {\\n\\n        if (window.addEventListener) {\\n            window.addEventListener(\\\"message\\\", eventHandler, false);\\n        } else if (window.attachEvent) {\\n            window.attachEvent(\\'onmessage\\', eventHandler);\\n        }\\n\\n        send({\\n          event: \\'ready\\'\\n        });\\n\\n        if (Reconnect !== -1)\\n        {\\n            clearInterval(Reconnect);\\n            Reconnect = -1;\\n        }\\n\\n    }// application ready\\n\\n\\n    function AppFail(message) {\\n      var e = \\\"Error code \\\" +\\n          parseInt(message.errorCode) + \\\": \\\" + message.errorMessage;\\n      send({\\n        event: \\'fail\\',\\n        reason: e\\n      });\\n    }\\n\\n    MQTTClient = new Paho.MQTT.Client(\\n        MqttIp,\\n        MqttPort,\\n        MqttClientId\\n    );\\n\\n    /*\\n     * Hold the id of the reconnect interval task\\n     */\\n    var Reconnect = -1;\\n\\n    /*\\n     * Callback which gets called when the connection is lost\\n     */\\n    function onConnectionLost(message){ \\n\\n        if (Reconnect === -1) {\\n           Reconnect = setInterval(() => connect(), 2000);\\n        }\\n    }\\n    \\n    MQTTClient.onConnectionLost = onConnectionLost;\\n\\n    // perhaps the busiest function in this module ;)\\n    MQTTClient.onMessageArrived = function(message) {\\n        //// console.log(message);\\n        try {\\n             routeInbound(message);\\n        }catch(e) {\\n            if (e) {\\n                // console.log(\\\"Exception\\\");\\n                console.log(e);\\n            }\\n        }\\n    };\\n\\n    /**\\n     * Connect to MQTT...\\n     */\\n    function connect()\\n    {\\n        // setup connection options\\n        var options = {\\n            timeout: 120,\\n            onSuccess:  AppReady,\\n            onFailure: AppFail\\n        };\\n        // last will message sent on disconnect\\n        var willmsg = new Paho.MQTT.Message(JSON.stringify({\\n            clientId: MqttClientId\\n        }));\\n        willmsg.destinationName = \\\"iov/clientDisconnect\\\";\\n        options.willMessage = willmsg;\\n\\n        if (MqttUseSSL === true) {\\n            options.useSSL = true;\\n        }\\n\\n        console.log(\\'MQTTClient\\', options);\\n\\n        MQTTClient.connect(options);\\n    }\\n\\n    connect();\\n}\\n\\nfunction clspRouter() {\\n    try {\\n        _clspRouter();\\n    } catch(e) {\\n        console.log(\\\"IFRAME error\\\");\\n        console.log(e);\\n    }\\n}\\n\\nfunction onunload()\\n{\\n    if (typeof MQTTClient !== \\'undefined\\') {\\n        MQTTClient.disconnect();\\n    }\\n}\\n\";\n\n\n\nfunction pframe_client(iframe, config, onReady) {\n    var self = {\n        dispatch: {}\n    };\n\n\n    // primitive function that routes message to iframe\n    function command(m) {\n\n        if (iframe.contentWindow !== null) {\n            iframe.contentWindow.postMessage(m,\"*\");\n            return;\n        }\n\n        var t = setInterval(function(){\n            if (iframe.contentWindow !== null) {\n                iframe.contentWindow.postMessage(m,\"*\");\n                clearInterval(t);\n            }\n        },1000);\n    }\n\n\n    // called when mqtt has connected\n    self.onReady = onReady;\n\n    /* message from mqttRouter routeInbound go handler which associates this\n       client with the clientId. It then calls self.inboundHandler handler to\n       process the message from the iframe.\n    */\n    self.inboundHandler = function(message) {\n        var handler = self.dispatch[message.destinationName];\n        if ( typeof handler !== 'undefined'){\n             try {\n                handler(message);\n             } catch( e ) {\n                console.log( e );\n             }\n        } else {\n            console.log(\"No handler for \" + message.destinationName);\n        }\n    };\n\n    self.subscribe = function(topic, callback) {\n        self.dispatch[topic] = callback;\n        command({\n            method: \"subscribe\",\n            topic: topic\n        });\n    };\n\n    self.unsubscribe = function(topic) {\n        if ( topic in self.dispatch ){\n            delete self.dispatch[topic];\n        }\n        command({\n            method: \"unsubscribe\",\n            topic: topic\n        });\n    };\n\n    self.publish = function(topic, data){\n      command({\n          method: \"publish\",\n          topic: topic,\n          data: data\n      });\n    };\n\n\n    self.transaction = function( topic, callback, obj ) {\n        obj.resp_topic = config.clientId + \"/response/\"+parseInt(Math.random()*1000000);\n        self.subscribe(obj.resp_topic,function(mqtt_resp){\n            //call user specified callback to handle response from remote process\n            var resp = JSON.parse(mqtt_resp.payloadString);\n            // call user specified callback to handle response\n            callback(resp);\n            // cleanup.\n            self.unsubscribe(obj.resp_topic);\n        });\n\n        // start transaction\n        //MQTTClient.send(mqtt_msg);\n        self.publish(topic, obj );\n    };\n\n    // return client for video player.\n    return self;\n}\n\n\nwindow.mqttConduit = function( config, onReady ){\n    /*\n        config = {\n            ip: ... mqtt ip address\n            port: websocket port\n        }\n      }\n    */\n    var client = {};\n    var iframe = document.createElement('iframe');\n    var MqttUseSSL = (config.useSSL || false) ? \"true\": \"false\";\n\n    var markup =\n        '<html><head>'+\n        '<script>\\n' +\n            \"var MqttIp = '\" + config.wsbroker + \"' ; \\n\" +\n            \"var MqttPort = \" + config.wsport + \"; \\n\" +\n            \"var MqttUseSSL = \" + MqttUseSSL + \"; \\n\" +\n            \"var MqttClientId = '\" + config.clientId + \"' ; \\n\" +\n            \"var Origin = '\" + window.location.origin + \"' ; \\n\" +\n            iframe_code + '\\n' +\n        '</script>\\n' +\n        '</head><body onload=\"clspRouter();\" onunload=\"onunload();\"><body>'+\n        '<div id=\"message\"></div>'+\n        '</body></html>'\n    ;\n\n\n\n    // inject code into iframe\n    if (typeof iframe.srcdoc !== 'undefined' ) {\n        iframe.srcdoc = markup;\n    } else {\n        window.srcDoc( iframe, markup );\n    }\n\n    iframe.width = 0;\n    iframe.height = 0;\n    iframe.setAttribute('style','display:none;');\n    iframe.setAttribute('id',config.clientId);\n\n    // attach hidden iframe to player\n    //document.body.appendChild(iframe);\n    if (config.videoElement.parentNode !== null) {\n        config.videoElement.parentNode.appendChild(iframe);\n    } else {\n        var t = setInterval(function(){\n            if (config.videoElement.parentNode !== null) {\n                config.videoElement.parentNode.appendChild(iframe);\n                clearInterval(t);\n            }\n        },1000);\n    }\n\n    return pframe_client(iframe,config,onReady);\n}\n","import Debug from 'debug';\nimport uuidv4 from 'uuid/v4';\n\nimport MqttTopicHandlers from './MqttTopicHandlers';\nimport MqttConduitCollection from './MqttConduitCollection';\nimport MqttTransport from './MqttTransport';\nimport _player from './player';\n\nconst DEBUG_PREFIX = 'clsp:iov';\n\n/**\n * Internet of Video client. This module uses the MediaSource API to\n * deliver video content streamed through MQTT from distributed sources.\n */\n\nexport default class IOV {\n  static compatibilityCheck () {\n    // For the MAC\n    var NoMediaSourceAlert = false;\n\n    window.MediaSource = window.MediaSource || window.WebKitMediaSource;\n\n    if (!window.MediaSource){\n      if (NoMediaSourceAlert === false) {\n        alert(\"Media Source Extensions not supported in your browser\"+\n           \": Claris Live Streaming will not work!\");\n      }\n\n      NoMediaSourceAlert = true;\n    }\n  }\n\n  constructor (config) {\n    this.id = uuidv4();\n    this.debug = Debug(`${DEBUG_PREFIX}:${this.id}:main`);\n\n    this.config = {\n      // web socket address defaults to the address of the server that loaded this page.\n      wsbroker: config.address,\n      // default port number\n      wsport: config.port,\n      // default clientId\n      clientId: this.id,\n      // to be overriden by user.\n      appStart: config.appStart,\n      useSSL: config.useSSL || false,\n      videoElement: config.videoElement\n    };\n\n    // handle inbound messages from MQTT, including video\n    // and distributes them to players.\n    this.mqttTopicHandlers = new MqttTopicHandlers(this.id, this);\n    this.mqttConduitCollection = new MqttConduitCollection(this.id);\n    this.transport = new MqttTransport(this.id, this);\n\n    this.events = {\n      connection_lost : function(responseObject) {\n        //TODO close all players and display an error message\n        console.log(\"MQTT connection lost\");\n        console.log(responseObject);\n      },\n\n      on_message: this.mqttTopicHandlers.msghandler,\n\n      // generic exception handler\n      exception: function(text,e) {\n        console.log(text);\n        if (typeof e !== 'undefined') {\n          console.log(e.stack);\n        }\n      }\n    };\n  }\n\n  initialize () {\n    IOV.compatibilityCheck();\n\n    // route inbound data from a frame running mqtt to the appropriate player\n    window.addEventListener('message', (event) => {\n      this.debug('message received', event.data)\n\n      var clientId = event.data.clientId;\n\n      if (!this.mqttConduitCollection.exists(clientId)) {\n        return;\n      }\n\n      var conduit = this.mqttConduitCollection.getById(clientId);\n      var eventType = event.data.event;\n\n      switch (eventType) {\n        case 'data':\n          conduit.inboundHandler(event.data);\n          break;\n        case 'ready':\n          conduit.onReady();\n          break;\n        case 'fail':\n          console.error('network error', event.reason);\n          break;\n        default:\n          console.log(\"No match for event = \" + eventType);\n      }\n    });\n  }\n\n  player () {\n    return _player(this);\n  }\n\n  // query remote server and get a list of all stream names\n  getAvailableStreams (callback) {\n    this.transport.transaction('iov/video/list', callback, {});\n  }\n}\n","import Debug from 'debug';\n\nconst DEBUG_PREFIX = 'clsp:iov';\n\nexport default class MqttConduitCollection {\n  constructor (id) {\n    this.id = id;\n    this.debug = Debug(`${DEBUG_PREFIX}:${this.id}:MqttConduitCollection`);\n\n    this.debug('constructing...');\n\n    this._conduits = {};\n  }\n\n  set (id, conduit) {\n    this.debug('setting...', id, conduit);\n\n    this._conduits[id] = conduit;\n\n    return conduit;\n  }\n\n  addFromIov (transport, iov) {\n    this.debug('adding from iov...', iov);\n\n    return this.set(iov.config.clientId, mqttConduit(iov.config, () => {\n      this.debug('onReady...', iov.config.clientId);\n\n      iov.config.appStart(iov);\n\n      // the mse service will stop streaming to us if we don't send\n      // a message to iov/stats within 1 minute.\n      iov._statsTimer = setInterval(() => {\n        iov.statsMsg.inkbps = (iov.statsMsg.byteCount * 8) / 30000.0;\n        iov.statsMsg.byteCount = 0;\n\n        transport.publish('iov/stats', iov.statsMsg);\n\n        this.debug('iov status', iov.statsMsg);\n      }, 5000);\n    }));\n  }\n\n  getById (id) {\n    this.debug('getting...', id);\n\n    return this._conduits[id];\n  }\n\n  exists (id) {\n    this.debug('exists?', id);\n\n    return this._conduits.hasOwnProperty(id);\n  }\n}\n","import Debug from 'debug';\n\nconst DEBUG_PREFIX = 'clsp:iov';\n\n/**\n * route inbound messages/data to player's event handlers.\n */\nexport default class MqttTopicHandlers {\n  constructor (id, iov) {\n    this.id = id;\n    this.debug = Debug(`${DEBUG_PREFIX}:${this.id}:MqttTopicHandlers`);\n\n    this.debug('constructing...');\n\n    this.iov = iov;\n    this._handlers = {};\n  }\n\n  get (topic) {\n    this.debug('getting...', topic);\n\n    return this._handlers[topic];\n  }\n\n  register (topic, callback) {\n    this.debug('register...', topic);\n\n    this._handlers[topic] = (...args) => {\n      this.debug('executing handler...', topic);\n\n      callback(...args);\n    };\n  }\n\n  unregister (topic) {\n    this.debug('unregistering...', topic);\n\n    if (this.exists(topic)) {\n      delete this._handlers[topic];\n    }\n  }\n\n  exists (topic) {\n    this.debug('exists?', topic);\n\n    return this._handlers.hasOwnProperty(topic);\n  }\n\n  // central entry point for all MQTT inbound traffic.\n  msghandler (message) {\n    this.debug('msghandler...', message);\n\n    var topic = message.destinationName;\n\n    if (!this.exists(topic)) {\n      debug(`No handler for ${topic} - message dropped`, message);\n\n      return;\n    }\n\n    try {\n      this.get(topic)(message);\n    } catch (e) {\n      this.iov.events.exception(`${topic} handler exception`, e);\n    }\n  }\n}\n","import Debug from 'debug';\n\nconst DEBUG_PREFIX = 'clsp:iov';\n\nexport default class MqttTransport {\n  constructor (id, iov) {\n    this.id = id;\n    this.debug = Debug(`${DEBUG_PREFIX}:${this.id}:MqttConduitCollection`);\n\n    this.debug('constructing...');\n\n    // setup stats\n    iov.statsMsg = {\n      byteCount: 0,\n      inkbps: 0,\n      host: document.location.host,\n      clientId: iov.config.clientId\n    };\n\n    this.clientId = iov.config.clientId;\n    this.iov = iov;\n\n    console.log('looking for useSSL', iov);\n    this.conduit = iov.mqttConduitCollection.addFromIov(this, iov);\n  }\n\n  // create a temporary resp_topic to receive a query response\n  // upon response remove the temporary topic. Assume both request\n  // and response are json formateed text.\n  transaction (topic, callback, data) {\n    this.debug('transaction...');\n\n    this.conduit.transaction(topic, (event) => {\n      this.debug('transaction callback...', event);\n      if (callback) {\n        callback(event);\n      }\n    }, data);\n  }\n\n  subscribe (topic, callback) {\n    this.debug('subscribe...');\n\n    this.conduit.subscribe(topic, (event) => {\n      this.debug('subscribe callback...', event);\n      if (callback) {\n        callback(event);\n      }\n    });\n  }\n\n  unsubscribe (topic, callback) {\n    this.debug('unsubscribe...');\n\n    this.conduit.unsubscribe(topic, (event) => {\n      this.debug('unsubscribe callback...', event);\n      if (callback) {\n        callback(event);\n      }\n    });\n  }\n\n  publish (topic, data, callback) {\n    this.debug('publish...');\n\n    this.conduit.publish(topic, data, (event) => {\n      this.debug('publish callback...', event);\n      if (callback) {\n        callback(event);\n      }\n    });\n  }\n}\n","import Debug from 'debug';\n\nconst DEBUG_PREFIX = 'clsp:iov';\nconst debug = Debug(`${DEBUG_PREFIX}:player`);\n\n/**\n * Responsible for receiving stream input and routing it to the media source\n * buffer for rendering on the video tag. There is some 'light' reworking of\n * the binary data that is required.\n *\n * var player = iov.player();\n * player.play( video_element_id, stream_name );\n*/\nexport default function (iov) {\n    var self = {};\n \n    /*\n    Used for determining the size of the internal buffer hidden from the MSE\n    api by recording the size and time of each chunk of video upon buffer append\n    and recording the time when the updateend event is called.\n\n     */\n\n    self.LogSourceBuffer = false;\n    self.LogSourceBufferTopic = null;\n    self.state = \"idle\";\n    self.seqnum = 1;\n    self.seqnumProcessed = 1; // last sequence number processed\n    self.MAX_SEQ_PROC = 2;\n    self.dropCounter = 0;\n\n    self.moovBox = null;\n    self.moofBox = null;\n    // -1 is forever\n    self.retry_count = 3;\n    self.source_buffer_ready = false;\n\n\n    self._fault = function(err) {\n        _ThePlayer.errors.extend({\n            PLAYER_ERR_IOV: {\n                headline: 'Error Playing Stream',\n                message: err\n            }\n        });\n        _ThePlayer.error({code: 'PLAYER_ERR_IOV'});\n        self.state = \"fault\";\n    }\n\n    self.reinitializeMse = function() {\n        // reset counters, flags\n        self.seqnum = 1;\n        self.seqnumProcessed = 1; // last sequence number processed\n        self.source_buffer_ready = false;\n        self.dropCounter = 0;\n         \n        // free resource\n        URL.revokeObjectURL(self.mediaSource);\n\n        // reallocate, this will call media source open which will\n        // append the MOOV atom.\n        self.video.src = URL.createObjectURL(self.mediaSource);\n    };\n\n    self.restart = function() {\n        self.stop();\n        self.play(self.eid, self.streamName, self.onFirstChunk, self.onVideoRecv);\n    };\n\n    self.play = function(eid, streamName, onFirstChunk, onVideoRecv) {\n        self.eid = eid;\n        self.streamName = streamName;\n        self.onFirstChunk = onFirstChunk;\n        self.video = document.getElementById( eid );\n        self.onVideoRecv = onVideoRecv;\n\n        if (typeof self.video === 'undefined') {\n            self._fault(\"Unable to match id '\"+eid+\"'\");\n            return;\n        }\n        var request = { clientId: iov.config.clientId };\n        var topic = \"iov/video/\"+window.btoa(self.streamName)+\"/request\";\n        iov.transport.transaction(topic,self._start_play,request);\n    };\n\n    self.resume = function(onFirstChunk, onVideoRecv) {\n        self.onFirstChunk = onFirstChunk;\n        self.onVideoRecv = onVideoRecv;\n\n        var request = { clientId: iov.config.clientId };\n        var topic = \"iov/video/\"+window.btoa(self.streamName)+\"/request\";\n        iov.transport.transaction(topic,self._start_play,request);\n    };\n\n    self._appendBuffer_event = function(bytearray) {\n        if ((self.LogSourceBuffer === true) &&\n            (self.LogSourceBufferTopic !== null))\n        {\n            //console.log(\"recording \"+parseInt(bytearray.length)+\" bytes of data\");\n            var mqtt_msg = new Paho.MQTT.Message(bytearray);\n            mqtt_msg.destinationName = self.LogSourceBufferTopic;\n            MQTTClient.send(mqtt_msg);\n        }\n        // increment bytecount stats\n        iov.statsMsg.byteCount += bytearray.length;\n    };\n\n\n    self.stop = function() {\n        // stop streaming live video\n        if (typeof self.guid !== 'undefined') {\n            iov.transport.unsubscribe(\"iov/video/\"+self.guid+\"/live\");\n        }\n\n        self.state = \"idle\";\n\n        // free resources associated with player\n        self.seqnum = 1;\n        self.moovBox = null;\n        self.moofBox = null;\n\n        var request = { clientId: iov.config.clientId };\n        iov.transport.publish(\"iov/video/\"+self.guid+\"/stop\",request);\n    };\n\n    self._start_play = function(resp) {\n        self.mimeCodec = resp.mimeCodec;\n        self.guid = resp.guid; // stream guid\n\n        if ('MediaSource' in window && MediaSource.isTypeSupported(self.mimeCodec)) {\n            var initseg_topic = iov.config.clientId + \"/init-segment/\" +\n                parseInt(Math.random()*1000000);\n\n            self._async_play_loop(resp, initseg_topic);\n            var play_request_topic = \"iov/video/\"+self.guid+\"/play\";\n            iov.transport.publish(play_request_topic,{\n                initSegmentTopic: initseg_topic,\n                clientId: iov.config.clientId\n            });\n        } else {\n            // the browser does not support this video format\n            self._fault(\"Unsupported mime codec \" + self.mimeCodec);\n        }\n    };\n\n\n    self._async_play_loop = function(resp, initSegmentTopic) {\n        // setup handlers for video\n        self.vqueue = []; // used if the media source buffer is busy\n\n        self.state = \"waiting-for-moov\";\n\n        iov.transport.subscribe(initSegmentTopic, function(mqtt_msg) {\n\n            // capture the initial segment\n            self.moovBox = mqtt_msg.payloadBytes;\n            //console.log(typeof mqtt_msg.payloadBytes);\n            //console.log(\"received moov from server\");\n\n\n            self.state = \"waiting-for-moof\";\n            // unsubscribe to this group\n            iov.transport.unsubscribe(initSegmentTopic);\n\n            // subscribe to the live video topic.\n            self.state = \"playing\";\n            iov.transport.subscribe(\"iov/video/\"+self.guid+\"/live\", self._on_moof);\n            // create media source buffer and start routing video traffic.\n\n\n            self.onFirstChunk(); // first chunk of video received.\n\n            self.mediaSource = new MediaSource();\n\n\n            var clone = self.video.cloneNode();\n            var parent = self.video.parentNode;\n            if (parent !== null) {\n                parent.replaceChild(clone,self.video);\n                self.video = clone;\n            }\n\n\n            self.mediaSource.addEventListener('sourceopen' ,self._on_sourceopen);\n            self.mediaSource.addEventListener('sourceended',self._on_sourceended);\n            self.mediaSource.addEventListener('error',function(e) {\n                console.log(\"MSE error\");\n                console.log(e);\n            });\n\n            // now assign media source extensions\n            //console.log(\"Disregard: The play() request was interrupted ... its not an error!\");\n            self.video.src = URL.createObjectURL(self.mediaSource);\n\n            // subscribe to a sync topic that will be called if the stream that is feeding\n            // the mse service dies and has to be restarted that this player should restart the stream\n            var resync_topic = \"iov/video/\"+self.guid+\"/resync\";\n            console.log(\"Call \" + resync_topic + \" to resync stream\");\n            iov.transport.subscribe(resync_topic, \n                function(mqtt_msg) {\n                    console.log(\"sync received re-initialize media source buffer\");\n                    self.reinitializeMse();\n                }\n            );  \n\n        });\n\n\n    };\n\n    self._on_moof = function(mqtt_msg) {\n\n\n        if (self.source_buffer_ready == false) {\n            //console.log(\"media source not yet open dropping frame\");\n            return;\n        }\n\n        /**\n            Enqueues or sends to the media source buffer an MP4 moof atom. This contains a\n            chunk of video/audio tracks.\n         */\n        // pace control. Allow a maximum of MAX_SEQ_PROC MOOF boxes to be held within\n        // the source buffer.\n        if ((self.seqnum - self.seqnumProcessed) > self.MAX_SEQ_PROC) {\n            //console.log(\"DROPPING FRAME DRIFT TOO HIGH, dropCounter = \" + parseInt(self.dropCounter));\n            return; // DROP this frame since the borwser is falling\n        }\n\n\n\n        var moofBox = mqtt_msg.payloadBytes;\n        moofBox[20] = (self.seqnum & 0xFF000000) >> 24;\n        moofBox[21] = (self.seqnum & 0x00FF0000) >> 16;\n        moofBox[22] = (self.seqnum & 0x0000FF00) >> 8;\n        moofBox[23] = self.seqnum & 0xFF;\n\n        //console.log(\"moof handler: data seqnum chunk \");\n        //console.log(self.seqnum);\n\n        if ( self.sourceBuffer.updating === false ) {\n            try {\n                //console.log(typeof moofBox);\n                //console.log(\"calling append buffer\");\n                self._appendBuffer_event(moofBox);\n                self.sourceBuffer.appendBuffer( moofBox );\n                self.seqnum += 1; // increment sequence number for next chunk\n            } catch(e) {\n                _ThePlayer.error({code: 3});\n                self.stop();\n            }\n        } else {\n            self.vqueue.push( moofBox.slice(0) );\n        }\n\n    };\n\n    // found when stress testing many videos, it is possible for the\n    // media source ready state not to be open even though\n    // source open callback is being called.\n    self._on_sourceopen = function() {\n        if (self.mediaSource.readyState === \"open\") {\n            self._do_on_sourceopen();\n            return;\n        }\n\n        var t = setInterval(function(){\n            if (self.mediaSource.readyState === \"open\") {\n                self._do_on_sourceopen();\n                clearInterval(t);\n            }\n        },  1000);\n    };\n\n    self._do_on_sourceopen = function() {\n        /** New media source opened. Add a buffer and append the moov MP4 video data.\n        */\n\n        // add buffer\n        self.sourceBuffer = self.mediaSource.addSourceBuffer(self.mimeCodec);\n        self.sourceBuffer.mode = \"sequence\";\n        self.sourceBuffer.addEventListener('updateend', self._on_updateend);\n        self.sourceBuffer.addEventListener('update', function() {\n            if ( (self.sourceBuffer.updating === false) && (self.vqueue.length > 0) ) {\n                self._appendBuffer_event(self.vqueue[0]);\n                self.sourceBuffer.appendBuffer( self.vqueue[0] );\n                self.vqueue = self.vqueue.slice(1);\n            }\n        });\n\n        self.sourceBuffer.addEventListener('updatestart',function(){\n            //console.log(\"On update start\");\n        });\n\n        self.sourceBuffer.addEventListener('error',function(e){\n            console.log(\"MSE sourceBffer error\");\n            console.log(e);\n        });\n\n        // send ftype+moov segments of video\n        //console.log(\"sending moov atom \");\n\n        // we are now able to process video\n        self.source_buffer_ready = true;\n\n        self._appendBuffer_event(self.moovBox);\n        self.sourceBuffer.appendBuffer( self.moovBox );\n    };\n\n    self._on_sourceended = function() {\n        //console.log(\"sourceended\");\n        self.stop();\n        self.source_buffer_ready = false;\n    };\n\n    self._on_updateend = function() {\n\n        // identify what seqnum of the MOOF message has actually been processed.\n        self.seqnumProcessed += 1;\n\n\n        /*\n        var logmsg =\n           \"_on_updateend: \" +\n           ((self.video.paused) ? \" video is paused,\": \"video is playing,\")   +\n           \" ready state = '\" + self.mediaSource.readyState + \"', \" +\n           \" video queue size = \" + parseInt(self.vqueue.length)\n        ;\n        console.log(logmsg);\n        */\n        if (self.mediaSource.readyState === \"open\") {\n\n            if (self.sourceBuffer.buffered.length > 0 ) {\n                var start = self.sourceBuffer.buffered.start(0);\n                var end = self.sourceBuffer.buffered.end(0); \n                var time_buffered =  end - start;\n                var limit = 15.0;\n                if (time_buffered > 30.0) {\n                    try {\n                        // observed this fail during a memry snapshot in chrome\n                        // otherwise no observed failure, so ignore exception.   \n                        self.sourceBuffer.remove(start, start+limit);\n                    } catch(e) {\n                        console.log(e);\n                    } \n                 }\n            }\n\n\n            if (self.vqueue.length > 0){\n                self._appendBuffer_event(self.vqueue[0]);\n                setTimeout(function() {\n                    // deqeue next prepared moof atom\n                    if (self.sourceBuffer.updating === false) {\n                        try {\n                            self.sourceBuffer.appendBuffer(self.vqueue[0]);\n                        } catch( ex ) {\n                            // internal error, this has been observed to happen the tab\n                            // in the browser where this video player lives is hidden\n                            // then reselected. 'ex' is undefined the error is bug\n                            // within the MSE C++ implementation in the browser.\n                        }\n                    }\n                    // regardless we must proceed to the frame.\n                    self.vqueue = self.vqueue.slice(1);\n                },0);\n            }\n\n\n            if (self.video.paused === true) {\n                try {\n                    var promise = self.video.play();\n                    if (typeof promise !== 'undefined') {\n                        promise.then(function(_){}).catch(function(e){});\n                    }\n                } catch( ex ) {\n                    console.log(\"Exception while trying to play:\" + ex.message );\n                }\n                //console.log(\"setting video player from paused to play\");\n            }\n\n        }\n    };\n\n    return self;\n};\n","import videojs from 'video.js';\n\nimport utils from './utils';\n\nexport default function (defaults, SrcsLookupTable, onPlayerReady) {\n  /**\n   * A video.js plugin.\n   *\n   * In the plugin function, the value of `this` is a video.js `Player`\n   * instance. You cannot rely on the player being in a \"ready\" state here,\n   * depending on how the plugin is invoked. This may or may not be important\n   * to you; if not, remove the wait for \"ready\"!\n   *\n   * @function mseOverMqtt\n   * @param    {Object} [options={}]\n   *           An object of options left to the plugin author to define.\n   */\n  const mseOverMqtt = function (options) {\n    this.errors({\n      errors: {\n        PLAYER_ERR_NOT_COMPAT: {\n          headline: 'This browser is unsupported.',\n          message: 'Chrome 52+ is required.'\n        }\n      },\n      timeout: 120 * 1000\n    });\n\n    if (utils.supported() === false) {\n      this.error({code: 'PLAYER_ERR_NOT_COMPAT', dismiss: false});\n      return;\n    }\n\n    this.on('firstplay', function (e) {\n      var spinner = this.player_.loadingSpinner;\n      var videojs_player = this.player_;\n\n      //TODO: This seems to screw up the video js error function.  Is this necessary?\n      // work around bogus error code. \n      /*var old_error = Object.assign({}, videojs_player.error());\n      videojs_player.error = function (evt) {\n        if (typeof evt === 'undefined') {\n          return old_error;\n        }\n\n        if (evt === null) {\n          return;\n        }\n\n        if (evt.code !== -2) {\n          videojs_player.old_error(evt);\n        }\n      };*/\n\n      var source_tag = this.currentSource();\n      if (!(source_tag.src in SrcsLookupTable)) {\n        console.error('src not in lookup table');\n        return;\n      }\n\n      var h = SrcsLookupTable[source_tag.src];\n      // setup mqtt connection, callback called when connection\n      // made and a new iov_player created.\n      h.launchIovPlayer(function (iov_player) {\n        if (iov_player === null || iov_player.playing === true) {\n          return;\n        }\n\n        iov_player.playing = true;\n\n        // dynamically alter the control bar below the video tag.\n        function setupControlBar () {\n          videojs_player.controlBar.addClass('vjs-live');\n          window._ThePlayer = videojs_player;\n\n          var playToggle = videojs_player.controlBar.children_[0].el_;\n          playToggle.addEventListener('click', function () {\n            // @todo - is this setTimeout necessary?\n            setTimeout(function () {\n              if (iov_player.playing === true) {\n                iov_player.stop();\n                iov_player.playing = false;\n                videojs_player.controlBar.playToggle.handlePause();\n                return;\n              }\n\n              spinner.show();\n\n              iov_player.resume(function () {\n                // @todo - is this setTimeout necessary?\n                setTimeout(function () {\n                  spinner.hide();\n                }, 0);\n              }, function () {\n                // reset the timeout monitor\n                videojs_player.trigger('timeupdate');\n              });\n\n              iov_player.playing = true;\n              videojs_player.controlBar.playToggle.handlePlay();\n            }, 0);\n          });\n        }\n\n        // start playing video\n        iov_player.play(\n          e.target.firstChild.id,\n          h.streamName,\n          function () {\n            // @todo - is this setTimeout necessary?\n            // dispose of spinner after page refresh.\n            setTimeout(function () {\n              // spinner.dispose();\n              spinner.hide();\n              // toggle play button\n              videojs_player.controlBar.playToggle.handlePlay();\n              // alter the control bar\n              setupControlBar();\n            }, 0);\n          },\n          function () {\n            // reset the timeout monitor\n            videojs_player.trigger('timeupdate');\n          }\n        );\n      });\n    });\n\n    this.ready(() => {\n      const videoTag = this.children()[0];\n      // var playButton = this.bigPlayButton;\n\n      videoTag.addEventListener('mqttReady', (event) => {\n        if (videoTag.getAttribute('autoplay') !== null) {\n          // playButton.trigger('click');\n          this.trigger('play', videoTag);\n        }\n      });\n\n      onPlayerReady(this, videojs.mergeOptions(defaults, options));\n    });\n  };\n\n  return mseOverMqtt;\n}\n","const MINIMUM_CHROME_VERSION = 52;\n\nfunction browserIsCompatable () {\n  // Chrome 1+\n  const isChrome = (Boolean(window.chrome) && Boolean(window.chrome.webstore));\n\n  if (!isChrome) {\n    return false;\n  }\n\n  try {\n    return (parseInt(navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./)[2], 10) >= MINIMUM_CHROME_VERSION);\n  }\n  catch (error) {\n    return false;\n  }\n}\n\nexport default {\n  supported: browserIsCompatable,\n};\n","import videojs from 'video.js';\nimport 'videojs-errors';\n\nimport 'srcdoc-polyfill';\nimport './conduit/clspConduit.generated.js';\n// import './conduit/clspConduit.generated.min.js';\n\nimport {version as VERSION} from '../../package.json';\nimport MqttHandler from './MqttHandler';\nimport MqttSourceHandler from './MqttSourceHandler';\nimport mseOverMqtt from './mseOverMqtt';\nimport utils from './utils';\n\nimport '../styles/videojs-mse-over-clsp.scss';\n\n/**\n * Function to invoke when the player is ready.\n *\n * This is a great place for your plugin to initialize itself. When this\n * function is called, the player will have its DOM and child components\n * in place.\n *\n * @function onPlayerReady\n * @param    {Player} player\n *           A Video.js player object.\n *\n * @param    {Object} [options={}]\n *           A plain object containing options for the plugin.\n */\nconst onPlayerReady = (player, options) => {\n  player.addClass('vjs-mse-over-mqtt');\n};\n\nfunction initialize () {\n  const SrcsLookupTable = {};\n\n  const mqttHandler = MqttHandler(SrcsLookupTable);\n  const mqttSourceHandler = MqttSourceHandler(mqttHandler);\n\n  videojs.mqttSupported = true;\n  videojs.mqttHandler = mqttHandler;\n  videojs.mqttSourceHandler = mqttSourceHandler;\n  videojs.getTech('Html5').registerSourceHandler(mqttSourceHandler('html5'), 0);\n\n  // Default options for the plugin.\n  const defaults = {};\n\n  const clspPlugin = mseOverMqtt(defaults, SrcsLookupTable, onPlayerReady);\n\n  // Cross-compatibility for Video.js 5 and 6.\n  const registerPlugin = videojs.registerPlugin || videojs.plugin;\n\n  // Register the plugin with video.js.\n  // @todo - this is a side effect of\n  registerPlugin('clsp', clspPlugin);\n\n  return clspPlugin;\n}\n\n// @todo - do not initialize the plugin by default, since that is a side\n// effect.  make the caller call the initialize function.  also, is it\n// possible to unregister the plugin?\nconst clspPlugin = initialize();\n\n// clspPlugin.initialize = initialize;\nclspPlugin.version = VERSION;\nclspPlugin.utils = utils;\n\nexport default clspPlugin;\n","// removed by extract-text-webpack-plugin","module.exports = videojs;"],"sourceRoot":""}