{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/debug/src/browser.js","webpack:///./node_modules/debug/src/debug.js","webpack:///./node_modules/lodash/_Symbol.js","webpack:///./node_modules/lodash/_baseGetTag.js","webpack:///./node_modules/lodash/_freeGlobal.js","webpack:///./node_modules/lodash/_getRawTag.js","webpack:///./node_modules/lodash/_objectToString.js","webpack:///./node_modules/lodash/_root.js","webpack:///./node_modules/lodash/debounce.js","webpack:///./node_modules/lodash/isObject.js","webpack:///./node_modules/lodash/isObjectLike.js","webpack:///./node_modules/lodash/isSymbol.js","webpack:///./node_modules/lodash/now.js","webpack:///./node_modules/lodash/toNumber.js","webpack:///./node_modules/ms/index.js","webpack:///./node_modules/node-libs-browser/node_modules/process/browser.js","webpack:///./node_modules/srcdoc-polyfill/srcdoc-polyfill.js","webpack:///./node_modules/uuid/lib/bytesToUuid.js","webpack:///./node_modules/uuid/lib/rng-browser.js","webpack:///./node_modules/uuid/v4.js","webpack:///./node_modules/videojs-errors/dist/videojs-errors.es.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/js/MqttConduitCollection.js","webpack:///./src/js/MqttHandler.js","webpack:///./src/js/MqttSourceHandler.js","webpack:///./src/js/MseOverMqttPlugin.js","webpack:///./src/js/conduit/clspConduit.generated.js","webpack:///./src/js/iov/IOV.js","webpack:///./src/js/iov/MqttTopicHandlers.js","webpack:///./src/js/iov/player.js","webpack:///./src/js/utils.js","webpack:///./src/js/videojs-mse-over-clsp.js","webpack:///./src/styles/videojs-mse-over-clsp.scss","webpack:///external \"videojs\""],"names":["exports","module","require","log","formatArgs","save","load","useColors","storage","chrome","local","localstorage","colors","window","process","type","navigator","userAgent","toLowerCase","match","document","documentElement","style","WebkitAppearance","console","firebug","exception","table","parseInt","RegExp","$1","formatters","j","v","JSON","stringify","err","message","args","namespace","humanize","diff","c","color","splice","index","lastC","replace","Function","prototype","apply","call","arguments","namespaces","removeItem","debug","e","r","env","DEBUG","enable","localStorage","createDebug","coerce","disable","enabled","instances","names","skips","selectColor","hash","i","charCodeAt","Math","abs","length","prevTime","self","curr","Date","ms","prev","Array","unshift","format","formatter","val","logFn","bind","destroy","init","push","indexOf","split","len","substr","instance","name","test","Error","stack","root","Symbol","getRawTag","objectToString","nullTag","undefinedTag","symToStringTag","toStringTag","undefined","baseGetTag","value","Object","freeGlobal","global","objectProto","hasOwnProperty","nativeObjectToString","toString","isOwn","tag","unmasked","result","freeSelf","isObject","now","toNumber","FUNC_ERROR_TEXT","nativeMax","max","nativeMin","min","debounce","func","wait","options","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","thisArg","leadingEdge","setTimeout","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","clearTimeout","flush","debounced","isInvoking","isObjectLike","symbolTag","isSymbol","NAN","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","other","valueOf","isBinary","slice","s","m","h","d","y","parse","isNaN","long","fmtLong","fmtShort","str","String","exec","n","parseFloat","round","plural","floor","ceil","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","run","nextTick","Item","array","title","browser","argv","version","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","factory","_srcDoc","srcDoc","define","idx","iframes","isCompliant","createElement","sandboxMsg","sandboxAllow","validate","iframe","sandbox","getAttribute","force","removeAttribute","logError","setAttribute","implementations","compliant","content","legacy","jsUrl","contentWindow","location","error","msg","set","noConflict","getElementsByTagName","byteToHex","bytesToUuid","buf","offset","bth","join","getRandomValues","crypto","msCrypto","rnds8","Uint8Array","whatwgRNG","rnds","mathRNG","random","rng","v4","ii","commonjsGlobal","empty","empty$1","freeze","default","minDoc","topLevel","doccy","document_1","FlashObj","videojs","getComponent","defaultDismiss","IS_IPHONE","registerPlugin","plugin","defaults","header","code","dismiss","progressDisabled","errors","headline","initPlugin","player","monitor","waiting","isStalling","updateErrors","updates","mergeOptions","keys","forEach","k","resetMonitor","removeClass","paused","ended","addClass","cleanup","listener","shift","healthcheck","fn","check","tech","$","vjs_getProperty","onPlayStartMonitor","lastTime","currentTime","onPlayNoSource","currentSrc","onErrorHandler","details","dialogContent","localize","isSupported","flashMessage","display","getChild","className","id","closeable","innerHTML","fillWith","contentEl","firstChild","appendChild","el","okButton","querySelector","close","currentWidth","currentHeight","one","onDisposeHandler","reInitPlugin","newOptions","extend","getAll","disableProgress","disabled","ready","VERSION","warn","g","eval","DEBUG_PREFIX","singleton","MqttConduitCollection","Debug","_conduits","addEventListener","event","clientId","data","exists","conduit","getById","iov","onMessage","config","mqttConduit","Component","MqttHandler","source","mqttConduitCollection","mqtt","tech_","source_","updateIOV","IOV","fromUrl","src","mode","obj","canHandleSource","srcObj","startsWith","utils","supported","canPlayType","handleSource","localOptions","Plugin","getPlugin","registered","MseOverMqttPlugin","getTech","registerSourceHandler","MqttSourceHandler","pluginName","customClass","PLAYER_ERR_NOT_COMPAT","_currentTime","mqttHandler","createIOV","iframe_code","pframe_client","dispatch","command","postMessage","t","setInterval","clearInterval","inboundHandler","handler","destinationName","subscribe","topic","callback","method","unsubscribe","publish","transaction","resp_topic","mqtt_resp","resp","payloadString","client","MqttUseSSL","useSSL","markup","wsbroker","wsport","origin","srcdoc","width","height","videoElementParent","videoElement","parentNode","NoMediaSourceAlert","MediaSource","WebKitMediaSource","alert","url","parser","default_port","substring","href","paths","pathname","streamName","hostname","port","generateConfigFromUrl","compatibilityCheck","uuidv4","destroyed","onReadyAlreadyCalled","playerInstance","appStart","statsMsg","byteCount","inkbps","host","mqttTopicHandlers","addFromIov","events","connection_lost","responseObject","on_message","msghandler","text","IOVPlayer","cloneConfig","clone","cloneFromUrl","parentNodeId","iframe_elm","getElementById","parent","removeChild","videoElementParentId","videoTag","children","trigger","loadingSpinner","hide","playerInstanceEventListeners","changesrc","onChangeSource","play","restart","_statsTimer","reason","eventType","onReady","onFail","onData","guid","MqttTopicHandlers","_handlers","get","silly","state","MAX_SEQ_PROC","BUFFER_LIMIT","EVENT_NAMES","eid","mediaSourceEventListeners","sourceopen","mediaSource","readyState","initializeSourceBuffer","intervalToRetry","sourceended","stop","source_buffer_ready","sourceBufferEventListeners","updateend","onUpdateEnd","documentEventListeners","visibilitychange","reinitializeMse","vqueue","LogSourceBuffer","LogSourceBufferTopic","moovBox","mimeCodec","resetPlayState","action","includes","isTypeSupported","PLAYER_ERR_IOV","URL","revokeObjectURL","createObjectURL","btoa","onIovPlayTransaction","bytearray","mqtt_msg","Paho","MQTT","Message","MQTTClient","send","sourceBuffer","buffered","start","end","timeBuffered","updating","abort","remove","moofBox","onBeforeAppendBuffer","appendBuffer","assertMimeCodecSupported","initSegmentTopic","payloadBytes","moov","newTopic","onMoof","cloneNode","replaceChild","initializeMediaSource","resyncStream","appendVideo","addSourceBuffer","destroyMediaSource","removeEventListener","sourceBuffers","SourceBuffers","removeSourceBuffer","destroySourceBuffer","MINIMUM_CHROME_VERSION","browserIsCompatable","isChrome","Boolean","webstore","clspPlugin","register"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;AClFA;;;;;;AAMAA,UAAUC,OAAOD,OAAP,GAAiB,mBAAAE,CAAQ,kDAAR,CAA3B;AACAF,QAAQG,GAAR,GAAcA,GAAd;AACAH,QAAQI,UAAR,GAAqBA,UAArB;AACAJ,QAAQK,IAAR,GAAeA,IAAf;AACAL,QAAQM,IAAR,GAAeA,IAAf;AACAN,QAAQO,SAAR,GAAoBA,SAApB;AACAP,QAAQQ,OAAR,GAAkB,eAAe,OAAOC,MAAtB,IACA,eAAe,OAAOA,OAAOD,OAD7B,GAEEC,OAAOD,OAAP,CAAeE,KAFjB,GAGEC,cAHpB;;AAKA;;;;AAIAX,QAAQY,MAAR,GAAiB,CACf,SADe,EACJ,SADI,EACO,SADP,EACkB,SADlB,EAC6B,SAD7B,EACwC,SADxC,EACmD,SADnD,EAEf,SAFe,EAEJ,SAFI,EAEO,SAFP,EAEkB,SAFlB,EAE6B,SAF7B,EAEwC,SAFxC,EAEmD,SAFnD,EAGf,SAHe,EAGJ,SAHI,EAGO,SAHP,EAGkB,SAHlB,EAG6B,SAH7B,EAGwC,SAHxC,EAGmD,SAHnD,EAIf,SAJe,EAIJ,SAJI,EAIO,SAJP,EAIkB,SAJlB,EAI6B,SAJ7B,EAIwC,SAJxC,EAImD,SAJnD,EAKf,SALe,EAKJ,SALI,EAKO,SALP,EAKkB,SALlB,EAK6B,SAL7B,EAKwC,SALxC,EAKmD,SALnD,EAMf,SANe,EAMJ,SANI,EAMO,SANP,EAMkB,SANlB,EAM6B,SAN7B,EAMwC,SANxC,EAMmD,SANnD,EAOf,SAPe,EAOJ,SAPI,EAOO,SAPP,EAOkB,SAPlB,EAO6B,SAP7B,EAOwC,SAPxC,EAOmD,SAPnD,EAQf,SARe,EAQJ,SARI,EAQO,SARP,EAQkB,SARlB,EAQ6B,SAR7B,EAQwC,SARxC,EAQmD,SARnD,EASf,SATe,EASJ,SATI,EASO,SATP,EASkB,SATlB,EAS6B,SAT7B,EASwC,SATxC,EASmD,SATnD,EAUf,SAVe,EAUJ,SAVI,EAUO,SAVP,EAUkB,SAVlB,EAU6B,SAV7B,EAUwC,SAVxC,EAUmD,SAVnD,EAWf,SAXe,EAWJ,SAXI,EAWO,SAXP,EAWkB,SAXlB,EAW6B,SAX7B,EAWwC,SAXxC,CAAjB;;AAcA;;;;;;;;AAQA,SAASL,SAAT,GAAqB;AACnB;AACA;AACA;AACA,MAAI,OAAOM,MAAP,KAAkB,WAAlB,IAAiCA,OAAOC,OAAxC,IAAmDD,OAAOC,OAAP,CAAeC,IAAf,KAAwB,UAA/E,EAA2F;AACzF,WAAO,IAAP;AACD;;AAED;AACA,MAAI,OAAOC,SAAP,KAAqB,WAArB,IAAoCA,UAAUC,SAA9C,IAA2DD,UAAUC,SAAV,CAAoBC,WAApB,GAAkCC,KAAlC,CAAwC,uBAAxC,CAA/D,EAAiI;AAC/H,WAAO,KAAP;AACD;;AAED;AACA;AACA,SAAQ,OAAOC,QAAP,KAAoB,WAApB,IAAmCA,SAASC,eAA5C,IAA+DD,SAASC,eAAT,CAAyBC,KAAxF,IAAiGF,SAASC,eAAT,CAAyBC,KAAzB,CAA+BC,gBAAjI;AACL;AACC,SAAOV,MAAP,KAAkB,WAAlB,IAAiCA,OAAOW,OAAxC,KAAoDX,OAAOW,OAAP,CAAeC,OAAf,IAA2BZ,OAAOW,OAAP,CAAeE,SAAf,IAA4Bb,OAAOW,OAAP,CAAeG,KAA1H,CAFI;AAGL;AACA;AACC,SAAOX,SAAP,KAAqB,WAArB,IAAoCA,UAAUC,SAA9C,IAA2DD,UAAUC,SAAV,CAAoBC,WAApB,GAAkCC,KAAlC,CAAwC,gBAAxC,CAA3D,IAAwHS,SAASC,OAAOC,EAAhB,EAAoB,EAApB,KAA2B,EAL/I;AAML;AACC,SAAOd,SAAP,KAAqB,WAArB,IAAoCA,UAAUC,SAA9C,IAA2DD,UAAUC,SAAV,CAAoBC,WAApB,GAAkCC,KAAlC,CAAwC,oBAAxC,CAP9D;AAQD;;AAED;;;;AAIAnB,QAAQ+B,UAAR,CAAmBC,CAAnB,GAAuB,UAASC,CAAT,EAAY;AACjC,MAAI;AACF,WAAOC,KAAKC,SAAL,CAAeF,CAAf,CAAP;AACD,GAFD,CAEE,OAAOG,GAAP,EAAY;AACZ,WAAO,iCAAiCA,IAAIC,OAA5C;AACD;AACF,CAND;;AASA;;;;;;AAMA,SAASjC,UAAT,CAAoBkC,IAApB,EAA0B;AACxB,MAAI/B,YAAY,KAAKA,SAArB;;AAEA+B,OAAK,CAAL,IAAU,CAAC/B,YAAY,IAAZ,GAAmB,EAApB,IACN,KAAKgC,SADC,IAELhC,YAAY,KAAZ,GAAoB,GAFf,IAGN+B,KAAK,CAAL,CAHM,IAIL/B,YAAY,KAAZ,GAAoB,GAJf,IAKN,GALM,GAKAP,QAAQwC,QAAR,CAAiB,KAAKC,IAAtB,CALV;;AAOA,MAAI,CAAClC,SAAL,EAAgB;;AAEhB,MAAImC,IAAI,YAAY,KAAKC,KAAzB;AACAL,OAAKM,MAAL,CAAY,CAAZ,EAAe,CAAf,EAAkBF,CAAlB,EAAqB,gBAArB;;AAEA;AACA;AACA;AACA,MAAIG,QAAQ,CAAZ;AACA,MAAIC,QAAQ,CAAZ;AACAR,OAAK,CAAL,EAAQS,OAAR,CAAgB,aAAhB,EAA+B,UAAS5B,KAAT,EAAgB;AAC7C,QAAI,SAASA,KAAb,EAAoB;AACpB0B;AACA,QAAI,SAAS1B,KAAb,EAAoB;AAClB;AACA;AACA2B,cAAQD,KAAR;AACD;AACF,GARD;;AAUAP,OAAKM,MAAL,CAAYE,KAAZ,EAAmB,CAAnB,EAAsBJ,CAAtB;AACD;;AAED;;;;;;;AAOA,SAASvC,GAAT,GAAe;AACb;AACA;AACA,SAAO,qBAAoBqB,OAApB,yCAAoBA,OAApB,MACFA,QAAQrB,GADN,IAEF6C,SAASC,SAAT,CAAmBC,KAAnB,CAAyBC,IAAzB,CAA8B3B,QAAQrB,GAAtC,EAA2CqB,OAA3C,EAAoD4B,SAApD,CAFL;AAGD;;AAED;;;;;;;AAOA,SAAS/C,IAAT,CAAcgD,UAAd,EAA0B;AACxB,MAAI;AACF,QAAI,QAAQA,UAAZ,EAAwB;AACtBrD,cAAQQ,OAAR,CAAgB8C,UAAhB,CAA2B,OAA3B;AACD,KAFD,MAEO;AACLtD,cAAQQ,OAAR,CAAgB+C,KAAhB,GAAwBF,UAAxB;AACD;AACF,GAND,CAME,OAAMG,CAAN,EAAS,CAAE;AACd;;AAED;;;;;;;AAOA,SAASlD,IAAT,GAAgB;AACd,MAAImD,CAAJ;AACA,MAAI;AACFA,QAAIzD,QAAQQ,OAAR,CAAgB+C,KAApB;AACD,GAFD,CAEE,OAAMC,CAAN,EAAS,CAAE;;AAEb;AACA,MAAI,CAACC,CAAD,IAAM,OAAO3C,OAAP,KAAmB,WAAzB,IAAwC,SAASA,OAArD,EAA8D;AAC5D2C,QAAI3C,QAAQ4C,GAAR,CAAYC,KAAhB;AACD;;AAED,SAAOF,CAAP;AACD;;AAED;;;;AAIAzD,QAAQ4D,MAAR,CAAetD,MAAf;;AAEA;;;;;;;;;;;AAWA,SAASK,YAAT,GAAwB;AACtB,MAAI;AACF,WAAOE,OAAOgD,YAAd;AACD,GAFD,CAEE,OAAOL,CAAP,EAAU,CAAE;AACf,C;;;;;;;;;;;;;ACjMD;;;;;;;AAOAxD,UAAUC,OAAOD,OAAP,GAAiB8D,YAAYP,KAAZ,GAAoBO,YAAY,SAAZ,IAAyBA,WAAxE;AACA9D,QAAQ+D,MAAR,GAAiBA,MAAjB;AACA/D,QAAQgE,OAAR,GAAkBA,OAAlB;AACAhE,QAAQ4D,MAAR,GAAiBA,MAAjB;AACA5D,QAAQiE,OAAR,GAAkBA,OAAlB;AACAjE,QAAQwC,QAAR,GAAmB,mBAAAtC,CAAQ,sCAAR,CAAnB;;AAEA;;;AAGAF,QAAQkE,SAAR,GAAoB,EAApB;;AAEA;;;;AAIAlE,QAAQmE,KAAR,GAAgB,EAAhB;AACAnE,QAAQoE,KAAR,GAAgB,EAAhB;;AAEA;;;;;;AAMApE,QAAQ+B,UAAR,GAAqB,EAArB;;AAEA;;;;;;;AAOA,SAASsC,WAAT,CAAqB9B,SAArB,EAAgC;AAC9B,MAAI+B,OAAO,CAAX;AAAA,MAAcC,CAAd;;AAEA,OAAKA,CAAL,IAAUhC,SAAV,EAAqB;AACnB+B,WAAS,CAACA,QAAQ,CAAT,IAAcA,IAAf,GAAuB/B,UAAUiC,UAAV,CAAqBD,CAArB,CAA/B;AACAD,YAAQ,CAAR,CAFmB,CAER;AACZ;;AAED,SAAOtE,QAAQY,MAAR,CAAe6D,KAAKC,GAAL,CAASJ,IAAT,IAAiBtE,QAAQY,MAAR,CAAe+D,MAA/C,CAAP;AACD;;AAED;;;;;;;;AAQA,SAASb,WAAT,CAAqBvB,SAArB,EAAgC;;AAE9B,MAAIqC,QAAJ;;AAEA,WAASrB,KAAT,GAAiB;AACf;AACA,QAAI,CAACA,MAAMU,OAAX,EAAoB;;AAEpB,QAAIY,OAAOtB,KAAX;;AAEA;AACA,QAAIuB,OAAO,CAAC,IAAIC,IAAJ,EAAZ;AACA,QAAIC,KAAKF,QAAQF,YAAYE,IAApB,CAAT;AACAD,SAAKpC,IAAL,GAAYuC,EAAZ;AACAH,SAAKI,IAAL,GAAYL,QAAZ;AACAC,SAAKC,IAAL,GAAYA,IAAZ;AACAF,eAAWE,IAAX;;AAEA;AACA,QAAIxC,OAAO,IAAI4C,KAAJ,CAAU9B,UAAUuB,MAApB,CAAX;AACA,SAAK,IAAIJ,IAAI,CAAb,EAAgBA,IAAIjC,KAAKqC,MAAzB,EAAiCJ,GAAjC,EAAsC;AACpCjC,WAAKiC,CAAL,IAAUnB,UAAUmB,CAAV,CAAV;AACD;;AAEDjC,SAAK,CAAL,IAAUtC,QAAQ+D,MAAR,CAAezB,KAAK,CAAL,CAAf,CAAV;;AAEA,QAAI,aAAa,OAAOA,KAAK,CAAL,CAAxB,EAAiC;AAC/B;AACAA,WAAK6C,OAAL,CAAa,IAAb;AACD;;AAED;AACA,QAAItC,QAAQ,CAAZ;AACAP,SAAK,CAAL,IAAUA,KAAK,CAAL,EAAQS,OAAR,CAAgB,eAAhB,EAAiC,UAAS5B,KAAT,EAAgBiE,MAAhB,EAAwB;AACjE;AACA,UAAIjE,UAAU,IAAd,EAAoB,OAAOA,KAAP;AACpB0B;AACA,UAAIwC,YAAYrF,QAAQ+B,UAAR,CAAmBqD,MAAnB,CAAhB;AACA,UAAI,eAAe,OAAOC,SAA1B,EAAqC;AACnC,YAAIC,MAAMhD,KAAKO,KAAL,CAAV;AACA1B,gBAAQkE,UAAUlC,IAAV,CAAe0B,IAAf,EAAqBS,GAArB,CAAR;;AAEA;AACAhD,aAAKM,MAAL,CAAYC,KAAZ,EAAmB,CAAnB;AACAA;AACD;AACD,aAAO1B,KAAP;AACD,KAdS,CAAV;;AAgBA;AACAnB,YAAQI,UAAR,CAAmB+C,IAAnB,CAAwB0B,IAAxB,EAA8BvC,IAA9B;;AAEA,QAAIiD,QAAQhC,MAAMpD,GAAN,IAAaH,QAAQG,GAArB,IAA4BqB,QAAQrB,GAAR,CAAYqF,IAAZ,CAAiBhE,OAAjB,CAAxC;AACA+D,UAAMrC,KAAN,CAAY2B,IAAZ,EAAkBvC,IAAlB;AACD;;AAEDiB,QAAMhB,SAAN,GAAkBA,SAAlB;AACAgB,QAAMU,OAAN,GAAgBjE,QAAQiE,OAAR,CAAgB1B,SAAhB,CAAhB;AACAgB,QAAMhD,SAAN,GAAkBP,QAAQO,SAAR,EAAlB;AACAgD,QAAMZ,KAAN,GAAc0B,YAAY9B,SAAZ,CAAd;AACAgB,QAAMkC,OAAN,GAAgBA,OAAhB;;AAEA;AACA,MAAI,eAAe,OAAOzF,QAAQ0F,IAAlC,EAAwC;AACtC1F,YAAQ0F,IAAR,CAAanC,KAAb;AACD;;AAEDvD,UAAQkE,SAAR,CAAkByB,IAAlB,CAAuBpC,KAAvB;;AAEA,SAAOA,KAAP;AACD;;AAED,SAASkC,OAAT,GAAoB;AAClB,MAAI5C,QAAQ7C,QAAQkE,SAAR,CAAkB0B,OAAlB,CAA0B,IAA1B,CAAZ;AACA,MAAI/C,UAAU,CAAC,CAAf,EAAkB;AAChB7C,YAAQkE,SAAR,CAAkBtB,MAAlB,CAAyBC,KAAzB,EAAgC,CAAhC;AACA,WAAO,IAAP;AACD,GAHD,MAGO;AACL,WAAO,KAAP;AACD;AACF;;AAED;;;;;;;;AAQA,SAASe,MAAT,CAAgBP,UAAhB,EAA4B;AAC1BrD,UAAQK,IAAR,CAAagD,UAAb;;AAEArD,UAAQmE,KAAR,GAAgB,EAAhB;AACAnE,UAAQoE,KAAR,GAAgB,EAAhB;;AAEA,MAAIG,CAAJ;AACA,MAAIsB,QAAQ,CAAC,OAAOxC,UAAP,KAAsB,QAAtB,GAAiCA,UAAjC,GAA8C,EAA/C,EAAmDwC,KAAnD,CAAyD,QAAzD,CAAZ;AACA,MAAIC,MAAMD,MAAMlB,MAAhB;;AAEA,OAAKJ,IAAI,CAAT,EAAYA,IAAIuB,GAAhB,EAAqBvB,GAArB,EAA0B;AACxB,QAAI,CAACsB,MAAMtB,CAAN,CAAL,EAAe,SADS,CACC;AACzBlB,iBAAawC,MAAMtB,CAAN,EAASxB,OAAT,CAAiB,KAAjB,EAAwB,KAAxB,CAAb;AACA,QAAIM,WAAW,CAAX,MAAkB,GAAtB,EAA2B;AACzBrD,cAAQoE,KAAR,CAAcuB,IAAd,CAAmB,IAAI9D,MAAJ,CAAW,MAAMwB,WAAW0C,MAAX,CAAkB,CAAlB,CAAN,GAA6B,GAAxC,CAAnB;AACD,KAFD,MAEO;AACL/F,cAAQmE,KAAR,CAAcwB,IAAd,CAAmB,IAAI9D,MAAJ,CAAW,MAAMwB,UAAN,GAAmB,GAA9B,CAAnB;AACD;AACF;;AAED,OAAKkB,IAAI,CAAT,EAAYA,IAAIvE,QAAQkE,SAAR,CAAkBS,MAAlC,EAA0CJ,GAA1C,EAA+C;AAC7C,QAAIyB,WAAWhG,QAAQkE,SAAR,CAAkBK,CAAlB,CAAf;AACAyB,aAAS/B,OAAT,GAAmBjE,QAAQiE,OAAR,CAAgB+B,SAASzD,SAAzB,CAAnB;AACD;AACF;;AAED;;;;;;AAMA,SAASyB,OAAT,GAAmB;AACjBhE,UAAQ4D,MAAR,CAAe,EAAf;AACD;;AAED;;;;;;;;AAQA,SAASK,OAAT,CAAiBgC,IAAjB,EAAuB;AACrB,MAAIA,KAAKA,KAAKtB,MAAL,GAAc,CAAnB,MAA0B,GAA9B,EAAmC;AACjC,WAAO,IAAP;AACD;AACD,MAAIJ,CAAJ,EAAOuB,GAAP;AACA,OAAKvB,IAAI,CAAJ,EAAOuB,MAAM9F,QAAQoE,KAAR,CAAcO,MAAhC,EAAwCJ,IAAIuB,GAA5C,EAAiDvB,GAAjD,EAAsD;AACpD,QAAIvE,QAAQoE,KAAR,CAAcG,CAAd,EAAiB2B,IAAjB,CAAsBD,IAAtB,CAAJ,EAAiC;AAC/B,aAAO,KAAP;AACD;AACF;AACD,OAAK1B,IAAI,CAAJ,EAAOuB,MAAM9F,QAAQmE,KAAR,CAAcQ,MAAhC,EAAwCJ,IAAIuB,GAA5C,EAAiDvB,GAAjD,EAAsD;AACpD,QAAIvE,QAAQmE,KAAR,CAAcI,CAAd,EAAiB2B,IAAjB,CAAsBD,IAAtB,CAAJ,EAAiC;AAC/B,aAAO,IAAP;AACD;AACF;AACD,SAAO,KAAP;AACD;;AAED;;;;;;;;AAQA,SAASlC,MAAT,CAAgBuB,GAAhB,EAAqB;AACnB,MAAIA,eAAea,KAAnB,EAA0B,OAAOb,IAAIc,KAAJ,IAAad,IAAIjD,OAAxB;AAC1B,SAAOiD,GAAP;AACD,C;;;;;;;;;;;AChOD,IAAIe,OAAO,mBAAAnG,CAAQ,+CAAR,CAAX;;AAEA;AACA,IAAIoG,UAASD,KAAKC,MAAlB;;AAEArG,OAAOD,OAAP,GAAiBsG,OAAjB,C;;;;;;;;;;;ACLA,IAAIA,UAAS,mBAAApG,CAAQ,mDAAR,CAAb;AAAA,IACIqG,YAAY,mBAAArG,CAAQ,yDAAR,CADhB;AAAA,IAEIsG,iBAAiB,mBAAAtG,CAAQ,mEAAR,CAFrB;;AAIA;AACA,IAAIuG,UAAU,eAAd;AAAA,IACIC,eAAe,oBADnB;;AAGA;AACA,IAAIC,iBAAiBL,UAASA,QAAOM,WAAhB,GAA8BC,SAAnD;;AAEA;;;;;;;AAOA,SAASC,UAAT,CAAoBC,KAApB,EAA2B;AACzB,QAAIA,SAAS,IAAb,EAAmB;AACjB,eAAOA,UAAUF,SAAV,GAAsBH,YAAtB,GAAqCD,OAA5C;AACD;AACD,WAAQE,kBAAkBA,kBAAkBK,OAAOD,KAAP,CAArC,GACHR,UAAUQ,KAAV,CADG,GAEHP,eAAeO,KAAf,CAFJ;AAGD;;AAED9G,OAAOD,OAAP,GAAiB8G,UAAjB,C;;;;;;;;;;;;;AC3BA;AACA,IAAIG,aAAa,QAAOC,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,MAA7B,IAAuCA,OAAOF,MAAP,KAAkBA,MAAzD,IAAmEE,MAApF;;AAEAjH,OAAOD,OAAP,GAAiBiH,UAAjB,C;;;;;;;;;;;;ACHA,IAAIX,UAAS,mBAAApG,CAAQ,mDAAR,CAAb;;AAEA;AACA,IAAIiH,cAAcH,OAAO/D,SAAzB;;AAEA;AACA,IAAImE,iBAAiBD,YAAYC,cAAjC;;AAEA;;;;;AAKA,IAAIC,uBAAuBF,YAAYG,QAAvC;;AAEA;AACA,IAAIX,iBAAiBL,UAASA,QAAOM,WAAhB,GAA8BC,SAAnD;;AAEA;;;;;;;AAOA,SAASN,SAAT,CAAmBQ,KAAnB,EAA0B;AACxB,MAAIQ,QAAQH,eAAejE,IAAf,CAAoB4D,KAApB,EAA2BJ,cAA3B,CAAZ;AAAA,MACIa,MAAMT,MAAMJ,cAAN,CADV;;AAGA,MAAI;AACFI,UAAMJ,cAAN,IAAwBE,SAAxB;AACA,QAAIY,WAAW,IAAf;AACD,GAHD,CAGE,OAAOjE,CAAP,EAAU,CAAE;;AAEd,MAAIkE,SAASL,qBAAqBlE,IAArB,CAA0B4D,KAA1B,CAAb;AACA,MAAIU,QAAJ,EAAc;AACZ,QAAIF,KAAJ,EAAW;AACTR,YAAMJ,cAAN,IAAwBa,GAAxB;AACD,KAFD,MAEO;AACL,aAAOT,MAAMJ,cAAN,CAAP;AACD;AACF;AACD,SAAOe,MAAP;AACD;;AAEDzH,OAAOD,OAAP,GAAiBuG,SAAjB,C;;;;;;;;;;;AC7CA;AACA,IAAIY,cAAcH,OAAO/D,SAAzB;;AAEA;;;;;AAKA,IAAIoE,uBAAuBF,YAAYG,QAAvC;;AAEA;;;;;;;AAOA,SAASd,cAAT,CAAwBO,KAAxB,EAA+B;AAC7B,SAAOM,qBAAqBlE,IAArB,CAA0B4D,KAA1B,CAAP;AACD;;AAED9G,OAAOD,OAAP,GAAiBwG,cAAjB,C;;;;;;;;;;;;;ACrBA,IAAIS,aAAa,mBAAA/G,CAAQ,2DAAR,CAAjB;;AAEA;AACA,IAAIyH,WAAW,QAAO9C,IAAP,yCAAOA,IAAP,MAAe,QAAf,IAA2BA,IAA3B,IAAmCA,KAAKmC,MAAL,KAAgBA,MAAnD,IAA6DnC,IAA5E;;AAEA;AACA,IAAIwB,OAAOY,cAAcU,QAAd,IAA0B3E,SAAS,aAAT,GAArC;;AAEA/C,OAAOD,OAAP,GAAiBqG,IAAjB,C;;;;;;;;;;;ACRA,IAAIuB,WAAW,mBAAA1H,CAAQ,qDAAR,CAAf;AAAA,IACI2H,MAAM,mBAAA3H,CAAQ,2CAAR,CADV;AAAA,IAEI4H,WAAW,mBAAA5H,CAAQ,qDAAR,CAFf;;AAIA;AACA,IAAI6H,kBAAkB,qBAAtB;;AAEA;AACA,IAAIC,YAAYvD,KAAKwD,GAArB;AAAA,IACIC,YAAYzD,KAAK0D,GADrB;;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA,SAASC,QAAT,CAAkBC,IAAlB,EAAwBC,IAAxB,EAA8BC,OAA9B,EAAuC;AACrC,MAAIC,QAAJ;AAAA,MACIC,QADJ;AAAA,MAEIC,OAFJ;AAAA,MAGIhB,MAHJ;AAAA,MAIIiB,OAJJ;AAAA,MAKIC,YALJ;AAAA,MAMIC,iBAAiB,CANrB;AAAA,MAOIC,UAAU,KAPd;AAAA,MAQIC,SAAS,KARb;AAAA,MASIC,WAAW,IATf;;AAWA,MAAI,OAAOX,IAAP,IAAe,UAAnB,EAA+B;AAC7B,UAAM,IAAIY,SAAJ,CAAclB,eAAd,CAAN;AACD;AACDO,SAAOR,SAASQ,IAAT,KAAkB,CAAzB;AACA,MAAIV,SAASW,OAAT,CAAJ,EAAuB;AACrBO,cAAU,CAAC,CAACP,QAAQO,OAApB;AACAC,aAAS,aAAaR,OAAtB;AACAG,cAAUK,SAASf,UAAUF,SAASS,QAAQG,OAAjB,KAA6B,CAAvC,EAA0CJ,IAA1C,CAAT,GAA2DI,OAArE;AACAM,eAAW,cAAcT,OAAd,GAAwB,CAAC,CAACA,QAAQS,QAAlC,GAA6CA,QAAxD;AACD;;AAED,WAASE,UAAT,CAAoBC,IAApB,EAA0B;AACxB,QAAI7G,OAAOkG,QAAX;AAAA,QACIY,UAAUX,QADd;;AAGAD,eAAWC,WAAW5B,SAAtB;AACAgC,qBAAiBM,IAAjB;AACAzB,aAASW,KAAKnF,KAAL,CAAWkG,OAAX,EAAoB9G,IAApB,CAAT;AACA,WAAOoF,MAAP;AACD;;AAED,WAAS2B,WAAT,CAAqBF,IAArB,EAA2B;AACzB;AACAN,qBAAiBM,IAAjB;AACA;AACAR,cAAUW,WAAWC,YAAX,EAAyBjB,IAAzB,CAAV;AACA;AACA,WAAOQ,UAAUI,WAAWC,IAAX,CAAV,GAA6BzB,MAApC;AACD;;AAED,WAAS8B,aAAT,CAAuBL,IAAvB,EAA6B;AAC3B,QAAIM,oBAAoBN,OAAOP,YAA/B;AAAA,QACIc,sBAAsBP,OAAON,cADjC;AAAA,QAEIc,cAAcrB,OAAOmB,iBAFzB;;AAIA,WAAOV,SACHb,UAAUyB,WAAV,EAAuBjB,UAAUgB,mBAAjC,CADG,GAEHC,WAFJ;AAGD;;AAED,WAASC,YAAT,CAAsBT,IAAtB,EAA4B;AAC1B,QAAIM,oBAAoBN,OAAOP,YAA/B;AAAA,QACIc,sBAAsBP,OAAON,cADjC;;AAGA;AACA;AACA;AACA,WAAQD,iBAAiB/B,SAAjB,IAA+B4C,qBAAqBnB,IAApD,IACLmB,oBAAoB,CADf,IACsBV,UAAUW,uBAAuBhB,OAD/D;AAED;;AAED,WAASa,YAAT,GAAwB;AACtB,QAAIJ,OAAOtB,KAAX;AACA,QAAI+B,aAAaT,IAAb,CAAJ,EAAwB;AACtB,aAAOU,aAAaV,IAAb,CAAP;AACD;AACD;AACAR,cAAUW,WAAWC,YAAX,EAAyBC,cAAcL,IAAd,CAAzB,CAAV;AACD;;AAED,WAASU,YAAT,CAAsBV,IAAtB,EAA4B;AAC1BR,cAAU9B,SAAV;;AAEA;AACA;AACA,QAAImC,YAAYR,QAAhB,EAA0B;AACxB,aAAOU,WAAWC,IAAX,CAAP;AACD;AACDX,eAAWC,WAAW5B,SAAtB;AACA,WAAOa,MAAP;AACD;;AAED,WAASoC,MAAT,GAAkB;AAChB,QAAInB,YAAY9B,SAAhB,EAA2B;AACzBkD,mBAAapB,OAAb;AACD;AACDE,qBAAiB,CAAjB;AACAL,eAAWI,eAAeH,WAAWE,UAAU9B,SAA/C;AACD;;AAED,WAASmD,KAAT,GAAiB;AACf,WAAOrB,YAAY9B,SAAZ,GAAwBa,MAAxB,GAAiCmC,aAAahC,KAAb,CAAxC;AACD;;AAED,WAASoC,SAAT,GAAqB;AACnB,QAAId,OAAOtB,KAAX;AAAA,QACIqC,aAAaN,aAAaT,IAAb,CADjB;;AAGAX,eAAWpF,SAAX;AACAqF,eAAW,IAAX;AACAG,mBAAeO,IAAf;;AAEA,QAAIe,UAAJ,EAAgB;AACd,UAAIvB,YAAY9B,SAAhB,EAA2B;AACzB,eAAOwC,YAAYT,YAAZ,CAAP;AACD;AACD,UAAIG,MAAJ,EAAY;AACV;AACAJ,kBAAUW,WAAWC,YAAX,EAAyBjB,IAAzB,CAAV;AACA,eAAOY,WAAWN,YAAX,CAAP;AACD;AACF;AACD,QAAID,YAAY9B,SAAhB,EAA2B;AACzB8B,gBAAUW,WAAWC,YAAX,EAAyBjB,IAAzB,CAAV;AACD;AACD,WAAOZ,MAAP;AACD;AACDuC,YAAUH,MAAV,GAAmBA,MAAnB;AACAG,YAAUD,KAAV,GAAkBA,KAAlB;AACA,SAAOC,SAAP;AACD;;AAEDhK,OAAOD,OAAP,GAAiBoI,QAAjB,C;;;;;;;;;;;;;AC7LA;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA,SAASR,QAAT,CAAkBb,KAAlB,EAAyB;AACvB,MAAIhG,cAAcgG,KAAd,yCAAcA,KAAd,CAAJ;AACA,SAAOA,SAAS,IAAT,KAAkBhG,QAAQ,QAAR,IAAoBA,QAAQ,UAA9C,CAAP;AACD;;AAEDd,OAAOD,OAAP,GAAiB4H,QAAjB,C;;;;;;;;;;;;;AC9BA;;;;;;;;;;;;;;;;;;;;;;;;AAwBA,SAASuC,YAAT,CAAsBpD,KAAtB,EAA6B;AAC3B,SAAOA,SAAS,IAAT,IAAiB,QAAOA,KAAP,yCAAOA,KAAP,MAAgB,QAAxC;AACD;;AAED9G,OAAOD,OAAP,GAAiBmK,YAAjB,C;;;;;;;;;;;;;AC5BA,IAAIrD,aAAa,mBAAA5G,CAAQ,2DAAR,CAAjB;AAAA,IACIiK,eAAe,mBAAAjK,CAAQ,6DAAR,CADnB;;AAGA;AACA,IAAIkK,YAAY,iBAAhB;;AAEA;;;;;;;;;;;;;;;;;AAiBA,SAASC,QAAT,CAAkBtD,KAAlB,EAAyB;AACvB,WAAO,QAAOA,KAAP,yCAAOA,KAAP,MAAgB,QAAhB,IACJoD,aAAapD,KAAb,KAAuBD,WAAWC,KAAX,KAAqBqD,SAD/C;AAED;;AAEDnK,OAAOD,OAAP,GAAiBqK,QAAjB,C;;;;;;;;;;;AC5BA,IAAIhE,OAAO,mBAAAnG,CAAQ,+CAAR,CAAX;;AAEA;;;;;;;;;;;;;;;;AAgBA,IAAI2H,MAAM,SAANA,GAAM,GAAW;AACnB,SAAOxB,KAAKtB,IAAL,CAAU8C,GAAV,EAAP;AACD,CAFD;;AAIA5H,OAAOD,OAAP,GAAiB6H,GAAjB,C;;;;;;;;;;;ACtBA,IAAID,WAAW,mBAAA1H,CAAQ,qDAAR,CAAf;AAAA,IACImK,WAAW,mBAAAnK,CAAQ,qDAAR,CADf;;AAGA;AACA,IAAIoK,MAAM,IAAI,CAAd;;AAEA;AACA,IAAIC,SAAS,YAAb;;AAEA;AACA,IAAIC,aAAa,oBAAjB;;AAEA;AACA,IAAIC,aAAa,YAAjB;;AAEA;AACA,IAAIC,YAAY,aAAhB;;AAEA;AACA,IAAIC,eAAe/I,QAAnB;;AAEA;;;;;;;;;;;;;;;;;;;;;;;AAuBA,SAASkG,QAAT,CAAkBf,KAAlB,EAAyB;AACvB,MAAI,OAAOA,KAAP,IAAgB,QAApB,EAA8B;AAC5B,WAAOA,KAAP;AACD;AACD,MAAIsD,SAAStD,KAAT,CAAJ,EAAqB;AACnB,WAAOuD,GAAP;AACD;AACD,MAAI1C,SAASb,KAAT,CAAJ,EAAqB;AACnB,QAAI6D,QAAQ,OAAO7D,MAAM8D,OAAb,IAAwB,UAAxB,GAAqC9D,MAAM8D,OAAN,EAArC,GAAuD9D,KAAnE;AACAA,YAAQa,SAASgD,KAAT,IAAmBA,QAAQ,EAA3B,GAAiCA,KAAzC;AACD;AACD,MAAI,OAAO7D,KAAP,IAAgB,QAApB,EAA8B;AAC5B,WAAOA,UAAU,CAAV,GAAcA,KAAd,GAAsB,CAACA,KAA9B;AACD;AACDA,UAAQA,MAAMhE,OAAN,CAAcwH,MAAd,EAAsB,EAAtB,CAAR;AACA,MAAIO,WAAWL,WAAWvE,IAAX,CAAgBa,KAAhB,CAAf;AACA,SAAQ+D,YAAYJ,UAAUxE,IAAV,CAAea,KAAf,CAAb,GACH4D,aAAa5D,MAAMgE,KAAN,CAAY,CAAZ,CAAb,EAA6BD,WAAW,CAAX,GAAe,CAA5C,CADG,GAEFN,WAAWtE,IAAX,CAAgBa,KAAhB,IAAyBuD,GAAzB,GAA+B,CAACvD,KAFrC;AAGD;;AAED9G,OAAOD,OAAP,GAAiB8H,QAAjB,C;;;;;;;;;;;;;ACjEA;;;;AAIA,IAAIkD,IAAI,IAAR;AACA,IAAIC,IAAID,IAAI,EAAZ;AACA,IAAIE,IAAID,IAAI,EAAZ;AACA,IAAIE,IAAID,IAAI,EAAZ;AACA,IAAIE,IAAID,IAAI,MAAZ;;AAEA;;;;;;;;;;;;;;AAcAlL,OAAOD,OAAP,GAAiB,UAASsF,GAAT,EAAciD,OAAd,EAAuB;AACtCA,YAAUA,WAAW,EAArB;AACA,MAAIxH,cAAcuE,GAAd,yCAAcA,GAAd,CAAJ;AACA,MAAIvE,SAAS,QAAT,IAAqBuE,IAAIX,MAAJ,GAAa,CAAtC,EAAyC;AACvC,WAAO0G,MAAM/F,GAAN,CAAP;AACD,GAFD,MAEO,IAAIvE,SAAS,QAAT,IAAqBuK,MAAMhG,GAAN,MAAe,KAAxC,EAA+C;AACpD,WAAOiD,QAAQgD,IAAR,GAAeC,QAAQlG,GAAR,CAAf,GAA8BmG,SAASnG,GAAT,CAArC;AACD;AACD,QAAM,IAAIa,KAAJ,CACJ,0DACEjE,KAAKC,SAAL,CAAemD,GAAf,CAFE,CAAN;AAID,CAZD;;AAcA;;;;;;;;AAQA,SAAS+F,KAAT,CAAeK,GAAf,EAAoB;AAClBA,QAAMC,OAAOD,GAAP,CAAN;AACA,MAAIA,IAAI/G,MAAJ,GAAa,GAAjB,EAAsB;AACpB;AACD;AACD,MAAIxD,QAAQ,wHAAwHyK,IAAxH,CACVF,GADU,CAAZ;AAGA,MAAI,CAACvK,KAAL,EAAY;AACV;AACD;AACD,MAAI0K,IAAIC,WAAW3K,MAAM,CAAN,CAAX,CAAR;AACA,MAAIJ,OAAO,CAACI,MAAM,CAAN,KAAY,IAAb,EAAmBD,WAAnB,EAAX;AACA,UAAQH,IAAR;AACE,SAAK,OAAL;AACA,SAAK,MAAL;AACA,SAAK,KAAL;AACA,SAAK,IAAL;AACA,SAAK,GAAL;AACE,aAAO8K,IAAIT,CAAX;AACF,SAAK,MAAL;AACA,SAAK,KAAL;AACA,SAAK,GAAL;AACE,aAAOS,IAAIV,CAAX;AACF,SAAK,OAAL;AACA,SAAK,MAAL;AACA,SAAK,KAAL;AACA,SAAK,IAAL;AACA,SAAK,GAAL;AACE,aAAOU,IAAIX,CAAX;AACF,SAAK,SAAL;AACA,SAAK,QAAL;AACA,SAAK,MAAL;AACA,SAAK,KAAL;AACA,SAAK,GAAL;AACE,aAAOW,IAAIZ,CAAX;AACF,SAAK,SAAL;AACA,SAAK,QAAL;AACA,SAAK,MAAL;AACA,SAAK,KAAL;AACA,SAAK,GAAL;AACE,aAAOY,IAAIb,CAAX;AACF,SAAK,cAAL;AACA,SAAK,aAAL;AACA,SAAK,OAAL;AACA,SAAK,MAAL;AACA,SAAK,IAAL;AACE,aAAOa,CAAP;AACF;AACE,aAAOhF,SAAP;AApCJ;AAsCD;;AAED;;;;;;;;AAQA,SAAS4E,QAAT,CAAkBzG,EAAlB,EAAsB;AACpB,MAAIA,MAAMmG,CAAV,EAAa;AACX,WAAO1G,KAAKsH,KAAL,CAAW/G,KAAKmG,CAAhB,IAAqB,GAA5B;AACD;AACD,MAAInG,MAAMkG,CAAV,EAAa;AACX,WAAOzG,KAAKsH,KAAL,CAAW/G,KAAKkG,CAAhB,IAAqB,GAA5B;AACD;AACD,MAAIlG,MAAMiG,CAAV,EAAa;AACX,WAAOxG,KAAKsH,KAAL,CAAW/G,KAAKiG,CAAhB,IAAqB,GAA5B;AACD;AACD,MAAIjG,MAAMgG,CAAV,EAAa;AACX,WAAOvG,KAAKsH,KAAL,CAAW/G,KAAKgG,CAAhB,IAAqB,GAA5B;AACD;AACD,SAAOhG,KAAK,IAAZ;AACD;;AAED;;;;;;;;AAQA,SAASwG,OAAT,CAAiBxG,EAAjB,EAAqB;AACnB,SAAOgH,OAAOhH,EAAP,EAAWmG,CAAX,EAAc,KAAd,KACLa,OAAOhH,EAAP,EAAWkG,CAAX,EAAc,MAAd,CADK,IAELc,OAAOhH,EAAP,EAAWiG,CAAX,EAAc,QAAd,CAFK,IAGLe,OAAOhH,EAAP,EAAWgG,CAAX,EAAc,QAAd,CAHK,IAILhG,KAAK,KAJP;AAKD;;AAED;;;;AAIA,SAASgH,MAAT,CAAgBhH,EAAhB,EAAoB6G,CAApB,EAAuB5F,IAAvB,EAA6B;AAC3B,MAAIjB,KAAK6G,CAAT,EAAY;AACV;AACD;AACD,MAAI7G,KAAK6G,IAAI,GAAb,EAAkB;AAChB,WAAOpH,KAAKwH,KAAL,CAAWjH,KAAK6G,CAAhB,IAAqB,GAArB,GAA2B5F,IAAlC;AACD;AACD,SAAOxB,KAAKyH,IAAL,CAAUlH,KAAK6G,CAAf,IAAoB,GAApB,GAA0B5F,IAA1B,GAAiC,GAAxC;AACD,C;;;;;;;;;;;ACvJD;AACA,IAAInF,UAAUb,OAAOD,OAAP,GAAiB,EAA/B;;AAEA;AACA;AACA;AACA;;AAEA,IAAImM,gBAAJ;AACA,IAAIC,kBAAJ;;AAEA,SAASC,gBAAT,GAA4B;AACxB,UAAM,IAAIlG,KAAJ,CAAU,iCAAV,CAAN;AACH;AACD,SAASmG,mBAAT,GAAgC;AAC5B,UAAM,IAAInG,KAAJ,CAAU,mCAAV,CAAN;AACH;AACA,aAAY;AACT,QAAI;AACA,YAAI,OAAOmD,UAAP,KAAsB,UAA1B,EAAsC;AAClC6C,+BAAmB7C,UAAnB;AACH,SAFD,MAEO;AACH6C,+BAAmBE,gBAAnB;AACH;AACJ,KAND,CAME,OAAO7I,CAAP,EAAU;AACR2I,2BAAmBE,gBAAnB;AACH;AACD,QAAI;AACA,YAAI,OAAOtC,YAAP,KAAwB,UAA5B,EAAwC;AACpCqC,iCAAqBrC,YAArB;AACH,SAFD,MAEO;AACHqC,iCAAqBE,mBAArB;AACH;AACJ,KAND,CAME,OAAO9I,CAAP,EAAU;AACR4I,6BAAqBE,mBAArB;AACH;AACJ,CAnBA,GAAD;AAoBA,SAASC,UAAT,CAAoBC,GAApB,EAAyB;AACrB,QAAIL,qBAAqB7C,UAAzB,EAAqC;AACjC;AACA,eAAOA,WAAWkD,GAAX,EAAgB,CAAhB,CAAP;AACH;AACD;AACA,QAAI,CAACL,qBAAqBE,gBAArB,IAAyC,CAACF,gBAA3C,KAAgE7C,UAApE,EAAgF;AAC5E6C,2BAAmB7C,UAAnB;AACA,eAAOA,WAAWkD,GAAX,EAAgB,CAAhB,CAAP;AACH;AACD,QAAI;AACA;AACA,eAAOL,iBAAiBK,GAAjB,EAAsB,CAAtB,CAAP;AACH,KAHD,CAGE,OAAMhJ,CAAN,EAAQ;AACN,YAAI;AACA;AACA,mBAAO2I,iBAAiBhJ,IAAjB,CAAsB,IAAtB,EAA4BqJ,GAA5B,EAAiC,CAAjC,CAAP;AACH,SAHD,CAGE,OAAMhJ,CAAN,EAAQ;AACN;AACA,mBAAO2I,iBAAiBhJ,IAAjB,CAAsB,IAAtB,EAA4BqJ,GAA5B,EAAiC,CAAjC,CAAP;AACH;AACJ;AAGJ;AACD,SAASC,eAAT,CAAyBC,MAAzB,EAAiC;AAC7B,QAAIN,uBAAuBrC,YAA3B,EAAyC;AACrC;AACA,eAAOA,aAAa2C,MAAb,CAAP;AACH;AACD;AACA,QAAI,CAACN,uBAAuBE,mBAAvB,IAA8C,CAACF,kBAAhD,KAAuErC,YAA3E,EAAyF;AACrFqC,6BAAqBrC,YAArB;AACA,eAAOA,aAAa2C,MAAb,CAAP;AACH;AACD,QAAI;AACA;AACA,eAAON,mBAAmBM,MAAnB,CAAP;AACH,KAHD,CAGE,OAAOlJ,CAAP,EAAS;AACP,YAAI;AACA;AACA,mBAAO4I,mBAAmBjJ,IAAnB,CAAwB,IAAxB,EAA8BuJ,MAA9B,CAAP;AACH,SAHD,CAGE,OAAOlJ,CAAP,EAAS;AACP;AACA;AACA,mBAAO4I,mBAAmBjJ,IAAnB,CAAwB,IAAxB,EAA8BuJ,MAA9B,CAAP;AACH;AACJ;AAIJ;AACD,IAAIC,QAAQ,EAAZ;AACA,IAAIC,WAAW,KAAf;AACA,IAAIC,YAAJ;AACA,IAAIC,aAAa,CAAC,CAAlB;;AAEA,SAASC,eAAT,GAA2B;AACvB,QAAI,CAACH,QAAD,IAAa,CAACC,YAAlB,EAAgC;AAC5B;AACH;AACDD,eAAW,KAAX;AACA,QAAIC,aAAalI,MAAjB,EAAyB;AACrBgI,gBAAQE,aAAaG,MAAb,CAAoBL,KAApB,CAAR;AACH,KAFD,MAEO;AACHG,qBAAa,CAAC,CAAd;AACH;AACD,QAAIH,MAAMhI,MAAV,EAAkB;AACdsI;AACH;AACJ;;AAED,SAASA,UAAT,GAAsB;AAClB,QAAIL,QAAJ,EAAc;AACV;AACH;AACD,QAAIM,UAAUX,WAAWQ,eAAX,CAAd;AACAH,eAAW,IAAX;;AAEA,QAAI9G,MAAM6G,MAAMhI,MAAhB;AACA,WAAMmB,GAAN,EAAW;AACP+G,uBAAeF,KAAf;AACAA,gBAAQ,EAAR;AACA,eAAO,EAAEG,UAAF,GAAehH,GAAtB,EAA2B;AACvB,gBAAI+G,YAAJ,EAAkB;AACdA,6BAAaC,UAAb,EAAyBK,GAAzB;AACH;AACJ;AACDL,qBAAa,CAAC,CAAd;AACAhH,cAAM6G,MAAMhI,MAAZ;AACH;AACDkI,mBAAe,IAAf;AACAD,eAAW,KAAX;AACAH,oBAAgBS,OAAhB;AACH;;AAEDpM,QAAQsM,QAAR,GAAmB,UAAUZ,GAAV,EAAe;AAC9B,QAAIlK,OAAO,IAAI4C,KAAJ,CAAU9B,UAAUuB,MAAV,GAAmB,CAA7B,CAAX;AACA,QAAIvB,UAAUuB,MAAV,GAAmB,CAAvB,EAA0B;AACtB,aAAK,IAAIJ,IAAI,CAAb,EAAgBA,IAAInB,UAAUuB,MAA9B,EAAsCJ,GAAtC,EAA2C;AACvCjC,iBAAKiC,IAAI,CAAT,IAAcnB,UAAUmB,CAAV,CAAd;AACH;AACJ;AACDoI,UAAMhH,IAAN,CAAW,IAAI0H,IAAJ,CAASb,GAAT,EAAclK,IAAd,CAAX;AACA,QAAIqK,MAAMhI,MAAN,KAAiB,CAAjB,IAAsB,CAACiI,QAA3B,EAAqC;AACjCL,mBAAWU,UAAX;AACH;AACJ,CAXD;;AAaA;AACA,SAASI,IAAT,CAAcb,GAAd,EAAmBc,KAAnB,EAA0B;AACtB,SAAKd,GAAL,GAAWA,GAAX;AACA,SAAKc,KAAL,GAAaA,KAAb;AACH;AACDD,KAAKpK,SAAL,CAAekK,GAAf,GAAqB,YAAY;AAC7B,SAAKX,GAAL,CAAStJ,KAAT,CAAe,IAAf,EAAqB,KAAKoK,KAA1B;AACH,CAFD;AAGAxM,QAAQyM,KAAR,GAAgB,SAAhB;AACAzM,QAAQ0M,OAAR,GAAkB,IAAlB;AACA1M,QAAQ4C,GAAR,GAAc,EAAd;AACA5C,QAAQ2M,IAAR,GAAe,EAAf;AACA3M,QAAQ4M,OAAR,GAAkB,EAAlB,C,CAAsB;AACtB5M,QAAQ6M,QAAR,GAAmB,EAAnB;;AAEA,SAASC,IAAT,GAAgB,CAAE;;AAElB9M,QAAQ+M,EAAR,GAAaD,IAAb;AACA9M,QAAQgN,WAAR,GAAsBF,IAAtB;AACA9M,QAAQiN,IAAR,GAAeH,IAAf;AACA9M,QAAQkN,GAAR,GAAcJ,IAAd;AACA9M,QAAQmN,cAAR,GAAyBL,IAAzB;AACA9M,QAAQoN,kBAAR,GAA6BN,IAA7B;AACA9M,QAAQqN,IAAR,GAAeP,IAAf;AACA9M,QAAQsN,eAAR,GAA0BR,IAA1B;AACA9M,QAAQuN,mBAAR,GAA8BT,IAA9B;;AAEA9M,QAAQwN,SAAR,GAAoB,UAAUrI,IAAV,EAAgB;AAAE,WAAO,EAAP;AAAW,CAAjD;;AAEAnF,QAAQyN,OAAR,GAAkB,UAAUtI,IAAV,EAAgB;AAC9B,UAAM,IAAIE,KAAJ,CAAU,kCAAV,CAAN;AACH,CAFD;;AAIArF,QAAQ0N,GAAR,GAAc,YAAY;AAAE,WAAO,GAAP;AAAY,CAAxC;AACA1N,QAAQ2N,KAAR,GAAgB,UAAUC,GAAV,EAAe;AAC3B,UAAM,IAAIvI,KAAJ,CAAU,gCAAV,CAAN;AACH,CAFD;AAGArF,QAAQ6N,KAAR,GAAgB,YAAW;AAAE,WAAO,CAAP;AAAW,CAAxC,C;;;;;;;;;;;;;ACvLA,CAAC,UAAStI,IAAT,EAAeuI,OAAf,EAAwB;AACxB;AACA;AACA,KAAIC,UAAUhO,OAAOiO,MAArB;;AAEA,KAAI,IAAJ,EAAgD;AAC/CC,EAAA,iCAAO,CAAC,OAAD,CAAP,mCAAoB,UAAS/O,OAAT,EAAkB;AACrC4O,WAAQ5O,OAAR,EAAiB6O,OAAjB;AACAxI,QAAKyI,MAAL,GAAc9O,OAAd;AACA,GAHD;AAAA;AAIA,EALD,MAKO,EAKN;AACD,CAhBD,EAgBG,IAhBH,EAgBS,UAASA,OAAT,EAAkB6O,OAAlB,EAA2B;AACnC,KAAIG,GAAJ,EAASC,OAAT;AACA,KAAIC,cAAc,CAAC,EAAE,YAAY9N,SAAS+N,aAAT,CAAuB,QAAvB,CAAd,CAAnB;AACA,KAAIC,aAAa,sDAChB,yDADD;AAEA,KAAIC,eAAe,uBAAnB;AACA;;;;;AAKA,KAAIC,WAAW,SAAXA,QAAW,CAAUC,MAAV,EAAkBhH,OAAlB,EAA4B;AAC1C,MAAIiH,UAAUD,OAAOE,YAAP,CAAoB,SAApB,CAAd;AACA,MAAI,OAAOD,OAAP,KAAmB,QAAnB,IAA+B,CAACH,aAAanJ,IAAb,CAAkBsJ,OAAlB,CAApC,EAAgE;AAC/D,OAAIjH,WAAWA,QAAQmH,KAAvB,EAA8B;AAC7BH,WAAOI,eAAP,CAAuB,SAAvB;AACA,IAFD,MAEO,IAAI,CAACpH,OAAD,IAAYA,QAAQmH,KAAR,KAAkB,KAAlC,EAAyC;AAC/CE,aAASR,UAAT;AACAG,WAAOM,YAAP,CAAoB,sBAApB,EAA4CT,UAA5C;AACA;AACD;AACD,EAVD;AAWA,KAAIU,kBAAkB;AACrBC,aAAW,mBAAUR,MAAV,EAAkBS,OAAlB,EAA2BzH,OAA3B,EAAqC;;AAE/C,OAAIyH,OAAJ,EAAa;AACZV,aAASC,MAAT,EAAiBhH,OAAjB;AACAgH,WAAOM,YAAP,CAAoB,QAApB,EAA8BG,OAA9B;AACA;AACD,GAPoB;AAQrBC,UAAQ,gBAAUV,MAAV,EAAkBS,OAAlB,EAA2BzH,OAA3B,EAAqC;;AAE5C,OAAI2H,KAAJ;;AAEA,OAAI,CAACX,MAAD,IAAW,CAACA,OAAOE,YAAvB,EAAqC;AACpC;AACA;;AAED,OAAI,CAACO,OAAL,EAAc;AACbA,cAAUT,OAAOE,YAAP,CAAoB,QAApB,CAAV;AACA,IAFD,MAEO;AACNF,WAAOM,YAAP,CAAoB,QAApB,EAA8BG,OAA9B;AACA;;AAED,OAAIA,OAAJ,EAAa;AACZV,aAASC,MAAT,EAAiBhH,OAAjB;;AAEA;AACA;AACA;AACA2H,YAAQ,yDAAR;;AAEA;AACA;AACA;AACA;AACA,QAAIX,OAAOY,aAAX,EAA0B;AACzBZ,YAAOY,aAAP,CAAqBC,QAArB,GAAgCF,KAAhC;AACA;;AAEDX,WAAOM,YAAP,CAAoB,KAApB,EAA2BK,KAA3B;AACA;AACD;AAxCoB,EAAtB;AA0CA,KAAIpB,SAAS9O,OAAb;AACA,KAAI4P,QAAJ;;AAEA,KAAI/O,OAAOW,OAAP,IAAkBX,OAAOW,OAAP,CAAe6O,KAArC,EAA4C;AAC3CT,aAAW,kBAASU,GAAT,EAAc;AACxBzP,UAAOW,OAAP,CAAe6O,KAAf,CAAqB,uBAAuBC,GAA5C;AACA,GAFD;AAGA,EAJD,MAIO;AACNV,aAAW,oBAAW,CAAE,CAAxB;AACA;;AAED;AACAd,QAAOyB,GAAP,GAAaT,gBAAgBC,SAA7B;AACAjB,QAAO0B,UAAP,GAAoB,YAAW;AAC9B3P,SAAOiO,MAAP,GAAgBD,OAAhB;AACA,SAAOC,MAAP;AACA,EAHD;;AAKA;AACA,KAAII,WAAJ,EAAiB;AAChB;AACA;;AAEDJ,QAAOyB,GAAP,GAAaT,gBAAgBG,MAA7B;;AAEA;AACAhB,WAAU7N,SAASqP,oBAAT,CAA8B,QAA9B,CAAV;AACAzB,OAAMC,QAAQtK,MAAd;;AAEA,QAAOqK,KAAP,EAAc;AACbF,SAAOyB,GAAP,CAAYtB,QAAQD,GAAR,CAAZ;AACA;AAED,CAjHD,E;;;;;;;;;;;ACAA;;;;AAIA,IAAI0B,YAAY,EAAhB;AACA,KAAK,IAAInM,IAAI,CAAb,EAAgBA,IAAI,GAApB,EAAyB,EAAEA,CAA3B,EAA8B;AAC5BmM,YAAUnM,CAAV,IAAe,CAACA,IAAI,KAAL,EAAY+C,QAAZ,CAAqB,EAArB,EAAyBvB,MAAzB,CAAgC,CAAhC,CAAf;AACD;;AAED,SAAS4K,WAAT,CAAqBC,GAArB,EAA0BC,MAA1B,EAAkC;AAChC,MAAItM,IAAIsM,UAAU,CAAlB;AACA,MAAIC,MAAMJ,SAAV;AACA;AACA,SAAQ,CAACI,IAAIF,IAAIrM,GAAJ,CAAJ,CAAD,EAAgBuM,IAAIF,IAAIrM,GAAJ,CAAJ,CAAhB,EACTuM,IAAIF,IAAIrM,GAAJ,CAAJ,CADS,EACMuM,IAAIF,IAAIrM,GAAJ,CAAJ,CADN,EACqB,GADrB,EAETuM,IAAIF,IAAIrM,GAAJ,CAAJ,CAFS,EAEMuM,IAAIF,IAAIrM,GAAJ,CAAJ,CAFN,EAEqB,GAFrB,EAGTuM,IAAIF,IAAIrM,GAAJ,CAAJ,CAHS,EAGMuM,IAAIF,IAAIrM,GAAJ,CAAJ,CAHN,EAGqB,GAHrB,EAITuM,IAAIF,IAAIrM,GAAJ,CAAJ,CAJS,EAIMuM,IAAIF,IAAIrM,GAAJ,CAAJ,CAJN,EAIqB,GAJrB,EAKTuM,IAAIF,IAAIrM,GAAJ,CAAJ,CALS,EAKMuM,IAAIF,IAAIrM,GAAJ,CAAJ,CALN,EAMTuM,IAAIF,IAAIrM,GAAJ,CAAJ,CANS,EAMMuM,IAAIF,IAAIrM,GAAJ,CAAJ,CANN,EAOTuM,IAAIF,IAAIrM,GAAJ,CAAJ,CAPS,EAOMuM,IAAIF,IAAIrM,GAAJ,CAAJ,CAPN,CAAD,CAOuBwM,IAPvB,CAO4B,EAP5B,CAAP;AAQD;;AAED9Q,OAAOD,OAAP,GAAiB2Q,WAAjB,C;;;;;;;;;;;ACvBA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAIK,kBAAmB,OAAOC,MAAP,IAAkB,WAAlB,IAAiCA,OAAOD,eAAxC,IAA2DC,OAAOD,eAAP,CAAuBxL,IAAvB,CAA4ByL,MAA5B,CAA5D,IACC,OAAOC,QAAP,IAAoB,WAApB,IAAmC,OAAOrQ,OAAOqQ,QAAP,CAAgBF,eAAvB,IAA0C,UAA7E,IAA2FE,SAASF,eAAT,CAAyBxL,IAAzB,CAA8B0L,QAA9B,CADlH;;AAGA,IAAIF,eAAJ,EAAqB;AACnB;AACA,MAAIG,QAAQ,IAAIC,UAAJ,CAAe,EAAf,CAAZ,CAFmB,CAEa;;AAEhCnR,SAAOD,OAAP,GAAiB,SAASqR,SAAT,GAAqB;AACpCL,oBAAgBG,KAAhB;AACA,WAAOA,KAAP;AACD,GAHD;AAID,CARD,MAQO;AACL;AACA;AACA;AACA;AACA,MAAIG,OAAO,IAAIpM,KAAJ,CAAU,EAAV,CAAX;;AAEAjF,SAAOD,OAAP,GAAiB,SAASuR,OAAT,GAAmB;AAClC,SAAK,IAAIhN,IAAI,CAAR,EAAWd,CAAhB,EAAmBc,IAAI,EAAvB,EAA2BA,GAA3B,EAAgC;AAC9B,UAAI,CAACA,IAAI,IAAL,MAAe,CAAnB,EAAsBd,IAAIgB,KAAK+M,MAAL,KAAgB,WAApB;AACtBF,WAAK/M,CAAL,IAAUd,OAAO,CAACc,IAAI,IAAL,KAAc,CAArB,IAA0B,IAApC;AACD;;AAED,WAAO+M,IAAP;AACD,GAPD;AAQD,C;;;;;;;;;;;ACjCD,IAAIG,MAAM,mBAAAvR,CAAQ,yDAAR,CAAV;AACA,IAAIyQ,cAAc,mBAAAzQ,CAAQ,iEAAR,CAAlB;;AAEA,SAASwR,EAAT,CAAYnJ,OAAZ,EAAqBqI,GAArB,EAA0BC,MAA1B,EAAkC;AAChC,MAAItM,IAAIqM,OAAOC,MAAP,IAAiB,CAAzB;;AAEA,MAAI,OAAOtI,OAAP,IAAmB,QAAvB,EAAiC;AAC/BqI,UAAMrI,YAAY,QAAZ,GAAuB,IAAIrD,KAAJ,CAAU,EAAV,CAAvB,GAAuC,IAA7C;AACAqD,cAAU,IAAV;AACD;AACDA,YAAUA,WAAW,EAArB;;AAEA,MAAI+I,OAAO/I,QAAQiJ,MAAR,IAAkB,CAACjJ,QAAQkJ,GAAR,IAAeA,GAAhB,GAA7B;;AAEA;AACAH,OAAK,CAAL,IAAWA,KAAK,CAAL,IAAU,IAAX,GAAmB,IAA7B;AACAA,OAAK,CAAL,IAAWA,KAAK,CAAL,IAAU,IAAX,GAAmB,IAA7B;;AAEA;AACA,MAAIV,GAAJ,EAAS;AACP,SAAK,IAAIe,KAAK,CAAd,EAAiBA,KAAK,EAAtB,EAA0B,EAAEA,EAA5B,EAAgC;AAC9Bf,UAAIrM,IAAIoN,EAAR,IAAcL,KAAKK,EAAL,CAAd;AACD;AACF;;AAED,SAAOf,OAAOD,YAAYW,IAAZ,CAAd;AACD;;AAEDrR,OAAOD,OAAP,GAAiB0R,EAAjB,C;;;;;;;;;;;;;8CC5BA;AAAA;AAAA;AACA;;AAEA,IAAIE,iBAAiB,OAAO/Q,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,GAAyC,OAAOqG,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,GAAyC,OAAOrC,IAAP,KAAgB,WAAhB,GAA8BA,IAA9B,GAAqC,EAA5I;;AAEA,IAAIgN,QAAQ,EAAZ;;AAEA,IAAIC,UAAU,aAAa9K,OAAO+K,MAAP,CAAc;AACxCC,WAASH;AAD+B,CAAd,CAA3B;;AAIA,IAAII,SAAWH,WAAWD,KAAb,IAAwBC,OAArC;;AAEA,IAAII,WAAW,OAAON,cAAP,KAA0B,WAA1B,GAAwCA,cAAxC,GACX,OAAO/Q,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,GAAyC,EAD7C;;AAIA,IAAIsR,KAAJ;;AAEA,IAAI,OAAO/Q,QAAP,KAAoB,WAAxB,EAAqC;AACjC+Q,UAAQ/Q,QAAR;AACH,CAFD,MAEO;AACH+Q,UAAQD,SAAS,2BAAT,CAAR;;AAEA,MAAI,CAACC,KAAL,EAAY;AACRA,YAAQD,SAAS,2BAAT,IAAwCD,MAAhD;AACH;AACJ;;AAED,IAAIG,aAAaD,KAAjB;;AAEA,IAAIzE,UAAU,OAAd;;AAEA,IAAM2E,WAAW,+CAAAC,CAAQC,YAAR,CAAqB,OAArB,CAAjB;AACA,IAAMC,iBAAiB,CAAC,+CAAAF,CAAQ9E,OAAR,CAAgBiF,SAAxC;;AAEA;AACA,IAAMC,iBAAiB,+CAAAJ,CAAQI,cAAR,IAA0B,+CAAAJ,CAAQK,MAAzD;;AAEA;AACA,IAAMC,WAAW;AACfC,UAAQ,EADO;AAEfC,QAAM,EAFS;AAGfzQ,WAAS,EAHM;AAIf6K,WAAS,KAAK,IAJC;AAKf6F,WAASP,cALM;AAMfQ,oBAAkB,KANH;AAOfC,UAAQ;AACN,SAAK;AACHlS,YAAM,mBADH;AAEHmS,gBAAU;AAFP,KADC;AAKN,SAAK;AACHnS,YAAM,mBADH;AAEHmS,gBAAU,2DACA;AAHP,KALC;AAUN,SAAK;AACHnS,YAAM,kBADH;AAEHmS,gBAAU;AAFP,KAVC;AAcN,SAAK;AACHnS,YAAM,6BADH;AAEHmS,gBAAU;AAFP,KAdC;AAkBN,SAAK;AACHnS,YAAM,qBADH;AAEHmS,gBAAU,2EACA;AAHP,KAlBC;AAuBN,eAAW;AACTnS,YAAM,mBADG;AAETmS,gBAAU;AAFD,KAvBL;AA2BN,UAAM;AACJnS,YAAM,mBADF;AAEJmS,gBAAU;AAFN,KA3BA;AA+BN,UAAM;AACJnS,YAAM,oBADF;AAEJmS,gBAAU;AAFN,KA/BA;AAmCN,oCAAgC;AAC9BA,gBAAU;AADoB,KAnC1B;AAsCN,gCAA4B;AAC1BA,gBAAU;AADgB,KAtCtB;AAyCN,iCAA6B;AAC3BA,gBAAU;AADiB,KAzCvB;AA4CN,gCAA4B;AAC1BA,gBAAU;AADgB;AA5CtB;AAPO,CAAjB;;AAyDA,IAAMC,aAAa,SAAbA,UAAa,CAASC,MAAT,EAAiB7K,OAAjB,EAA0B;AAC3C,MAAI8K,gBAAJ;AACA,MAAIC,gBAAJ;AACA,MAAIC,mBAAJ;AACA,MAAMjF,YAAY,EAAlB;;AAEA,MAAMkF,eAAe,SAAfA,YAAe,CAASC,OAAT,EAAkB;AACrClL,YAAQ0K,MAAR,GAAiB,+CAAAX,CAAQoB,YAAR,CAAqBnL,QAAQ0K,MAA7B,EAAqCQ,OAArC,CAAjB;;AAEA;AACAzM,WAAO2M,IAAP,CAAYpL,QAAQ0K,MAApB,EAA4BW,OAA5B,CAAoC,aAAK;AACvC,UAAMxR,MAAMmG,QAAQ0K,MAAR,CAAeY,CAAf,CAAZ;;AAEA,UAAI,CAACzR,IAAIrB,IAAT,EAAe;AACbqB,YAAIrB,IAAJ,GAAW8S,CAAX;AACD;AACF,KAND;AAOD,GAXD;;AAaA;AACAL;;AAEA;AACA,MAAMM,eAAe,SAAfA,YAAe,GAAW;AAC9B;AACAV,WAAOrJ,YAAP,CAAoBuJ,OAApB;AACA,QAAIC,UAAJ,EAAgB;AACdA,mBAAa,KAAb;AACAH,aAAOW,WAAP,CAAmB,aAAnB;AACD;;AAED;AACAT,cAAUF,OAAO9J,UAAP,CAAkB,YAAW;AACrC;AACA;AACA,UAAI8J,OAAO/C,KAAP,MAAkB+C,OAAOY,MAAP,EAAlB,IAAqCZ,OAAOa,KAAP,EAAzC,EAAyD;AACvD;AACD;;AAEDV,mBAAa,IAAb;AACAH,aAAOc,QAAP,CAAgB,aAAhB;AACD,KATS,EASP,IATO,CAAV;;AAWAd,WAAOrJ,YAAP,CAAoBsJ,OAApB;AACAA,cAAUD,OAAO9J,UAAP,CAAkB,YAAW;AACrC;AACA;AACA,UAAI8J,OAAO/C,KAAP,MAAkB+C,OAAOY,MAAP,EAAlB,IAAqCZ,OAAOa,KAAP,EAAzC,EAAyD;AACvD;AACD;;AAEDb,aAAO/C,KAAP,CAAa;AACXyC,cAAM,CAAC,CADI;AAEX/R,cAAM;AAFK,OAAb;AAID,KAXS,EAWPwH,QAAQ2E,OAXD,CAAV;;AAaA;AACA;AACA,QAAIkG,OAAO/C,KAAP,MAAkB+C,OAAO/C,KAAP,GAAeyC,IAAf,KAAwB,CAAC,CAA/C,EAAkD;AAChDM,aAAO/C,KAAP,CAAa,IAAb;AACD;AACF,GAvCD;;AAyCA;AACA,MAAM8D,UAAU,SAAVA,OAAU,GAAW;AACzB,QAAIC,iBAAJ;;AAEA,WAAO9F,UAAU3J,MAAjB,EAAyB;AACvByP,iBAAW9F,UAAU+F,KAAV,EAAX;AACAjB,aAAOpF,GAAP,CAAWoG,SAAS,CAAT,CAAX,EAAwBA,SAAS,CAAT,CAAxB;AACD;AACDhB,WAAOrJ,YAAP,CAAoBsJ,OAApB;AACAD,WAAOrJ,YAAP,CAAoBuJ,OAApB;AACD,GATD;;AAWA;AACA,MAAMgB,cAAc,SAAdA,WAAc,CAASvT,IAAT,EAAewT,EAAf,EAAmB;AACrC,QAAMC,QAAQ,SAARA,KAAQ,GAAW;AACvB;AACA;AACA,UAAI,CAACpB,OAAO/C,KAAP,EAAL,EAAqB;AACnB;AACA,YAAMoE,OAAOrB,OAAOsB,CAAP,CAAS,WAAT,CAAb;;AAEA,YAAID,QACAA,KAAK1T,IAAL,KAAc,+BADd,IAEA,CAAC0T,KAAKE,eAFV,EAE2B;AACzBvB,iBAAO/C,KAAP,CAAa;AACXyC,kBAAM,CAAC,CADI;AAEX/R,kBAAM;AAFK,WAAb;AAIA;AACD;;AAED;AACA,YAAIqS,OAAOY,MAAP,EAAJ,EAAqB;AACnB,iBAAOF,cAAP;AACD;AACD;AACA,YAAIV,OAAOa,KAAP,EAAJ,EAAoB;AAClB,iBAAOH,cAAP;AACD;AACF;;AAEDS,SAAGpR,IAAH,CAAQ,IAAR;AACD,KA5BD;;AA8BAiQ,WAAOvF,EAAP,CAAU9M,IAAV,EAAgByT,KAAhB;AACAlG,cAAU3I,IAAV,CAAe,CAAC5E,IAAD,EAAOyT,KAAP,CAAf;AACD,GAjCD;;AAmCA,MAAMI,qBAAqB,SAArBA,kBAAqB,GAAW;AACpC,QAAIC,WAAW,CAAf;;AAEAV;;AAEA;AACAL;AACAQ,gBAAY,CAAC,YAAD,EAAe,cAAf,CAAZ,EAA4C,YAAW;AACrD,UAAMQ,cAAc1B,OAAO0B,WAAP,EAApB;;AAEA;AACA,UAAIA,gBAAgBD,QAApB,EAA8B;AAC5BA,mBAAWC,WAAX;AACAhB;AACD;AACF,KARD;;AAUA,QAAI,CAACvL,QAAQyK,gBAAb,EAA+B;AAC7BsB,kBAAY,UAAZ,EAAwBR,YAAxB;AACD;AACF,GApBD;;AAsBA,MAAMiB,iBAAiB,SAAjBA,cAAiB,GAAW;AAChC,QAAI,CAAC3B,OAAO4B,UAAP,EAAL,EAA0B;AACxB5B,aAAO/C,KAAP,CAAa;AACXyC,cAAM,CAAC,CADI;AAEX/R,cAAM;AAFK,OAAb;AAID;AACF,GAPD;;AASA,MAAMkU,iBAAiB,SAAjBA,cAAiB,GAAW;AAChC,QAAIC,UAAU,EAAd;AACA,QAAI7E,QAAQ+C,OAAO/C,KAAP,EAAZ;AACA,QAAML,UAAUoC,WAAWjD,aAAX,CAAyB,KAAzB,CAAhB;AACA,QAAIgG,gBAAgB,EAApB;;AAEA;AACA;AACA,QAAI,CAAC9E,KAAL,EAAY;AACV;AACD;;AAEDA,YAAQ,+CAAAiC,CAAQoB,YAAR,CAAqBrD,KAArB,EAA4B9H,QAAQ0K,MAAR,CAAe5C,MAAMyC,IAAN,IAAczC,MAAMtP,IAApB,IAA4B,CAA3C,CAA5B,CAAR;;AAEA,QAAIsP,MAAMhO,OAAV,EAAmB;AACjB6S,qDAA6C9B,OAAOgC,QAAP,CAAgB,mBAAhB,CAA7C,oDACsChC,OAAOgC,QAAP,CAAgB/E,MAAMhO,OAAtB,CADtC;AAGD;;AAED,QAAIgO,MAAMyC,IAAN,KAAe,CAAf,IAAoBT,QAApB,IAAgC,CAACA,SAASgD,WAAT,EAArC,EAA6D;AAC3D,UAAMC,eAAelC,OAAOgC,QAAP,CACnB,6EADmB,CAArB;;AAIAF,4DAAoDI,YAApD;AACD;;AAED,QAAMC,UAAUnC,OAAOoC,QAAP,CAAgB,cAAhB,CAAhB;;AAEAxF,YAAQyF,SAAR,GAAoB,mBAApB;AACAzF,YAAQ0F,EAAR,GAAa,mBAAb;AACAP,2GAEoC,KAAKC,QAAL,CAAc/E,MAAM6C,QAApB,CAFpC,+BAGc,KAAKkC,QAAL,CAAc,YAAd,CAHd,eAGmD/E,MAAMtP,IAAN,IAAcsP,MAAMyC,IAHvE,yBAIMoC,OAJN;;AAOA,QAAMS,YAAYJ,QAAQI,SAAR,CAAkB,EAAE,aAAatF,KAAf,KAAyBA,MAAM0C,OAAjD,CAAlB;;AAEA;AACA,QAAI4C,SAAJ,EAAe;AACbR,yHAE2C,KAAKC,QAAL,CAAc,IAAd,CAF3C;AAIApF,cAAQ4F,SAAR,GAAoBT,aAApB;AACAI,cAAQM,QAAR,CAAiB7F,OAAjB;AACA;AACAuF,cAAQO,SAAR,GAAoBC,UAApB,CAA+BC,WAA/B,CAA2CT,QAAQC,QAAR,CAAiB,aAAjB,EAAgCS,EAAhC,EAA3C;;AAEA,UAAMC,WAAWX,QAAQU,EAAR,GAAaE,aAAb,CAA2B,uBAA3B,CAAjB;;AAEA/C,aAAOvF,EAAP,CAAUqI,QAAV,EAAoB,OAApB,EAA6B,YAAW;AACtCX,gBAAQa,KAAR;AACD,OAFD;AAGD,KAfD,MAeO;AACLpG,cAAQ4F,SAAR,GAAoBT,aAApB;AACAI,cAAQM,QAAR,CAAiB7F,OAAjB;AACD;;AAED,QAAIoD,OAAOiD,YAAP,MAAyB,GAAzB,IAAgCjD,OAAOkD,aAAP,MAA0B,GAA9D,EAAmE;AACjEf,cAAQrB,QAAR,CAAiB,QAAjB;AACD;;AAEDqB,YAAQgB,GAAR,CAAY,YAAZ,EAA0B;AAAA,aAAMnD,OAAO/C,KAAP,CAAa,IAAb,CAAN;AAAA,KAA1B;AACD,GAnED;;AAqEA,MAAMmG,mBAAmB,SAAnBA,gBAAmB,GAAW;AAClCrC;;AAEAf,WAAOW,WAAP,CAAmB,YAAnB;AACAX,WAAOpF,GAAP,CAAW,MAAX,EAAmB4G,kBAAnB;AACAxB,WAAOpF,GAAP,CAAW,MAAX,EAAmB+G,cAAnB;AACA3B,WAAOpF,GAAP,CAAW,SAAX,EAAsBwI,gBAAtB;AACApD,WAAOpF,GAAP,CAAW,CAAC,SAAD,EAAY,OAAZ,CAAX,EAAiCiH,cAAjC;AACD,GARD;;AAUA,MAAMwB,eAAe,SAAfA,YAAe,CAASC,UAAT,EAAqB;AACxCF;AACArD,eAAWC,MAAX,EAAmB,+CAAAd,CAAQoB,YAAR,CAAqBd,QAArB,EAA+B8D,UAA/B,CAAnB;AACD,GAHD;;AAKAD,eAAaE,MAAb,GAAsB,UAAC1D,MAAD;AAAA,WAAYO,aAAaP,MAAb,CAAZ;AAAA,GAAtB;AACAwD,eAAaG,MAAb,GAAsB;AAAA,WAAM,+CAAAtE,CAAQoB,YAAR,CAAqBnL,QAAQ0K,MAA7B,CAAN;AAAA,GAAtB;;AAEA;AACAwD,eAAavJ,OAAb,GAAuB,UAASA,OAAT,EAAkB;AACvC,QAAI,OAAOA,OAAP,KAAmB,WAAvB,EAAoC;AAClC,aAAO3E,QAAQ2E,OAAf;AACD;AACD,QAAIA,YAAY3E,QAAQ2E,OAAxB,EAAiC;AAC/B3E,cAAQ2E,OAAR,GAAkBA,OAAlB;AACA,UAAI,CAACkG,OAAOY,MAAP,EAAL,EAAsB;AACpBY;AACD;AACF;AACF,GAVD;;AAYA6B,eAAaI,eAAb,GAA+B,UAASC,QAAT,EAAmB;AAChDvO,YAAQyK,gBAAR,GAA2B8D,QAA3B;AACAlC;AACD,GAHD;;AAKAxB,SAAOvF,EAAP,CAAU,MAAV,EAAkB+G,kBAAlB;AACAxB,SAAOvF,EAAP,CAAU,MAAV,EAAkBkH,cAAlB;AACA3B,SAAOvF,EAAP,CAAU,SAAV,EAAqB2I,gBAArB;AACApD,SAAOvF,EAAP,CAAU,CAAC,SAAD,EAAY,OAAZ,CAAV,EAAgCoH,cAAhC;;AAEA7B,SAAO2D,KAAP,CAAa,YAAM;AACjB3D,WAAOc,QAAP,CAAgB,YAAhB;AACD,GAFD;;AAIA;AACA,MAAI,CAACd,OAAOY,MAAP,EAAL,EAAsB;AACpBY;AACD;;AAED;AACA6B,eAAaO,OAAb,GAAuBtJ,OAAvB;;AAEA0F,SAAOH,MAAP,GAAgBwD,YAAhB;AACD,CA1QD;;AA4QA,IAAMxD,SAAS,SAATA,MAAS,CAAS1K,OAAT,EAAkB;AAC/B4K,aAAW,IAAX,EAAiB,+CAAAb,CAAQoB,YAAR,CAAqBd,QAArB,EAA+BrK,OAA/B,CAAjB;AACD,CAFD;;AAIA,CAAC,QAAD,EAAW,QAAX,EAAqB,iBAArB,EAAwCqL,OAAxC,CAAgD,aAAK;AACnDX,SAAOY,CAAP,IAAY,YAAW;AACrBvB,IAAA,+CAAAA,CAAQnS,GAAR,CAAY8W,IAAZ,iBACgBpD,CADhB;AAGD,GAJD;AAKD,CAND;;AAQA;AACAZ,OAAO+D,OAAP,GAAiBtJ,OAAjB;;AAEA;AACAgF,eAAe,QAAf,EAAyBO,MAAzB;;AAEA,+DAAeA,MAAf,E;;;;;;;;;;;;;;AC/XA,IAAIiE,CAAJ;;AAEA;AACAA,IAAK,YAAW;AACf,QAAO,IAAP;AACA,CAFG,EAAJ;;AAIA,IAAI;AACH;AACAA,KAAIA,KAAKlU,SAAS,aAAT,GAAL,IAAkC,CAAC,GAAGmU,IAAJ,EAAU,MAAV,CAAtC;AACA,CAHD,CAGE,OAAO3T,CAAP,EAAU;AACX;AACA,KAAI,QAAO3C,MAAP,yCAAOA,MAAP,OAAkB,QAAtB,EAAgCqW,IAAIrW,MAAJ;AAChC;;AAED;AACA;AACA;;AAEAZ,OAAOD,OAAP,GAAiBkX,CAAjB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnBA;;AAEA,IAAME,eAAe,cAArB;;AAEA,IAAIC,kBAAJ;;IAEqBC,qB;;;8BACD;AAChB,UAAI,CAACD,SAAL,EAAgB;AACdA,oBAAY,IAAIC,qBAAJ,EAAZ;AACD;;AAED,aAAOD,SAAP;AACD;;;AAED,mCAAe;AAAA;;AAAA;;AACb,SAAK9T,KAAL,GAAa,4CAAAgU,CAASH,YAAT,4BAAb;;AAEA,SAAK7T,KAAL,CAAW,iBAAX;;AAEA,SAAKiU,SAAL,GAAiB,EAAjB;;AAEA3W,WAAO4W,gBAAP,CAAwB,SAAxB,EAAmC,UAACC,KAAD,EAAW;AAC5C,YAAKnU,KAAL,CAAW,mBAAX;;AAEA,UAAMoU,WAAWD,MAAME,IAAN,CAAWD,QAA5B;;AAEA,UAAI,CAAC,MAAKE,MAAL,CAAYF,QAAZ,CAAL,EAA4B;AAC1BnW,gBAAQ6O,KAAR,0BAAqCsH,QAArC;AACA;AACD;;AAED,UAAMG,UAAU,MAAKC,OAAL,CAAaJ,QAAb,CAAhB;AACA,UAAMK,MAAMF,QAAQE,GAApB;;AAEAA,UAAIC,SAAJ,CAAcP,KAAd;AACD,KAdD;AAeD;;;;wBAEIhC,E,EAAIoC,O,EAAS;AAChB,WAAKvU,KAAL,CAAW,YAAX,EAAyBmS,EAAzB,EAA6BoC,OAA7B;;AAEA,WAAKN,SAAL,CAAe9B,EAAf,IAAqBoC,OAArB;;AAEA,aAAOA,OAAP;AACD;;;+BAEWE,G,EAAK;AACf,WAAKzU,KAAL,CAAW,oBAAX,EAAiCyU,GAAjC;;AAEA,UAAMF,UAAU,KAAKD,MAAL,CAAYG,IAAIE,MAAJ,CAAWP,QAAvB,IACZ,KAAKI,OAAL,CAAaC,IAAIE,MAAJ,CAAWP,QAAxB,CADY,GAEZ9W,OAAOsX,WAAP,CAAmBH,GAAnB,CAFJ;;AAIA,aAAO,KAAKzH,GAAL,CAASyH,IAAIE,MAAJ,CAAWP,QAApB,EAA8BG,OAA9B,CAAP;AACD;;;4BAEQpC,E,EAAI;AACX,WAAKnS,KAAL,CAAW,YAAX,EAAyBmS,EAAzB;;AAEA,aAAO,KAAK8B,SAAL,CAAe9B,EAAf,CAAP;AACD;;;2BAEOA,E,EAAI;AACV,WAAKnS,KAAL,CAAW,SAAX,EAAsBmS,EAAtB;;AAEA,aAAO,KAAK8B,SAAL,CAAepQ,cAAf,CAA8BsO,EAA9B,CAAP;AACD;;;;;;+DA7DkB4B,qB;;;;;;;;;;;;;;;;;;;;;;;;;;ACNrB;AACA;;AAEA;;AAEA,IAAMc,YAAY,+CAAA9F,CAAQC,YAAR,CAAqB,WAArB,CAAlB;;AAEA,IAAM6E,eAAe,cAArB;;IAEqBiB,W;;;AACnB,uBAAaC,MAAb,EAAqB7D,IAArB,EAA2B8D,qBAA3B,EAAkDhQ,OAAlD,EAA2D;AAAA;;AAAA,0HACnDkM,IADmD,EAC7ClM,QAAQiQ,IADqC;;AAGzD,UAAKjV,KAAL,GAAa,4CAAAgU,CAASH,YAAT,kBAAb;AACA,UAAK7T,KAAL,CAAW,aAAX;;AAEA,UAAKkV,KAAL,GAAahE,IAAb;AACA,UAAKiE,OAAL,GAAeJ,MAAf;;AAEA;AACA;AACA,UAAKN,GAAL,GAAW,IAAX;AACA,UAAKO,qBAAL,GAA6BA,qBAA7B;AAZyD;AAa1D;;;;8BAEUnF,M,EAAQ;AACjB,WAAK7P,KAAL,CAAW,WAAX;;AAEA,WAAKoV,SAAL,CAAe,gDAAAC,CAAIC,OAAJ,CACb,KAAKH,OAAL,CAAaI,GADA,EAEb,KAAKP,qBAFQ,EAGbnF,MAHa,CAAf;AAKD;;;8BAEU4E,G,EAAK;AACd,WAAKzU,KAAL,CAAW,WAAX;;AAEA,UAAI,KAAKyU,GAAT,EAAc;AACZ,aAAKA,GAAL,CAASvS,OAAT;AACD;;AAED,WAAKuS,GAAL,GAAWA,GAAX;AACD;;;;EAlCsCI,S;;+DAApBC,W;AAmCpB,C;;;;;;;;;;;;;;;;;;;AC5CD;AACA;;AAEA;AACA;;AAEA,IAAMjB,eAAe,cAArB;;AAEA,+DAAe,YAAY;AACzB,MAAM7T,QAAQ,4CAAAgU,CAASH,YAAT,wBAAd;;AAEA,SAAO,UAAU2B,IAAV,EAAgBR,qBAAhB,EAAuC;AAC5C,QAAIS,MAAM;AACRC,uBAAiB,yBAAUC,MAAV,EAAgC;AAAA,YAAd3Q,OAAc,uEAAJ,EAAI;;AAC/ChF,cAAM,iBAAN;;AAEA,YAAI,CAAC2V,OAAOJ,GAAZ,EAAiB;AACftX,kBAAQ6O,KAAR,CAAc,6BAAd;AACA9M,gBAAM2V,MAAN;AACA,iBAAO,KAAP;AACD;;AAED,YAAI,CAACA,OAAOJ,GAAP,CAAWK,UAAX,CAAsB,MAAtB,CAAL,EAAoC;AAClC3X,kBAAQ6O,KAAR,CAAc,iCAAd;AACA,iBAAO,KAAP;AACD;;AAED,YAAI,CAAC,8CAAA+I,CAAMC,SAAN,EAAL,EAAwB;AACtB9V,gBAAM,gDAAN;AACA,iBAAO,KAAP;AACD;;AAED,eAAOyV,IAAIM,WAAJ,CAAgBJ,OAAOnY,IAAvB,CAAP;AACD,OArBO;AAsBRwY,oBAAc,sBAAUjB,MAAV,EAAkB7D,IAAlB,EAAsC;AAAA,YAAdlM,OAAc,uEAAJ,EAAI;;AAClDhF,cAAM,cAAN;;AAEA,YAAMiW,eAAe,+CAAAlH,CAAQoB,YAAR,CAAqB,+CAAApB,CAAQ/J,OAA7B,EAAsCA,OAAtC,EAA+C,EAAEiQ,MAAM,EAAEO,UAAF,EAAR,EAA/C,CAArB;;AAEAtE,aAAK+D,IAAL,GAAY,IAAI,oDAAJ,CAAgBF,MAAhB,EAAwB7D,IAAxB,EAA8B8D,qBAA9B,EAAqDiB,YAArD,CAAZ;;AAEA,eAAO/E,KAAK+D,IAAZ;AACD,OA9BO;AA+BRc,mBAAa,qBAAUvY,IAAV,EAAgB;AAC3BwC,cAAM,aAAN;;AAEA,YAAIxC,SAAS,iCAAb,EAAgD;AAC9C,iBAAO,OAAP;AACD;;AAEDS,gBAAQ6O,KAAR,kBAA4BtP,IAA5B;;AAEA,eAAO,EAAP;AACD;AAzCO,KAAV;;AA4CA,WAAOiY,GAAP;AACD,GA9CD;AA+CD,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1DD;AACA;;AAEA;AACA;AACA;AACA;;AAEA,IAAMS,SAAS,+CAAAnH,CAAQoH,SAAR,CAAkB,QAAlB,CAAf;;AAEA,IAAMtC,eAAe,cAArB;;AAEA,IAAIuC,aAAa,KAAjB;;+DAEe,YAAyB;AAAA,MAAf/G,QAAe,uEAAJ,EAAI;;AAAA,MAChCgH,iBADgC;AAAA;;AAAA;AAAA;AAAA,iCAEjB;AACjB,YAAID,UAAJ,EAAgB;AACd,gBAAM,IAAIxT,KAAJ,CAAU,iFAAV,CAAN;AACD;;AAED;AACA;AACAwT,qBAAa,IAAb;;AAEArH,QAAA,+CAAAA,CAAQuH,OAAR,CAAgB,OAAhB,EAAyBC,qBAAzB,CAA+C,kEAAAC,GAAoB,OAApB,EAA6B,8DAAAzC,CAAsB1I,OAAtB,EAA7B,CAA/C,EAA8G,CAA9G;AACA0D,QAAA,+CAAAA,CAAQI,cAAR,CAAuBkH,kBAAkBI,UAAzC,EAAqDJ,iBAArD;;AAEA,eAAOA,iBAAP;AACD;AAfmC;;AAiBpC,+BAAaxG,MAAb,EAAqB7K,OAArB,EAA8B;AAAA;;AAAA,wIACtB6K,MADsB,EACd7K,OADc;;AAG5B,YAAKhF,KAAL,GAAa,4CAAAgU,CAASH,YAAT,wBAAb;AACA,YAAK7T,KAAL,CAAW,aAAX;;AAEAgF,gBAAU,+CAAA+J,CAAQoB,YAAR,CAAqBd,QAArB,EAA+BrK,OAA/B,CAAV;;AAEA6K,aAAOc,QAAP,CAAgB,mBAAhB;;AAEA,UAAI3L,QAAQ0R,WAAZ,EAAyB;AACvB7G,eAAOc,QAAP,CAAgB3L,QAAQ0R,WAAxB;AACD;;AAED7G,aAAOH,MAAP,CAAc;AACZA,gBAAQ;AACNiH,iCAAuB;AACrBhH,sBAAU,8BADW;AAErB7Q,qBAAS;AAFY;AADjB,SADI;AAOZ6K,iBAAS,MAAM;AAPH,OAAd;;AAUA,UAAI,CAAC,8CAAAkM,CAAMC,SAAN,EAAL,EAAwB;AAAA;;AACtB,sBAAOjG,OAAO/C,KAAP,CAAa;AAClByC,gBAAM,uBADY;AAElBC,mBAAS;AAFS,SAAb,CAAP;AAID;;AAED;AACA;AACAK,aAAO+G,YAAP,GAAsB,CAAtB;AACA/G,aAAO0B,WAAP,GAAqB,YAAM;AACzB,eAAO1B,OAAO+G,YAAP,EAAP;AACD,OAFD;;AAIA/G,aAAOvF,EAAP,CAAU,WAAV,EAAuB,UAAC6J,KAAD,EAAW;AAChC,cAAKnU,KAAL,CAAW,cAAX;;AAEA;AACA;AACA,YAAM6W,cAAchH,OAAOqB,IAAP,CAAY,IAAZ,EAAkB+D,IAAtC;;AAEA,YAAI,CAAC4B,WAAL,EAAkB;AAChB,iBAAO5Y,QAAQ6O,KAAR,CAAc,yBAAd,CAAP;AACD;;AAED+J,oBAAYC,SAAZ,CAAsBjH,MAAtB;AACD,OAZD;AAtC4B;AAmD7B;;AApEmC;AAAA,IACNqG,MADM;;AAuEtCG,oBAAkBI,UAAlB,GAA+B,MAA/B;AACAJ,oBAAkB5C,OAAlB,GAA4B,qDAA5B;AACA4C,oBAAkBR,KAAlB,GAA0B,8CAA1B;;AAEA,SAAOQ,iBAAP;AACD,I;;;;;;;;;;;AC1FD;;;;;;AAOA;AACA;;;AAGA;AACA,IAAIU,cAAc,0zsCAAlB;;AAIA,SAASC,aAAT,CAAuBhL,MAAvB,EAA+ByI,GAA/B,EAAoC;AAChC,QAAInT,OAAO;AACP2V,kBAAU,EADH;AAEPxC;AAFO,KAAX;;AAMA;AACA,aAASyC,OAAT,CAAiBxP,CAAjB,EAAoB;;AAEhB,YAAIsE,OAAOY,aAAP,KAAyB,IAA7B,EAAmC;AAC/BZ,mBAAOY,aAAP,CAAqBuK,WAArB,CAAiCzP,CAAjC,EAAmC,GAAnC;AACA;AACH;;AAED,YAAI0P,IAAIC,YAAY,YAAU;AAC1B,gBAAIrL,OAAOY,aAAP,KAAyB,IAA7B,EAAmC;AAC/BZ,uBAAOY,aAAP,CAAqBuK,WAArB,CAAiCzP,CAAjC,EAAmC,GAAnC;AACA4P,8BAAcF,CAAd;AACH;AACJ,SALO,EAKN,IALM,CAAR;AAMH;;AAED;;;;AAIA9V,SAAKiW,cAAL,GAAsB,UAASzY,OAAT,EAAkB;AACpC,YAAI0Y,UAAUlW,KAAK2V,QAAL,CAAcnY,QAAQ2Y,eAAtB,CAAd;AACA,YAAK,OAAOD,OAAP,KAAmB,WAAxB,EAAoC;AAC/B,gBAAI;AACDA,wBAAQ1Y,OAAR;AACF,aAFD,CAEE,OAAOmB,CAAP,EAAW;AACVhC,wBAAQ6O,KAAR,CAAe7M,CAAf;AACF;AACL,SAND,MAMO;AACHhC,oBAAQ6O,KAAR,CAAc,oBAAoBhO,QAAQ2Y,eAA1C;AACH;AACJ,KAXD;;AAaAnW,SAAKoW,SAAL,GAAiB,UAASC,KAAT,EAAgBC,QAAhB,EAA0B;AACvCtW,aAAK2V,QAAL,CAAcU,KAAd,IAAuBC,QAAvB;AACAV,gBAAQ;AACJW,oBAAQ,WADJ;AAEJF,mBAAOA;AAFH,SAAR;AAIH,KAND;;AAQArW,SAAKwW,WAAL,GAAmB,UAASH,KAAT,EAAgB;AAC/B,YAAKA,SAASrW,KAAK2V,QAAnB,EAA6B;AACzB,mBAAO3V,KAAK2V,QAAL,CAAcU,KAAd,CAAP;AACH;AACDT,gBAAQ;AACJW,oBAAQ,aADJ;AAEJF,mBAAOA;AAFH,SAAR;AAIH,KARD;;AAUArW,SAAKyW,OAAL,GAAe,UAASJ,KAAT,EAAgBtD,IAAhB,EAAqB;AAClC6C,gBAAQ;AACJW,oBAAQ,SADJ;AAEJF,mBAAOA,KAFH;AAGJtD,kBAAMA;AAHF,SAAR;AAKD,KAND;;AASA/S,SAAK0W,WAAL,GAAmB,UAAUL,KAAV,EAAiBC,QAAjB,EAA2BnC,GAA3B,EAAiC;AAChDA,YAAIwC,UAAJ,GAAiBxD,IAAIE,MAAJ,CAAWP,QAAX,GAAsB,YAAtB,GAAmC/V,SAAS6C,KAAK+M,MAAL,KAAc,OAAvB,CAApD;AACA3M,aAAKoW,SAAL,CAAejC,IAAIwC,UAAnB,EAA8B,UAASC,SAAT,EAAmB;AAC7C;AACA,gBAAIC,OAAOxZ,KAAKmJ,KAAL,CAAWoQ,UAAUE,aAArB,CAAX;AACA;AACAR,qBAASO,IAAT;AACA;AACA7W,iBAAKwW,WAAL,CAAiBrC,IAAIwC,UAArB;AACH,SAPD;;AASA;AACA;AACA3W,aAAKyW,OAAL,CAAaJ,KAAb,EAAoBlC,GAApB;AACH,KAdD;;AAgBA;AACA,WAAOnU,IAAP;AACH;;AAGDhE,OAAOsX,WAAP,GAAqB,UAASH,GAAT,EAAa;AAC9B,QAAIE,SAASF,IAAIE,MAAjB;AACA,QAAI0D,SAAS,EAAb;AACA,QAAIrM,SAASnO,SAAS+N,aAAT,CAAuB,QAAvB,CAAb;AACA,QAAI0M,aAAc3D,OAAO4D,MAAP,IAAiB,KAAlB,GAA2B,MAA3B,GAAmC,OAApD;;AAEA,QAAIC,SACA,iBACA,YADA,GAEI,gBAFJ,GAEuB7D,OAAO8D,QAF9B,GAEyC,QAFzC,GAGI,iBAHJ,GAGwB9D,OAAO+D,MAH/B,GAGwC,MAHxC,GAII,mBAJJ,GAI0BJ,UAJ1B,GAIuC,MAJvC,GAKI,sBALJ,GAK6B3D,OAAOP,QALpC,GAK+C,QAL/C,GAMI,gBANJ,GAMuB9W,OAAOuP,QAAP,CAAgB8L,MANvC,GAMgD,QANhD,GAOI5B,WAPJ,GAOkB,IAPlB,GAQA,aARA,GASA,mEATA,GAUA,0BAVA,GAWA,gBAZJ;;AAiBA;AACA/K,WAAO4M,MAAP,GAAgBJ,MAAhB;;AAEAxM,WAAO6M,KAAP,GAAe,CAAf;AACA7M,WAAO8M,MAAP,GAAgB,CAAhB;AACA9M,WAAOM,YAAP,CAAoB,OAApB,EAA4B,eAA5B;AACAN,WAAOM,YAAP,CAAoB,IAApB,EAAyBqI,OAAOP,QAAhC;;AAGA;AACA;AACA,QAAIO,OAAOoE,kBAAP,KAA8B,IAAlC,EAAwC;AACpCpE,eAAOoE,kBAAP,CAA0BtG,WAA1B,CAAsCzG,MAAtC;AACH,KAFD,MAEO,IAAIyI,IAAIuE,YAAJ,CAAiBC,UAAjB,KAAgC,IAApC,EAA0C;AAC7CxE,YAAIuE,YAAJ,CAAiBC,UAAjB,CAA4BxG,WAA5B,CAAwCzG,MAAxC;AACA2I,eAAOoE,kBAAP,GAA4BtE,IAAIuE,YAAJ,CAAiBC,UAA7C;AACH,KAHM,MAGA;AACH,YAAI7B,IAAIC,YAAY,YAAU;AAC1B,gBAAI5C,IAAIuE,YAAJ,CAAiBC,UAAjB,KAAgC,IAApC,EAA0C;AACtCxE,oBAAIuE,YAAJ,CAAiBC,UAAjB,CAA4BxG,WAA5B,CAAwCzG,MAAxC;AACA2I,uBAAOoE,kBAAP,GAA4BtE,IAAIuE,YAAJ,CAAiBC,UAA7C;AACA3B,8BAAcF,CAAd;AACH;AACJ,SANO,EAMN,IANM,CAAR;AAOH;;AAGD,WAAOJ,cAAchL,MAAd,EAAsByI,GAAtB,CAAP;AACH,CAnDD,C;;;;;;;;;;;;;;;;;;;;;;;;;ACxGA;AACA;;AAEA;AACA;;AAEA,IAAMZ,eAAe,kBAArB;;AAEA;;;;;AAKA;AACA;;IACqBwB,G;;;yCACU;AAC3B;AACA;AACA;AACA,UAAI6D,qBAAqB,KAAzB;;AAEA5b,aAAO6b,WAAP,GAAqB7b,OAAO6b,WAAP,IAAsB7b,OAAO8b,iBAAlD;;AAEA,UAAI,CAAC9b,OAAO6b,WAAZ,EAAyB;AACvB,YAAID,uBAAuB,KAA3B,EAAkC;AAChC5b,iBAAO+b,KAAP,CAAa,6FAAb;AACD;;AAEDH,6BAAqB,IAArB;AACD;AACF;;;0CAE6BI,G,EAAK;AACjC,UAAI,CAACA,GAAL,EAAU;AACR,cAAM,IAAI1W,KAAJ,CAAU,mCAAV,CAAN;AACD;;AAED;AACA;AACA;AACA,UAAM2W,SAAS1b,SAAS+N,aAAT,CAAuB,GAAvB,CAAf;;AAEA,UAAI2M,eAAJ;AACA,UAAIiB,qBAAJ;;AAEA;AACA;AACA;AACA,UAAIF,IAAIG,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB9b,WAApB,OAAsC,OAA1C,EAAmD;AACjD4a,iBAAS,IAAT;AACAgB,eAAOG,IAAP,GAAcJ,IAAI9Z,OAAJ,CAAY,OAAZ,EAAqB,OAArB,CAAd;AACAga,uBAAe,GAAf;AACD,OAJD,MAKK,IAAIF,IAAIG,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB9b,WAApB,OAAsC,MAA1C,EAAkD;AACrD4a,iBAAS,KAAT;AACAgB,eAAOG,IAAP,GAAcJ,IAAI9Z,OAAJ,CAAY,MAAZ,EAAoB,MAApB,CAAd;AACAga,uBAAe,IAAf;AACD,OAJI,MAKA;AACH,cAAM,IAAI5W,KAAJ,CAAU,qEAAV,CAAN;AACD;;AAED,UAAM+W,QAAQJ,OAAOK,QAAP,CAAgBtX,KAAhB,CAAsB,GAAtB,CAAd;AACA,UAAMuX,aAAaF,MAAMA,MAAMvY,MAAN,GAAe,CAArB,CAAnB;;AAEA,UAAI0Y,WAAWP,OAAOO,QAAtB;AACA,UAAIC,OAAOR,OAAOQ,IAAlB;;AAEA,UAAIA,KAAK3Y,MAAL,KAAgB,CAApB,EAAuB;AACrB2Y,eAAOP,YAAP;AACD;;AAED;AACA,UAAIM,aAAa,GAAjB,EAAsB;AACpBA,mBAAWxc,OAAOuP,QAAP,CAAgBiN,QAA3B;AACD;;AAED,aAAO;AACL;AACArB,kBAAUqB,QAFL;AAGLpB,gBAAQra,SAAS0b,IAAT,CAHH;AAILF,8BAJK;AAKLtB;AALK,OAAP;AAOD;;;4BAEevD,qB,EAAuBnF,M,EAAqB;AAAA,UAAb8E,MAAa,uEAAJ,EAAI;;AAC1D,aAAO,IAAIU,GAAJ,CAAQL,qBAAR,EAA+BnF,MAA/B,EAAuC8E,MAAvC,CAAP;AACD;;;4BAEe2E,G,EAAKtE,qB,EAAuBnF,M,EAAqB;AAAA,UAAb8E,MAAa,uEAAJ,EAAI;;AAC/D,aAAOU,IAAIhK,OAAJ,CAAY2J,qBAAZ,EAAmCnF,MAAnC,eACF8E,MADE,EAEFU,IAAI2E,qBAAJ,CAA0BV,GAA1B,CAFE,EAAP;AAID;;;AAED,eAAatE,qBAAb,EAAoCnF,MAApC,EAA4C8E,MAA5C,EAAoD;AAAA;;AAClDU,QAAI4E,kBAAJ;;AAEA,SAAK9H,EAAL,GAAU,8CAAA+H,EAAV;;AAEA,SAAKla,KAAL,GAAa,4CAAAgU,CAASH,YAAT,SAAyB,KAAK1B,EAA9B,WAAb;AACA,SAAKnS,KAAL,CAAW,aAAX;;AAEA,SAAKma,SAAL,GAAiB,KAAjB;AACA,SAAKC,oBAAL,GAA4B,KAA5B;AACA,SAAKC,cAAL,GAAsBxK,MAAtB;AACA,SAAKmJ,YAAL,GAAoB,KAAKqB,cAAL,CAAoB3H,EAApB,EAApB;;AAEA,SAAKiC,MAAL,GAAc;AACZP,gBAAU,KAAKjC,EADH;AAEZsG,gBAAU9D,OAAO8D,QAFL;AAGZC,cAAQ/D,OAAO+D,MAHH;AAIZH,cAAQ5D,OAAO4D,MAJH;AAKZsB,kBAAYlF,OAAOkF,UALP;AAMZS,gBAAU3F,OAAO2F,QANL;AAOZvB,0BAAoBpE,OAAOoE,kBAAP,IAA6B;AAPrC,KAAd;;AAUA,SAAKwB,QAAL,GAAgB;AACdC,iBAAW,CADG;AAEdC,cAAQ,CAFM;AAGdC,YAAM7c,SAASgP,QAAT,CAAkB6N,IAHV;AAIdtG,gBAAU,KAAKO,MAAL,CAAYP;AAJR,KAAhB;;AAOA;AACA,SAAKY,qBAAL,GAA6BA,qBAA7B;;AAEA;AACA;AACA,SAAK2F,iBAAL,GAAyB,IAAI,0DAAJ,CAAsB,KAAKxI,EAA3B,EAA+B,IAA/B,CAAzB;AACA,SAAKoC,OAAL,GAAe,KAAKS,qBAAL,CAA2B4F,UAA3B,CAAsC,IAAtC,CAAf;;AAEA,SAAKC,MAAL,GAAc;AACZC,uBAAkB,yBAACC,cAAD,EAAoB;AACpC;AACA9c,gBAAQ6O,KAAR,CAAc,sBAAd;AACA7O,gBAAQ6O,KAAR,CAAciO,cAAd;AACD,OALW;;AAOZ;AACAC,kBAAY,KAAKL,iBAAL,CAAuBM,UARvB;;AAUZ;AACA9c,iBAAW,mBAAC+c,IAAD,EAAOjb,CAAP,EAAa;AACtBhC,gBAAQ6O,KAAR,CAAcoO,IAAd;AACA,YAAI,OAAOjb,CAAP,KAAa,WAAjB,EAA8B;AAC5BhC,kBAAQ6O,KAAR,CAAc7M,EAAE4C,KAAhB;AACD;AACF;AAhBW,KAAd;;AAmBA,SAAKgN,MAAL,GAAc,+CAAAsL,CAAU9P,OAAV,CAAkB,IAAlB,EAAwB,KAAKgP,cAA7B,CAAd;AACD;;;;0BAEM1F,M,EAAQ;AACb,WAAK3U,KAAL,CAAW,OAAX;;AAEA,UAAMob,2BACDzG,MADC;AAEJoE,4BAAoB,KAAKpE,MAAL,CAAYoE;AAF5B,QAAN;;AAKA;AACA,aAAO1D,IAAIhK,OAAJ,CACL,KAAK2J,qBADA,EAEL,KAAKqF,cAFA,EAGLe,WAHK,CAAP;AAKD;;;iCAEa9B,G,EAAkB;AAAA,UAAb3E,MAAa,uEAAJ,EAAI;;AAC9B,WAAK3U,KAAL,CAAW,cAAX;;AAEA,aAAO,KAAKqb,KAAL,cACFhG,IAAI2E,qBAAJ,CAA0BV,GAA1B,CADE,EAEF3E,MAFE,EAAP;AAID;;AAED;;;;wCACqBiD,Q,EAAU;AAC7B,WAAK5X,KAAL,CAAW,qBAAX;;AAEA,WAAKuU,OAAL,CAAayD,WAAb,CAAyB,gBAAzB,EAA2CJ,QAA3C,EAAqD,EAArD;AACD;;;mCAEe0B,G,EAAK;AAAA;;AACnB,WAAKtZ,KAAL,8BAAsC,KAAKmS,EAA3C;;AAEA,UAAI,CAACmH,GAAL,EAAU;AACR,cAAM,IAAI1W,KAAJ,CAAU,kDAAV,CAAN;AACD;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAMyY,QAAQ,KAAKC,YAAL,CAAkBhC,GAAlB,CAAd;;AAEA;AACA,UAAI,KAAK3E,MAAL,CAAY4G,YAAZ,KAA6B,IAAjC,EAAuC;AACrC,YAAIC,aAAa3d,SAAS4d,cAAT,CAAwB,KAAK9G,MAAL,CAAYP,QAApC,CAAjB;AACA,YAAIsH,SAAS7d,SAAS4d,cAAT,CAAwBJ,MAAM1G,MAAN,CAAa4G,YAArC,CAAb;;AAEA,YAAIG,MAAJ,EAAY;AACVA,iBAAOC,WAAP,CAAmBH,UAAnB;AACD;;AAED;AACAA,mBAAW5C,MAAX,GAAoB,EAApB;AACD;;AAEDyC,YAAMxL,MAAN,CAAavF,EAAb,CAAgB,YAAhB,EAA8B,YAAM;AAClC,cAAK8K,SAAL,CAAeiG,KAAf;AACA,cAAKnZ,OAAL;AACD,OAHD;AAID;;;4BAEQiS,K,EAAO;AAAA;;AACd,WAAKnU,KAAL,CAAW,SAAX;;AAEA;AACA,UAAI,KAAKgZ,YAAL,CAAkBC,UAAlB,KAAiC,IAArC,EAA2C;AACzC,aAAKtE,MAAL,CAAYiH,oBAAZ,GAAmC,KAAK5C,YAAL,CAAkBC,UAAlB,CAA6B9G,EAAhE;AACD;;AAED,UAAM0J,WAAW,KAAKxB,cAAL,CAAoByB,QAApB,GAA+B,CAA/B,CAAjB;;AAEA;AACA,UAAID,SAAS3P,YAAT,CAAsB,UAAtB,MAAsC,IAA1C,EAAgD;AAC9C;AACA,aAAKmO,cAAL,CAAoB0B,OAApB,CAA4B,MAA5B,EAAoCF,QAApC;AACD;;AAED,UAAI,KAAKzB,oBAAT,EAA+B;AAC7Bnc,gBAAQyV,IAAR,CAAa,4CAAb;AACA;AACD;;AAED,WAAK0G,oBAAL,GAA4B,IAA5B;;AAEA,WAAKvK,MAAL,CAAYvF,EAAZ,CAAe,YAAf,EAA6B,YAAM;AACjC,eAAK+P,cAAL,CAAoB2B,cAApB,CAAmCC,IAAnC;AACD,OAFD;;AAIA,WAAKpM,MAAL,CAAYvF,EAAZ,CAAe,eAAf,EAAgC,YAAM;AACpC;AACA,eAAK+P,cAAL,CAAoB0B,OAApB,CAA4B,YAA5B;AACD,OAHD;;AAKA,WAAKlM,MAAL,CAAYvF,EAAZ,CAAe,mBAAf,EAAoC,YAAM;AACxC;AACA,eAAK+P,cAAL,CAAoB0B,OAApB,CAA4B,YAA5B;AACD,OAHD;;AAKA,WAAKG,4BAAL,GAAoC;AAClCC,mBAAW,mBAAChI,KAAD;AAAA,cAAUmF,GAAV,QAAUA,GAAV;AAAA,iBAAoB,OAAK8C,cAAL,CAAoB9C,GAApB,CAApB;AAAA;AADuB,OAApC;;AAIA,WAAKe,cAAL,CAAoB/P,EAApB,CAAuB,WAAvB,EAAoC,KAAK4R,4BAAL,CAAkCC,SAAtE;;AAEA,WAAKtM,MAAL,CAAYwM,IAAZ,CAAiB,KAAKrD,YAAL,CAAkBxG,UAAlB,CAA6BL,EAA9C,EAAkD,KAAKwC,MAAL,CAAYkF,UAA9D;;AAEA,WAAKb,YAAL,CAAkB9E,gBAAlB,CAAmC,iBAAnC,EAAsD,UAACjU,CAAD,EAAO;AAC3D,eAAK4P,MAAL,CAAYyM,OAAZ;AACD,OAFD,EAEG,KAFH;;AAIA;AACA;AACA,WAAKC,WAAL,GAAmBlF,YAAY,YAAM;AACnC,eAAKkD,QAAL,CAAcE,MAAd,GAAwB,OAAKF,QAAL,CAAcC,SAAd,GAA0B,CAA3B,GAAgC,OAAvD;AACA,eAAKD,QAAL,CAAcC,SAAd,GAA0B,CAA1B;;AAEA,eAAKjG,OAAL,CAAawD,OAAb,CAAqB,WAArB,EAAkC,OAAKwC,QAAvC;;AAEA,eAAKva,KAAL,CAAW,YAAX,EAAyB,OAAKua,QAA9B;AACD,OAPkB,EAOhB,IAPgB,CAAnB;AAQD;;;2BAEOpG,K,EAAO;AACb,WAAKnU,KAAL,CAAW,QAAX;;AAEA,WAAKA,KAAL,CAAW,eAAX,EAA4BmU,MAAME,IAAN,CAAWmI,MAAvC;AACA,WAAKnC,cAAL,CAAoB0B,OAApB,CAA4B,eAA5B,EAA6C5H,MAAME,IAAN,CAAWmI,MAAxD;AACD;;;2BAEOrI,K,EAAO;AACb,WAAKnU,KAAL,CAAW,QAAX;;AAEA,WAAKuU,OAAL,CAAagD,cAAb,CAA4BpD,MAAME,IAAlC;AACD;;;8BAEUF,K,EAAO;AAChB,UAAMsI,YAAYtI,MAAME,IAAN,CAAWF,KAA7B;;AAEA,WAAKnU,KAAL,CAAW,WAAX,EAAwByc,SAAxB;;AAEA,cAAQA,SAAR;AACE,aAAK,OAAL;AAAc;AACZ,iBAAKC,OAAL,CAAavI,KAAb;AACA;AACD;AACD,aAAK,MAAL;AAAa;AACX,iBAAKwI,MAAL,CAAYxI,KAAZ;AACA;AACD;AACD,aAAK,MAAL;AAAa;AACX,iBAAKyI,MAAL,CAAYzI,KAAZ;AACA;AACD;AACD;AAAS;AACPlW,oBAAQ6O,KAAR,0BAAqC2P,SAArC;AACD;AAfH;AAiBD;;;8BAEUhI,G,EAAK;AACd,WAAK4F,cAAL,CAAoBnJ,IAApB,CAAyB,IAAzB,EAA+B+D,IAA/B,CAAoCG,SAApC,CAA8CX,GAA9C;AACD;;;8BAEU;AACT,WAAKzU,KAAL,CAAW,SAAX;;AAEA,UAAI,KAAKma,SAAT,EAAoB;AAClB;AACD;;AAED,WAAKA,SAAL,GAAiB,IAAjB;;AAEA7C,oBAAc,KAAKiF,WAAnB;;AAEA,WAAKhI,OAAL,CAAauD,WAAb,gBAAsC,KAAKjI,MAAL,CAAYgN,IAAlD;;AAEA,WAAKxC,cAAL,CAAoB5P,GAApB,CAAwB,WAAxB,EAAqC,KAAKyR,4BAAL,CAAkCC,SAAvE;;AAEA,WAAKtM,MAAL,CAAY3N,OAAZ;;AAEA,WAAKmY,cAAL,GAAsB,IAAtB;AACA,WAAKxK,MAAL,GAAc,IAAd;;AAEA;AACD;;;;;;+DAjVkBwF,G;AAkVpB,C;;;;;;;;;;;;;;;;;;;ACjWD;;AAEA,IAAMxB,eAAe,kBAArB;;AAEA;;;;IAGqBiJ,iB;AACnB,6BAAa3K,EAAb,EAAiBsC,GAAjB,EAAsB;AAAA;;AACpB,SAAKtC,EAAL,GAAUA,EAAV;AACA,SAAKnS,KAAL,GAAa,4CAAAgU,CAASH,YAAT,SAAyB,KAAK1B,EAA9B,wBAAb;;AAEA,SAAKnS,KAAL,CAAW,iBAAX;;AAEA,SAAKyU,GAAL,GAAWA,GAAX;AACA,SAAKsI,SAAL,GAAiB,EAAjB;AACD;;;;wBAEIpF,K,EAAO;AACV,WAAK3X,KAAL,CAAW,YAAX,EAAyB2X,KAAzB;;AAEA,aAAO,KAAKoF,SAAL,CAAepF,KAAf,CAAP;AACD;;;6BAESA,K,EAAOC,Q,EAAU;AAAA;;AACzB,WAAK5X,KAAL,CAAW,aAAX,EAA0B2X,KAA1B;;AAEA,WAAKoF,SAAL,CAAepF,KAAf,IAAwB,YAAa;AACnC,cAAK3X,KAAL,CAAW,sBAAX,EAAmC2X,KAAnC;;AAEAC;AACD,OAJD;AAKD;;;+BAEWD,K,EAAO;AACjB,WAAK3X,KAAL,CAAW,kBAAX,EAA+B2X,KAA/B;;AAEA,UAAI,KAAKrD,MAAL,CAAYqD,KAAZ,CAAJ,EAAwB;AACtB,eAAO,KAAKoF,SAAL,CAAepF,KAAf,CAAP;AACD;AACF;;;2BAEOA,K,EAAO;AACb,WAAK3X,KAAL,CAAW,SAAX,EAAsB2X,KAAtB;;AAEA,aAAO,KAAKoF,SAAL,CAAelZ,cAAf,CAA8B8T,KAA9B,CAAP;AACD;;AAED;;;;+BACY7Y,O,EAAS;AACnB,WAAKkB,KAAL,CAAW,eAAX,EAA4BlB,OAA5B;;AAEA,UAAI6Y,QAAQ7Y,QAAQ2Y,eAApB;;AAEA,UAAI,CAAC,KAAKnD,MAAL,CAAYqD,KAAZ,CAAL,EAAyB;AACvB,aAAK3X,KAAL,qBAA6B2X,KAA7B,yBAAwD7Y,OAAxD;;AAEA;AACD;;AAED,UAAI;AACF,aAAKke,GAAL,CAASrF,KAAT,EAAgB7Y,OAAhB;AACD,OAFD,CAGA,OAAOmB,CAAP,EAAU;AACR,aAAKwU,GAAL,CAASoG,MAAT,CAAgB1c,SAAhB,CAA6BwZ,KAA7B,yBAAwD1X,CAAxD;AACD;AACF;;;;;;+DA3DkB6c,iB;;;;;;;;;;;;;;;;;;;;;;;ACPrB;AACA;;AAEA,IAAMjJ,eAAe,kBAArB;AACA,IAAM7T,QAAQ,4CAAAgU,CAASH,YAAT,gBAAd;AACA,IAAMoJ,QAAQ,4CAAAjJ,YAAeH,YAAf,gBAAd;;AAEA;;;;;;;;;;;;;;IAaqBsH,S;;;4BACH1G,G,EAAK4F,c,EAAgB;AACnC,aAAO,IAAIc,SAAJ,CAAc1G,GAAd,EAAmB4F,cAAnB,CAAP;AACD;;;AAED,qBAAa5F,GAAb,EAAkB4F,cAAlB,EAAkC;AAAA;;AAAA;;AAChCra,UAAM,aAAN;;AAEA,SAAKkd,KAAL,GAAa,cAAb;;AAEA,SAAKC,YAAL,GAAoB,CAApB;AACA,SAAKC,YAAL,GAAoB,CAApB;AACA,SAAKC,WAAL,GAAmB,CACjB,YADiB,EAEjB,eAFiB,EAGjB,mBAHiB,CAAnB;;AAMA,SAAK5I,GAAL,GAAWA,GAAX;AACA,SAAK4F,cAAL,GAAsBA,cAAtB;AACA,SAAKiD,GAAL,GAAW,KAAKjD,cAAL,CAAoB3H,EAApB,GAAyBF,UAAzB,CAAoCL,EAA/C;AACA,SAAKA,EAAL,GAAU,KAAKmL,GAAL,CAAS9d,OAAT,CAAiB,YAAjB,EAA+B,EAA/B,CAAV;AACA,SAAKwZ,YAAL,GAAoBnb,SAAS4d,cAAT,CAAwB,KAAK6B,GAA7B,CAApB;;AAEA,QAAI,CAAC,KAAKtE,YAAV,EAAwB;AACtB,YAAM,IAAIpW,KAAJ,oDAA2D,KAAK0a,GAAhE,QAAN;AACD;;AAED,SAAKC,yBAAL,GAAiC;AAC/BC,kBAAY,sBAAa;AACvBxd,cAAM,cAAN;;AAEA,YAAI,MAAKyd,WAAL,CAAiBC,UAAjB,KAAgC,MAApC,EAA4C;AAC1C,gBAAKC,sBAAL;AACA;AACD;;AAED;AACA;AACA;AACA,YAAMC,kBAAkBvG,YAAY,YAAM;AACxC,cAAI,MAAKoG,WAAL,CAAiBC,UAAjB,KAAgC,MAApC,EAA4C;AAC1C,kBAAKC,sBAAL;AACArG,0BAAcsG,eAAd;AACD;AACF,SALuB,EAKrB,IALqB,CAAxB;AAMD,OAlB8B;AAmB/BC,mBAAa,uBAAa;AACxB7d,cAAM,eAAN;;AAEA;AACA,cAAK8d,IAAL;AACA,cAAKC,mBAAL,GAA2B,KAA3B;AACD,OAzB8B;AA0B/BjR,aAAO,eAAC7M,CAAD,EAAO;AACZhC,gBAAQ6O,KAAR,CAAc,WAAd;AACA7O,gBAAQ6O,KAAR,CAAc7M,CAAd;AACD;AA7B8B,KAAjC;;AAgCA,SAAK+d,0BAAL,GAAkC;AAChCC,iBAAW;AAAA,eAAa,MAAKC,WAAL,wBAAb;AAAA,OADqB;AAEhCpR,aAAO,eAAC7M,CAAD,EAAO;AACZhC,gBAAQ6O,KAAR,CAAc,wBAAd;AACA7O,gBAAQ6O,KAAR,CAAc7M,CAAd;AACD;AAL+B,KAAlC;;AAQA,SAAKke,sBAAL,GAA8B;AAC5BC,wBAAkB,sDAAAvZ,CAChB;AAAA,eAAM,MAAKwZ,eAAL,EAAN;AAAA,OADgB,EAEhB,IAFgB,EAGhB;AACE9Y,iBAAS,IADX;AAEEE,kBAAU;AAFZ,OAHgB;AADU,KAA9B;;AAWA,SAAKoV,MAAL,GAAc,EAAd;AACA,SAAKyD,MAAL,GAAc,EAAd,CA3EgC,CA2Ed;;AAElB;AACA,SAAK,IAAItd,IAAI,CAAb,EAAgBA,IAAI,KAAKqc,WAAL,CAAiBjc,MAArC,EAA6CJ,GAA7C,EAAkD;AAChD,WAAK6Z,MAAL,CAAY,KAAKwC,WAAL,CAAiBrc,CAAjB,CAAZ,IAAmC,EAAnC;AACD;;AAED;AACA;AACA;AACA,SAAKud,eAAL,GAAuB,KAAvB;AACA,SAAKC,oBAAL,GAA4B,IAA5B;;AAEA,SAAKC,OAAL,GAAe,IAAf;AACA,SAAK5B,IAAL,GAAY,IAAZ;AACA,SAAK6B,SAAL,GAAiB,IAAjB;;AAEA,SAAKC,cAAL;AACD;;;;uBAEGjc,I,EAAMkc,M,EAAQ;AAChB5e,0CAAkC0C,IAAlC;;AAEA,UAAI,CAAC,KAAK2a,WAAL,CAAiBwB,QAAjB,CAA0Bnc,IAA1B,CAAL,EAAsC;AACpC,cAAM,IAAIE,KAAJ,OAAcF,IAAd,8BAAN;AACD;;AAED,WAAKmY,MAAL,CAAYnY,IAAZ,EAAkBN,IAAlB,CAAuBwc,MAAvB;AACD;;;4BAEQlc,I,EAAM;AACb1C,4BAAoB0C,IAApB;;AAEA,UAAI,CAAC,KAAK2a,WAAL,CAAiBwB,QAAjB,CAA0Bnc,IAA1B,CAAL,EAAsC;AACpC,cAAM,IAAIE,KAAJ,OAAcF,IAAd,8BAAN;AACD;;AAED,WAAK,IAAI1B,IAAI,CAAb,EAAgBA,IAAI,KAAK6Z,MAAL,CAAYnY,IAAZ,EAAkBtB,MAAtC,EAA8CJ,GAA9C,EAAmD;AACjD,aAAK6Z,MAAL,CAAYnY,IAAZ,EAAkB1B,CAAlB,EAAqB,IAArB;AACD;AACF;;;qCAEiB;AAChBhB,YAAM,gBAAN;;AAEA,WAAKkd,KAAL,GAAa,MAAb;AACA,WAAKa,mBAAL,GAA2B,KAA3B;AACD;;;6CAEyBW,S,EAAW;AACnC,UAAI,CAACphB,OAAO6b,WAAR,IAAuB,CAAC7b,OAAO6b,WAAP,CAAmB2F,eAAnB,CAAmCJ,SAAnC,CAA5B,EAA2E;AACzE,aAAKxB,KAAL,GAAa,wBAAb;;AAEA,YAAMpe,uCAAqC4f,SAA3C;;AAEA;AACA;AACA,aAAKrE,cAAL,CAAoB3K,MAApB,CAA2B0D,MAA3B,CAAkC;AAChC2L,0BAAgB;AACdpP,sBAAU,sBADI;AAEd7Q;AAFc;AADgB,SAAlC;;AAOA,aAAKub,cAAL,CAAoBvN,KAApB,CAA0B,EAAEyC,MAAM,gBAAR,EAA1B;;AAEA,cAAM,IAAI3M,KAAJ,CAAU9D,OAAV,CAAN;AACD;AACF;;;sCAEkB;AACjBkB,YAAM,iBAAN;;AAEA,WAAK2e,cAAL;;AAEA,UAAI,KAAKlB,WAAT,EAAsB;AACpB;AACAuB,YAAIC,eAAJ,CAAoB,KAAKxB,WAAzB;;AAEA;AACA;AACA,aAAKzE,YAAL,CAAkBzD,GAAlB,GAAwByJ,IAAIE,eAAJ,CAAoB,KAAKzB,WAAzB,CAAxB;AACD;AACF;;;8BAEU;AACTzd,YAAM,SAAN;;AAEA,WAAK8d,IAAL;AACA,WAAKzB,IAAL;AACD;;;yBAEKxC,U,EAAY;AAAA;;AAChB7Z,YAAM,MAAN;;AAEA,WAAKyU,GAAL,CAASF,OAAT,CAAiByD,WAAjB,gBACe1a,OAAO6hB,IAAP,CAAY,KAAK1K,GAAL,CAASE,MAAT,CAAgBkF,UAA5B,CADf,eAEE;AAAA,eAAa,OAAKuF,oBAAL,yBAAb;AAAA,OAFF,EAGE,EAAEhL,UAAU,KAAKK,GAAL,CAASE,MAAT,CAAgBP,QAA5B,EAHF;AAKD;;AAED;AACA;AACA;;;;yCACsBiL,S,EAAW;AAC/BpC,YAAM,sBAAN;;AAEA,UAAK,KAAKsB,eAAL,KAAyB,IAA1B,IAAoC,KAAKC,oBAAL,KAA8B,IAAtE,EAA6E;AAC3EvB,6BAAmBoC,UAAUje,MAA7B;;AAEA,YAAMke,WAAW,IAAIhiB,OAAOiiB,IAAP,CAAYC,IAAZ,CAAiBC,OAArB,CAA6BJ,SAA7B,CAAjB;AACAC,iBAAS7H,eAAT,GAA2B,KAAK+G,oBAAhC;AACAlhB,eAAOoiB,UAAP,CAAkBC,IAAlB,CAAuBL,QAAvB;AACD;;AAED;AACA,WAAK7K,GAAL,CAAS8F,QAAT,CAAkBC,SAAlB,IAA+B6E,UAAUje,MAAzC;AACD;;;kCAEc;AACbnD,cAAQrB,GAAR,CAAY,oBAAZ;AACAoD,YAAM,oBAAN;;AAEA,UAAI,KAAK4f,YAAL,CAAkBC,QAAlB,CAA2Bze,MAA3B,IAAqC,CAAzC,EAA4C;AAC1C;AACD;;AAED,UAAM0e,QAAQzhB,SAAS,KAAKuhB,YAAL,CAAkBC,QAAlB,CAA2BC,KAA3B,CAAiC,CAAjC,CAAT,CAAd;AACA,UAAMC,MAAM1hB,SAAS,KAAKuhB,YAAL,CAAkBC,QAAlB,CAA2BE,GAA3B,CAA+B,CAA/B,CAAT,CAAZ;AACA,UAAMC,eAAeD,MAAMD,KAA3B;;AAEA7hB,cAAQrB,GAAR,CAAYkjB,KAAZ,EAAmBC,GAAnB,EAAwBC,YAAxB;AACA,UAAIA,gBAAgB,CAApB,EAAuB;AACrB;AACD;;AAED,UAAI,KAAKJ,YAAL,CAAkBK,QAAlB,KAA+B,KAAnC,EAA0C;AACxC,aAAKL,YAAL,CAAkBM,KAAlB;AACD;;AAEDjiB,cAAQrB,GAAR,CAAY,aAAZ;AACA,WAAKgjB,YAAL,CAAkBO,MAAlB,CAAyBL,KAAzB,EAAgCC,MAAM,CAAtC;AACD;;;gCAEYK,O,EAAS;AACpBniB,cAAQrB,GAAR,CAAY,OAAZ;AACAqgB,YAAM,wBAAN;;AAEA,UAAI,CAACmD,OAAL,EAAc;AACZniB,gBAAQyV,IAAR,CAAa,0BAAb;AACA;AACD;;AAED;AACA,UAAI,KAAKkM,YAAL,CAAkBK,QAAlB,KAA+B,IAAnC,EAAyC;AACvCjgB,cAAM,8CAAN;AACA;AACD;;AAED,UAAI;AACFA,cAAM,mCAAN;AACA,aAAKqgB,oBAAL,CAA0BD,OAA1B;AACA,aAAKR,YAAL,CAAkBU,YAAlB,CAA+BF,OAA/B;AACD,OAJD,CAKA,OAAOngB,CAAP,EAAU;AACR;AACA;AACA;AACA;;AAEAhC,gBAAQ6O,KAAR,CAAc,mCAAd,EAAmD7M,CAAnD;AACA,aAAKoe,eAAL;AACD;AACF;;;2BAEO;AACNre,YAAM,MAAN;;AAEA,WAAKye,OAAL,GAAe,IAAf;;AAEA,UAAI,KAAK5B,IAAL,KAAcvZ,SAAlB,EAA6B;AAC3B,aAAKmR,GAAL,CAASF,OAAT,CAAiBuD,WAAjB,gBAA0C,KAAK+E,IAA/C;AACD;;AAED,WAAK8B,cAAL;;AAEA,WAAKlK,GAAL,CAASF,OAAT,CAAiBwD,OAAjB,gBACe,KAAK8E,IADpB,YAEE,EAAEzI,UAAU,KAAKK,GAAL,CAASE,MAAT,CAAgBP,QAA5B,EAFF;AAID;;;mCAEe;AAAA;;AACd;AACA;AACApU,YAAM,4BAAN;;AAEA,WAAKyU,GAAL,CAASF,OAAT,CAAiBmD,SAAjB,gBAAwC,KAAKmF,IAA7C,cAA4D,YAAM;AAChE7c,cAAM,iDAAN;AACA,eAAKqe,eAAL;AACD,OAHD;AAID;;AAED;;;;+CAC2C;AAAA;;AAAA,UAAnBK,SAAmB,QAAnBA,SAAmB;AAAA,UAAR7B,IAAQ,QAARA,IAAQ;;AACzC7c,YAAM,sBAAN;;AAEA,WAAKugB,wBAAL,CAA8B7B,SAA9B;;AAEA,UAAM8B,mBAAsB,KAAK/L,GAAL,CAASE,MAAT,CAAgBP,QAAtC,sBAA+D/V,SAAS6C,KAAK+M,MAAL,KAAgB,OAAzB,CAArE;;AAEA,WAAKiP,KAAL,GAAa,wBAAb;;AAEA,WAAKzI,GAAL,CAASF,OAAT,CAAiBmD,SAAjB,CAA2B8I,gBAA3B,EAA6C,iBAAsB;AAAA,YAAnBC,YAAmB,SAAnBA,YAAmB;;AACjEzgB,wCAA8BwgB,gBAA9B;AACAxgB,kDAAuCygB,YAAvC,yCAAuCA,YAAvC;;AAEA,YAAMC,OAAOD,YAAb;;AAEA,eAAKvD,KAAL,GAAa,wBAAb;;AAEA,eAAKzI,GAAL,CAASF,OAAT,CAAiBuD,WAAjB,CAA6B0I,gBAA7B;;AAEA,YAAMG,0BAAwB9D,IAAxB,UAAN;;AAEA;AACA,eAAKpI,GAAL,CAASF,OAAT,CAAiBmD,SAAjB,CACEiJ,QADF,EAEE;AAAA,iBAAa,OAAKC,MAAL,yBAAb;AAAA,SAFF;;AAKA,eAAK/D,IAAL,GAAYA,IAAZ;AACA,eAAK4B,OAAL,GAAeiC,IAAf;AACA,eAAKhC,SAAL,GAAiBA,SAAjB;;AAEA7gB,iBAASqW,gBAAT,CAA0B,kBAA1B,EAA8C,OAAKiK,sBAAL,CAA4BC,gBAA1E;;AAEA,eAAKrC,OAAL,CAAa,YAAb;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAIV,QAAQ,OAAKrC,YAAL,CAAkB6H,SAAlB,EAAZ;AACA,YAAInF,SAAS,OAAK1C,YAAL,CAAkBC,UAA/B;;AAEA,YAAIyC,WAAW,IAAf,EAAqB;AACnBA,iBAAOoF,YAAP,CAAoBzF,KAApB,EAA2B,OAAKrC,YAAhC;AACA,iBAAKA,YAAL,GAAoBqC,KAApB;AACD;;AAED;AACA;;AAEA,eAAK0F,qBAAL;;AAEA;AACA;AACA,eAAK/H,YAAL,CAAkBzD,GAAlB,GAAwByJ,IAAIE,eAAJ,CAAoB,OAAKzB,WAAzB,CAAxB;;AAEA,eAAKuD,YAAL;AACD,OAjDD;;AAmDA,WAAKvM,GAAL,CAASF,OAAT,CAAiBwD,OAAjB,gBAAsC8E,IAAtC,YAAmD;AACjD2D,0CADiD;AAEjDpM,kBAAU,KAAKK,GAAL,CAASE,MAAT,CAAgBP;AAFuB,OAAnD;AAID;;;kCAEyB;AAAA,UAAhBqM,YAAgB,SAAhBA,YAAgB;;AACxBxD,YAAM,QAAN;;AAEA,WAAKC,KAAL,GAAa,SAAb;;AAEA,UAAI,KAAKa,mBAAL,KAA6B,KAAjC,EAAwC;AACtC/d,cAAM,4CAAN;AACA;AACD;;AAED,WAAK+b,OAAL,CAAa,eAAb;;AAEA,WAAKkF,WAAL,CAAiBR,YAAjB;AACD;;AAED;;;;6CAC0B;AACxBzgB,YAAM,wBAAN;;AAEA;AACA,WAAK4f,YAAL,GAAoB,KAAKnC,WAAL,CAAiByD,eAAjB,CAAiC,KAAKxC,SAAtC,CAApB;AACA,WAAKkB,YAAL,CAAkBpK,IAAlB,GAAyB,UAAzB;;AAEA;AACA,WAAKoK,YAAL,CAAkB1L,gBAAlB,CAAmC,OAAnC,EAA4C,KAAK8J,0BAAL,CAAgClR,KAA5E;;AAEA;AACA,WAAKiR,mBAAL,GAA2B,IAA3B;;AAEA,UAAI,CAAC,KAAKU,OAAV,EAAmB;AACjB;AACA;AACD;;AAED,WAAK4B,oBAAL,CAA0B,KAAK5B,OAA/B;AACA,WAAKmB,YAAL,CAAkBU,YAAlB,CAA+B,KAAK7B,OAApC;;AAEA,WAAK1C,OAAL,CAAa,mBAAb;AACD;;;4CAEwB;AACvB,UAAI,KAAK0B,WAAT,EAAsB;AACpB,aAAK0D,kBAAL;AACD;;AAED;AACA,WAAK1D,WAAL,GAAmB,IAAIngB,OAAO6b,WAAX,EAAnB;;AAEA,WAAKsE,WAAL,CAAiBvJ,gBAAjB,CAAkC,YAAlC,EAAgD,KAAKqJ,yBAAL,CAA+BC,UAA/E;AACA,WAAKC,WAAL,CAAiBvJ,gBAAjB,CAAkC,aAAlC,EAAiD,KAAKqJ,yBAAL,CAA+BM,WAAhF;AACA,WAAKJ,WAAL,CAAiBvJ,gBAAjB,CAAkC,OAAlC,EAA2C,KAAKqJ,yBAAL,CAA+BzQ,KAA1E;AACD;;;0CAEsB;AACrB,UAAI,CAAC,KAAK8S,YAAV,EAAwB;AACtB;AACD;;AAED,WAAKA,YAAL,CAAkBM,KAAlB;;AAEA;AACA,WAAKN,YAAL,CAAkBwB,mBAAlB,CAAsC,OAAtC,EAA+C,KAAKpD,0BAAL,CAAgClR,KAA/E;;AAEA,WAAK8S,YAAL,GAAoB,IAApB;AACA,WAAK7B,mBAAL,GAA2B,KAA3B;AACD;;;yCAEqB;AACpB,UAAI,CAAC,KAAKN,WAAV,EAAuB;AACrB;AACD;;AAED,WAAKA,WAAL,CAAiB2D,mBAAjB,CAAqC,YAArC,EAAmD,KAAK7D,yBAAL,CAA+BC,UAAlF;AACA,WAAKC,WAAL,CAAiB2D,mBAAjB,CAAqC,aAArC,EAAoD,KAAK7D,yBAAL,CAA+BM,WAAnF;AACA,WAAKJ,WAAL,CAAiB2D,mBAAjB,CAAqC,OAArC,EAA8C,KAAK7D,yBAAL,CAA+BzQ,KAA7E;;AAEA,UAAIuU,gBAAgB,KAAK5D,WAAL,CAAiB4D,aAArC;;AAEA,UAAIA,cAAcC,aAAlB,EAAiC;AAC/B;AACAD,wBAAgBA,cAAcC,aAAd,EAAhB;AACD;;AAED,WAAK,IAAItgB,IAAI,CAAb,EAAgBA,IAAIqgB,cAAcjgB,MAAlC,EAA0CJ,GAA1C,EAA+C;AAC7C,aAAKyc,WAAL,CAAiB8D,kBAAjB,CAAoCF,cAAcrgB,CAAd,CAApC;AACD;;AAED,WAAKyc,WAAL,GAAmB,IAAnB;AACD;;;8BAEU;AACT,WAAKK,IAAL;;AAEAjgB,eAASujB,mBAAT,CAA6B,kBAA7B,EAAiD,KAAKjD,sBAAL,CAA4BC,gBAA7E;;AAEA,WAAK3J,GAAL,GAAW,IAAX;AACA,WAAK4F,cAAL,GAAsB,IAAtB;AACA,WAAKrB,YAAL,GAAoB,IAApB;AACA,WAAK6B,MAAL,GAAc,IAAd;AACA,WAAKyD,MAAL,GAAc,IAAd;AACA,WAAKC,eAAL,GAAuB,IAAvB;AACA,WAAKC,oBAAL,GAA4B,IAA5B;AACA,WAAK3B,IAAL,GAAY,IAAZ;AACA,WAAK4B,OAAL,GAAe,IAAf;AACA,WAAKC,SAAL,GAAiB,IAAjB;;AAEA,WAAK8C,mBAAL;AACA,WAAKL,kBAAL;;AAEA,WAAKnD,0BAAL,GAAkC,IAAlC;AACA,WAAKT,yBAAL,GAAiC,IAAjC;AACA,WAAKY,sBAAL,GAA8B,IAA9B;AACD;;AAED;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;+DAnlBmBhD,S;AAolBpB,C;;;;;;;;;;;;ACxmBD;AAAA,IAAMsG,yBAAyB,EAA/B;;AAEA,SAASC,mBAAT,GAAgC;AAC9B;AACA,MAAMC,WAAYC,QAAQtkB,OAAOJ,MAAf,KAA0B0kB,QAAQtkB,OAAOJ,MAAP,CAAc2kB,QAAtB,CAA5C;;AAEA,MAAI,CAACF,QAAL,EAAe;AACb,WAAO,KAAP;AACD;;AAED,MAAI;AACF,WAAQtjB,SAASZ,UAAUC,SAAV,CAAoBE,KAApB,CAA0B,0BAA1B,EAAsD,CAAtD,CAAT,EAAmE,EAAnE,KAA0E6jB,sBAAlF;AACD,GAFD,CAGA,OAAO3U,KAAP,EAAc;AACZ,WAAO,KAAP;AACD;AACF;;AAED,+DAAe;AACbgJ,aAAW4L;AADE,CAAf,E;;;;;;;;;;;;;;;;;;;;;AClBA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAMI,aAAa,kEAAAzL,EAAnB;;AAEAyL,WAAWC,QAAX;;AAEA,+DAAeD,UAAf,E;;;;;;;;;;;AChBA,yC;;;;;;;;;;;ACAA,yB","file":"videojs-mse-over-clsp.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/videojs-mse-over-clsp.js\");\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","(function(root, factory) {\n\t// `root` does not resolve to the global window object in a Browserified\n\t// bundle, so a direct reference to that object is used instead.\n\tvar _srcDoc = window.srcDoc;\n\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(['exports'], function(exports) {\n\t\t\tfactory(exports, _srcDoc);\n\t\t\troot.srcDoc = exports;\n\t\t});\n\t} else if (typeof exports === \"object\") {\n\t\tfactory(exports, _srcDoc);\n\t} else {\n\t\troot.srcDoc = {};\n\t\tfactory(root.srcDoc, _srcDoc);\n\t}\n})(this, function(exports, _srcDoc) {\n\tvar idx, iframes;\n\tvar isCompliant = !!(\"srcdoc\" in document.createElement(\"iframe\"));\n\tvar sandboxMsg = \"Polyfill may not function in the presence of the \" +\n\t\t\"`sandbox` attribute. Consider using the `force` option.\";\n\tvar sandboxAllow = /\\ballow-same-origin\\b/;\n\t/**\n\t * Determine if the operation may be blocked by the `sandbox` attribute in\n\t * some environments, and optionally issue a warning or remove the\n\t * attribute.\n\t */\n\tvar validate = function( iframe, options ) {\n\t\tvar sandbox = iframe.getAttribute(\"sandbox\");\n\t\tif (typeof sandbox === \"string\" && !sandboxAllow.test(sandbox)) {\n\t\t\tif (options && options.force) {\n\t\t\t\tiframe.removeAttribute(\"sandbox\");\n\t\t\t} else if (!options || options.force !== false) {\n\t\t\t\tlogError(sandboxMsg);\n\t\t\t\tiframe.setAttribute(\"data-srcdoc-polyfill\", sandboxMsg);\n\t\t\t}\n\t\t}\n\t};\n\tvar implementations = {\n\t\tcompliant: function( iframe, content, options ) {\n\n\t\t\tif (content) {\n\t\t\t\tvalidate(iframe, options);\n\t\t\t\tiframe.setAttribute(\"srcdoc\", content);\n\t\t\t}\n\t\t},\n\t\tlegacy: function( iframe, content, options ) {\n\n\t\t\tvar jsUrl;\n\n\t\t\tif (!iframe || !iframe.getAttribute) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!content) {\n\t\t\t\tcontent = iframe.getAttribute(\"srcdoc\");\n\t\t\t} else {\n\t\t\t\tiframe.setAttribute(\"srcdoc\", content);\n\t\t\t}\n\n\t\t\tif (content) {\n\t\t\t\tvalidate(iframe, options);\n\n\t\t\t\t// The value returned by a script-targeted URL will be used as\n\t\t\t\t// the iFrame's content. Create such a URL which returns the\n\t\t\t\t// iFrame element's `srcdoc` attribute.\n\t\t\t\tjsUrl = \"javascript: window.frameElement.getAttribute('srcdoc');\";\n\n\t\t\t\t// Explicitly set the iFrame's window.location for\n\t\t\t\t// compatability with IE9, which does not react to changes in\n\t\t\t\t// the `src` attribute when it is a `javascript:` URL, for\n\t\t\t\t// some reason\n\t\t\t\tif (iframe.contentWindow) {\n\t\t\t\t\tiframe.contentWindow.location = jsUrl;\n\t\t\t\t}\n\n\t\t\t\tiframe.setAttribute(\"src\", jsUrl);\n\t\t\t}\n\t\t}\n\t};\n\tvar srcDoc = exports;\n\tvar logError;\n\n\tif (window.console && window.console.error) {\n\t\tlogError = function(msg) {\n\t\t\twindow.console.error(\"[srcdoc-polyfill] \" + msg);\n\t\t};\n\t} else {\n\t\tlogError = function() {};\n\t}\n\n\t// Assume the best\n\tsrcDoc.set = implementations.compliant;\n\tsrcDoc.noConflict = function() {\n\t\twindow.srcDoc = _srcDoc;\n\t\treturn srcDoc;\n\t};\n\n\t// If the browser supports srcdoc, no shimming is necessary\n\tif (isCompliant) {\n\t\treturn;\n\t}\n\n\tsrcDoc.set = implementations.legacy;\n\n\t// Automatically shim any iframes already present in the document\n\tiframes = document.getElementsByTagName(\"iframe\");\n\tidx = iframes.length;\n\n\twhile (idx--) {\n\t\tsrcDoc.set( iframes[idx] );\n\t}\n\n});\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","/*! @name videojs-errors @version 4.1.1 @license Apache-2.0 */\nimport videojs from 'video.js';\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nvar empty = {};\n\nvar empty$1 = /*#__PURE__*/Object.freeze({\n\tdefault: empty\n});\n\nvar minDoc = ( empty$1 && empty ) || empty$1;\n\nvar topLevel = typeof commonjsGlobal !== 'undefined' ? commonjsGlobal :\n    typeof window !== 'undefined' ? window : {};\n\n\nvar doccy;\n\nif (typeof document !== 'undefined') {\n    doccy = document;\n} else {\n    doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'];\n\n    if (!doccy) {\n        doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'] = minDoc;\n    }\n}\n\nvar document_1 = doccy;\n\nvar version = \"4.1.1\";\n\nconst FlashObj = videojs.getComponent('Flash');\nconst defaultDismiss = !videojs.browser.IS_IPHONE;\n\n// Video.js 5/6 cross-compatibility.\nconst registerPlugin = videojs.registerPlugin || videojs.plugin;\n\n// Default options for the plugin.\nconst defaults = {\n  header: '',\n  code: '',\n  message: '',\n  timeout: 45 * 1000,\n  dismiss: defaultDismiss,\n  progressDisabled: false,\n  errors: {\n    '1': {\n      type: 'MEDIA_ERR_ABORTED',\n      headline: 'The video download was cancelled'\n    },\n    '2': {\n      type: 'MEDIA_ERR_NETWORK',\n      headline: 'The video connection was lost, please confirm you are ' +\n                'connected to the internet'\n    },\n    '3': {\n      type: 'MEDIA_ERR_DECODE',\n      headline: 'The video is bad or in a format that cannot be played on your browser'\n    },\n    '4': {\n      type: 'MEDIA_ERR_SRC_NOT_SUPPORTED',\n      headline: 'This video is either unavailable or not supported in this browser'\n    },\n    '5': {\n      type: 'MEDIA_ERR_ENCRYPTED',\n      headline: 'The video you are trying to watch is encrypted and we do not know how ' +\n                'to decrypt it'\n    },\n    'unknown': {\n      type: 'MEDIA_ERR_UNKNOWN',\n      headline: 'An unanticipated problem was encountered, check back soon and try again'\n    },\n    '-1': {\n      type: 'PLAYER_ERR_NO_SRC',\n      headline: 'No video has been loaded'\n    },\n    '-2': {\n      type: 'PLAYER_ERR_TIMEOUT',\n      headline: 'Could not download the video'\n    },\n    'PLAYER_ERR_DOMAIN_RESTRICTED': {\n      headline: 'This video is restricted from playing on your current domain'\n    },\n    'PLAYER_ERR_IP_RESTRICTED': {\n      headline: 'This video is restricted at your current IP address'\n    },\n    'PLAYER_ERR_GEO_RESTRICTED': {\n      headline: 'This video is restricted from playing in your current geographic region'\n    },\n    'FLASHLS_ERR_CROSS_DOMAIN': {\n      headline: 'The video could not be loaded: crossdomain access denied.'\n    }\n  }\n};\n\nconst initPlugin = function(player, options) {\n  let monitor;\n  let waiting;\n  let isStalling;\n  const listeners = [];\n\n  const updateErrors = function(updates) {\n    options.errors = videojs.mergeOptions(options.errors, updates);\n\n    // Create `code`s from errors which don't have them (based on their keys).\n    Object.keys(options.errors).forEach(k => {\n      const err = options.errors[k];\n\n      if (!err.type) {\n        err.type = k;\n      }\n    });\n  };\n\n  // Make sure we flesh out initially-provided errors.\n  updateErrors();\n\n  // clears the previous monitor timeout and sets up a new one\n  const resetMonitor = function() {\n    // at this point the player has recovered\n    player.clearTimeout(waiting);\n    if (isStalling) {\n      isStalling = false;\n      player.removeClass('vjs-waiting');\n    }\n\n    // start the loading spinner if player has stalled\n    waiting = player.setTimeout(function() {\n      // player already has an error\n      // or is not playing under normal conditions\n      if (player.error() || player.paused() || player.ended()) {\n        return;\n      }\n\n      isStalling = true;\n      player.addClass('vjs-waiting');\n    }, 1000);\n\n    player.clearTimeout(monitor);\n    monitor = player.setTimeout(function() {\n      // player already has an error\n      // or is not playing under normal conditions\n      if (player.error() || player.paused() || player.ended()) {\n        return;\n      }\n\n      player.error({\n        code: -2,\n        type: 'PLAYER_ERR_TIMEOUT'\n      });\n    }, options.timeout);\n\n    // clear out any existing player timeout\n    // playback has recovered\n    if (player.error() && player.error().code === -2) {\n      player.error(null);\n    }\n  };\n\n  // clear any previously registered listeners\n  const cleanup = function() {\n    let listener;\n\n    while (listeners.length) {\n      listener = listeners.shift();\n      player.off(listener[0], listener[1]);\n    }\n    player.clearTimeout(monitor);\n    player.clearTimeout(waiting);\n  };\n\n  // creates and tracks a player listener if the player looks alive\n  const healthcheck = function(type, fn) {\n    const check = function() {\n      // if there's an error do not reset the monitor and\n      // clear the error unless time is progressing\n      if (!player.error()) {\n        // error if using Flash and its API is unavailable\n        const tech = player.$('.vjs-tech');\n\n        if (tech &&\n            tech.type === 'application/x-shockwave-flash' &&\n            !tech.vjs_getProperty) {\n          player.error({\n            code: -2,\n            type: 'PLAYER_ERR_TIMEOUT'\n          });\n          return;\n        }\n\n        // playback isn't expected if the player is paused\n        if (player.paused()) {\n          return resetMonitor();\n        }\n        // playback isn't expected once the video has ended\n        if (player.ended()) {\n          return resetMonitor();\n        }\n      }\n\n      fn.call(this);\n    };\n\n    player.on(type, check);\n    listeners.push([type, check]);\n  };\n\n  const onPlayStartMonitor = function() {\n    let lastTime = 0;\n\n    cleanup();\n\n    // if no playback is detected for long enough, trigger a timeout error\n    resetMonitor();\n    healthcheck(['timeupdate', 'adtimeupdate'], function() {\n      const currentTime = player.currentTime();\n\n      // playback is operating normally or has recovered\n      if (currentTime !== lastTime) {\n        lastTime = currentTime;\n        resetMonitor();\n      }\n    });\n\n    if (!options.progressDisabled) {\n      healthcheck('progress', resetMonitor);\n    }\n  };\n\n  const onPlayNoSource = function() {\n    if (!player.currentSrc()) {\n      player.error({\n        code: -1,\n        type: 'PLAYER_ERR_NO_SRC'\n      });\n    }\n  };\n\n  const onErrorHandler = function() {\n    let details = '';\n    let error = player.error();\n    const content = document_1.createElement('div');\n    let dialogContent = '';\n\n    // In the rare case when `error()` does not return an error object,\n    // defensively escape the handler function.\n    if (!error) {\n      return;\n    }\n\n    error = videojs.mergeOptions(error, options.errors[error.code || error.type || 0]);\n\n    if (error.message) {\n      details = `<div class=\"vjs-errors-details\">${player.localize('Technical details')}\n        : <div class=\"vjs-errors-message\">${player.localize(error.message)}</div>\n        </div>`;\n    }\n\n    if (error.code === 4 && FlashObj && !FlashObj.isSupported()) {\n      const flashMessage = player.localize(\n        'If you are using an older browser please try upgrading or installing Flash.'\n      );\n\n      details += `<span class=\"vjs-errors-flashmessage\">${flashMessage}</span>`;\n    }\n\n    const display = player.getChild('errorDisplay');\n\n    content.className = 'vjs-errors-dialog';\n    content.id = 'vjs-errors-dialog';\n    dialogContent =\n     `<div class=\"vjs-errors-content-container\">\n      <h2 class=\"vjs-errors-headline\">${this.localize(error.headline)}</h2>\n        <div><b>${this.localize('Error Code')}</b>: ${(error.type || error.code)}</div>\n        ${details}\n      </div>`;\n\n    const closeable = display.closeable(!('dismiss' in error) || error.dismiss);\n\n    // We should get a close button\n    if (closeable) {\n      dialogContent +=\n       `<div class=\"vjs-errors-ok-button-container\">\n          <button class=\"vjs-errors-ok-button\">${this.localize('OK')}</button>\n        </div>`;\n      content.innerHTML = dialogContent;\n      display.fillWith(content);\n      // Get the close button inside the error display\n      display.contentEl().firstChild.appendChild(display.getChild('closeButton').el());\n\n      const okButton = display.el().querySelector('.vjs-errors-ok-button');\n\n      player.on(okButton, 'click', function() {\n        display.close();\n      });\n    } else {\n      content.innerHTML = dialogContent;\n      display.fillWith(content);\n    }\n\n    if (player.currentWidth() <= 600 || player.currentHeight() <= 250) {\n      display.addClass('vjs-xs');\n    }\n\n    display.one('modalclose', () => player.error(null));\n  };\n\n  const onDisposeHandler = function() {\n    cleanup();\n\n    player.removeClass('vjs-errors');\n    player.off('play', onPlayStartMonitor);\n    player.off('play', onPlayNoSource);\n    player.off('dispose', onDisposeHandler);\n    player.off(['aderror', 'error'], onErrorHandler);\n  };\n\n  const reInitPlugin = function(newOptions) {\n    onDisposeHandler();\n    initPlugin(player, videojs.mergeOptions(defaults, newOptions));\n  };\n\n  reInitPlugin.extend = (errors) => updateErrors(errors);\n  reInitPlugin.getAll = () => videojs.mergeOptions(options.errors);\n\n  // Get / set timeout value. Restart monitor if changed.\n  reInitPlugin.timeout = function(timeout) {\n    if (typeof timeout === 'undefined') {\n      return options.timeout;\n    }\n    if (timeout !== options.timeout) {\n      options.timeout = timeout;\n      if (!player.paused()) {\n        onPlayStartMonitor();\n      }\n    }\n  };\n\n  reInitPlugin.disableProgress = function(disabled) {\n    options.progressDisabled = disabled;\n    onPlayStartMonitor();\n  };\n\n  player.on('play', onPlayStartMonitor);\n  player.on('play', onPlayNoSource);\n  player.on('dispose', onDisposeHandler);\n  player.on(['aderror', 'error'], onErrorHandler);\n\n  player.ready(() => {\n    player.addClass('vjs-errors');\n  });\n\n  // if the plugin is re-initialised during playback, start the timeout handler.\n  if (!player.paused()) {\n    onPlayStartMonitor();\n  }\n\n  // Include the version number.\n  reInitPlugin.VERSION = version;\n\n  player.errors = reInitPlugin;\n};\n\nconst errors = function(options) {\n  initPlugin(this, videojs.mergeOptions(defaults, options));\n};\n\n['extend', 'getAll', 'disableProgress'].forEach(k => {\n  errors[k] = function() {\n    videojs.log.warn(\n      `The errors.${k}() method is not available until the plugin has been initialized!`\n    );\n  };\n});\n\n// Include the version number.\nerrors.VERSION = version;\n\n// Register the plugin with video.js.\nregisterPlugin('errors', errors);\n\nexport default errors;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import Debug from 'debug';\n\nconst DEBUG_PREFIX = 'skyline:clsp';\n\nlet singleton;\n\nexport default class MqttConduitCollection {\n  static factory () {\n    if (!singleton) {\n      singleton = new MqttConduitCollection();\n    }\n\n    return singleton;\n  }\n\n  constructor () {\n    this.debug = Debug(`${DEBUG_PREFIX}:MqttConduitCollection`);\n\n    this.debug('constructing...');\n\n    this._conduits = {};\n\n    window.addEventListener('message', (event) => {\n      this.debug('window on message');\n\n      const clientId = event.data.clientId;\n\n      if (!this.exists(clientId)) {\n        console.error(`No conduit with id \"${clientId}\" exists!`);\n        return;\n      }\n\n      const conduit = this.getById(clientId);\n      const iov = conduit.iov;\n\n      iov.onMessage(event);\n    });\n  }\n\n  set (id, conduit) {\n    this.debug('setting...', id, conduit);\n\n    this._conduits[id] = conduit;\n\n    return conduit;\n  }\n\n  addFromIov (iov) {\n    this.debug('adding from iov...', iov);\n\n    const conduit = this.exists(iov.config.clientId)\n      ? this.getById(iov.config.clientId)\n      : window.mqttConduit(iov);\n\n    return this.set(iov.config.clientId, conduit);\n  }\n\n  getById (id) {\n    this.debug('getting...', id);\n\n    return this._conduits[id];\n  }\n\n  exists (id) {\n    this.debug('exists?', id);\n\n    return this._conduits.hasOwnProperty(id);\n  }\n}\n","import Debug from 'debug';\nimport videojs from 'video.js';\n\nimport IOV from './iov/IOV';\n\nconst Component = videojs.getComponent('Component');\n\nconst DEBUG_PREFIX = 'skyline:clsp';\n\nexport default class MqttHandler extends Component {\n  constructor (source, tech, mqttConduitCollection, options) {\n    super(tech, options.mqtt);\n\n    this.debug = Debug(`${DEBUG_PREFIX}:MqttHandler`);\n    this.debug('constructor');\n\n    this.tech_ = tech;\n    this.source_ = source;\n\n    // @todo - is there a better way to do this where we don't pollute the\n    // top level namespace?\n    this.iov = null;\n    this.mqttConduitCollection = mqttConduitCollection;\n  }\n\n  createIOV (player) {\n    this.debug('createIOV');\n\n    this.updateIOV(IOV.fromUrl(\n      this.source_.src,\n      this.mqttConduitCollection,\n      player\n    ));\n  }\n\n  updateIOV (iov) {\n    this.debug('updateIOV');\n\n    if (this.iov) {\n      this.iov.destroy();\n    }\n\n    this.iov = iov;\n  }\n};\n","import Debug from 'debug';\nimport videojs from 'video.js';\n\nimport MqttHandler from './MqttHandler';\nimport utils from './utils';\n\nconst DEBUG_PREFIX = 'skyline:clsp';\n\nexport default function () {\n  const debug = Debug(`${DEBUG_PREFIX}:MqttSourceHandler`);\n\n  return function (mode, mqttConduitCollection) {\n    var obj = {\n      canHandleSource: function (srcObj, options = {}) {\n        debug('canHandleSource');\n\n        if (!srcObj.src) {\n          console.error('srcObj doesn\\'t contain src');\n          debug(srcObj);\n          return false;\n        }\n\n        if (!srcObj.src.startsWith('clsp')) {\n          console.error('srcObj.src is not clsp protocol');\n          return false;\n        }\n\n        if (!utils.supported()) {\n          debug('Browser not supported. Chrome 52+ is required.');\n          return false;\n        }\n\n        return obj.canPlayType(srcObj.type);\n      },\n      handleSource: function (source, tech, options = {}) {\n        debug('handleSource');\n\n        const localOptions = videojs.mergeOptions(videojs.options, options, { mqtt: { mode } });\n\n        tech.mqtt = new MqttHandler(source, tech, mqttConduitCollection, localOptions);\n\n        return tech.mqtt;\n      },\n      canPlayType: function (type) {\n        debug('canPlayType');\n\n        if (type === \"video/mp4; codecs='avc1.42E01E'\") {\n          return 'maybe';\n        }\n\n        console.error(`clsp type='${type}' rejected`);\n\n        return '';\n      },\n    };\n\n    return obj;\n  };\n}\n","import Debug from 'debug';\nimport videojs from 'video.js';\n\nimport { version as VERSION } from '../../package.json';\nimport MqttSourceHandler from './MqttSourceHandler';\nimport MqttConduitCollection from './MqttConduitCollection';\nimport utils from './utils';\n\nconst Plugin = videojs.getPlugin('plugin');\n\nconst DEBUG_PREFIX = 'skyline:clsp';\n\nlet registered = false;\n\nexport default function (defaults = {}) {\n  class MseOverMqttPlugin extends Plugin {\n    static register () {\n      if (registered) {\n        throw new Error('You can only register the clsp plugin once, and it has already been registered.');\n      }\n\n      // @todo - there is likely some way for videojs to tell us that the plugin has already\n      // been registered, or perhaps videojs itself will not let you register a plugin twice\n      registered = true;\n\n      videojs.getTech('Html5').registerSourceHandler(MqttSourceHandler()('html5', MqttConduitCollection.factory()), 0);\n      videojs.registerPlugin(MseOverMqttPlugin.pluginName, MseOverMqttPlugin);\n\n      return MseOverMqttPlugin;\n    }\n\n    constructor (player, options) {\n      super(player, options);\n\n      this.debug = Debug(`${DEBUG_PREFIX}:MseOverMqttPlugin`);\n      this.debug('constructor');\n\n      options = videojs.mergeOptions(defaults, options);\n\n      player.addClass('vjs-mse-over-mqtt');\n\n      if (options.customClass) {\n        player.addClass(options.customClass);\n      }\n\n      player.errors({\n        errors: {\n          PLAYER_ERR_NOT_COMPAT: {\n            headline: 'This browser is unsupported.',\n            message: 'Chrome 52+ is required.',\n          },\n        },\n        timeout: 120 * 1000,\n      });\n\n      if (!utils.supported()) {\n        return player.error({\n          code: 'PLAYER_ERR_NOT_COMPAT',\n          dismiss: false,\n        });\n      }\n\n      // Needed to make videojs-errors think that the video is progressing\n      // If we do not do this, videojs-errors will give us a timeout error\n      player._currentTime = 0;\n      player.currentTime = () => {\n        return player._currentTime++;\n      };\n\n      player.on('firstplay', (event) => {\n        this.debug('on firstplay');\n\n        // @todo - the use of the tech here is discouraged.  What is the \"right\" way to\n        // get the information from the mqttHandler?\n        const mqttHandler = player.tech(true).mqtt;\n\n        if (!mqttHandler) {\n          return console.error('src not in lookup table');\n        }\n\n        mqttHandler.createIOV(player);\n      });\n    }\n  }\n\n  MseOverMqttPlugin.pluginName = 'clsp';\n  MseOverMqttPlugin.VERSION = VERSION;\n  MseOverMqttPlugin.utils = utils;\n\n  return MseOverMqttPlugin;\n};\n","/*\nCreates a hidden iframe that is used to establish a dedicated mqtt websocket\nfor a single video. This is basically an in browser micro service which\nuses cross document communication to route data to and from the iframe.\n*/\n\n\n// The below string literals allow the iframe to be created completely withinjavascript allowing\n// the videojs to be completely protable.\n\n\n// this code is filled in by the gulpfile.js\nvar iframe_code = \"/*******************************************************************************\\n * Copyright (c) 2013, 2016 IBM Corp.\\n *\\n * All rights reserved. This program and the accompanying materials\\n * are made available under the terms of the Eclipse Public License v1.0\\n * and Eclipse Distribution License v1.0 which accompany this distribution.\\n *\\n * The Eclipse Public License is available at\\n *    http://www.eclipse.org/legal/epl-v10.html\\n * and the Eclipse Distribution License is available at\\n *   http://www.eclipse.org/org/documents/edl-v10.php.\\n *\\n *******************************************************************************/\\n(function(p,s){\\\"object\\\"===typeof exports&&\\\"object\\\"===typeof module?module.exports=s():\\\"function\\\"===typeof define&&define.amd?define(s):\\\"object\\\"===typeof exports?exports=s():(\\\"undefined\\\"===typeof p.Paho&&(p.Paho={}),p.Paho.MQTT=s())})(this,function(){return function(p){function s(a,b,c){b[c++]=a>>8;b[c++]=a%256;return c}function u(a,b,c,k){k=s(b,c,k);D(a,c,k);return k+b}function n(a){for(var b=0,c=0;c<a.length;c++){var k=a.charCodeAt(c);2047<k?(55296<=k&&56319>=k&&(c++,b++),b+=3):127<k?b+=2:b++}return b}\\nfunction D(a,b,c){for(var k=0;k<a.length;k++){var e=a.charCodeAt(k);if(55296<=e&&56319>=e){var g=a.charCodeAt(++k);if(isNaN(g))throw Error(f(h.MALFORMED_UNICODE,[e,g]));e=(e-55296<<10)+(g-56320)+65536}127>=e?b[c++]=e:(2047>=e?b[c++]=e>>6&31|192:(65535>=e?b[c++]=e>>12&15|224:(b[c++]=e>>18&7|240,b[c++]=e>>12&63|128),b[c++]=e>>6&63|128),b[c++]=e&63|128)}return b}function E(a,b,c){for(var k=\\\"\\\",e,g=b;g<b+c;){e=a[g++];if(!(128>e)){var m=a[g++]-128;if(0>m)throw Error(f(h.MALFORMED_UTF,[e.toString(16),m.toString(16),\\n\\\"\\\"]));if(224>e)e=64*(e-192)+m;else{var d=a[g++]-128;if(0>d)throw Error(f(h.MALFORMED_UTF,[e.toString(16),m.toString(16),d.toString(16)]));if(240>e)e=4096*(e-224)+64*m+d;else{var l=a[g++]-128;if(0>l)throw Error(f(h.MALFORMED_UTF,[e.toString(16),m.toString(16),d.toString(16),l.toString(16)]));if(248>e)e=262144*(e-240)+4096*m+64*d+l;else throw Error(f(h.MALFORMED_UTF,[e.toString(16),m.toString(16),d.toString(16),l.toString(16)]));}}}65535<e&&(e-=65536,k+=String.fromCharCode(55296+(e>>10)),e=56320+(e&\\n1023));k+=String.fromCharCode(e)}return k}var z=function(a,b){for(var c in a)if(a.hasOwnProperty(c))if(b.hasOwnProperty(c)){if(typeof a[c]!==b[c])throw Error(f(h.INVALID_TYPE,[typeof a[c],c]));}else{c=\\\"Unknown property, \\\"+c+\\\". Valid properties are:\\\";for(var k in b)b.hasOwnProperty(k)&&(c=c+\\\" \\\"+k);throw Error(c);}},v=function(a,b){return function(){return a.apply(b,arguments)}},h={OK:{code:0,text:\\\"AMQJSC0000I OK.\\\"},CONNECT_TIMEOUT:{code:1,text:\\\"AMQJSC0001E Connect timed out.\\\"},SUBSCRIBE_TIMEOUT:{code:2,\\ntext:\\\"AMQJS0002E Subscribe timed out.\\\"},UNSUBSCRIBE_TIMEOUT:{code:3,text:\\\"AMQJS0003E Unsubscribe timed out.\\\"},PING_TIMEOUT:{code:4,text:\\\"AMQJS0004E Ping timed out.\\\"},INTERNAL_ERROR:{code:5,text:\\\"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}\\\"},CONNACK_RETURNCODE:{code:6,text:\\\"AMQJS0006E Bad Connack return code:{0} {1}.\\\"},SOCKET_ERROR:{code:7,text:\\\"AMQJS0007E Socket error:{0}.\\\"},SOCKET_CLOSE:{code:8,text:\\\"AMQJS0008I Socket closed.\\\"},MALFORMED_UTF:{code:9,text:\\\"AMQJS0009E Malformed UTF data:{0} {1} {2}.\\\"},\\nUNSUPPORTED:{code:10,text:\\\"AMQJS0010E {0} is not supported by this browser.\\\"},INVALID_STATE:{code:11,text:\\\"AMQJS0011E Invalid state {0}.\\\"},INVALID_TYPE:{code:12,text:\\\"AMQJS0012E Invalid type {0} for {1}.\\\"},INVALID_ARGUMENT:{code:13,text:\\\"AMQJS0013E Invalid argument {0} for {1}.\\\"},UNSUPPORTED_OPERATION:{code:14,text:\\\"AMQJS0014E Unsupported operation.\\\"},INVALID_STORED_DATA:{code:15,text:\\\"AMQJS0015E Invalid data in local storage key\\\\x3d{0} value\\\\x3d{1}.\\\"},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:\\\"AMQJS0016E Invalid MQTT message type {0}.\\\"},\\nMALFORMED_UNICODE:{code:17,text:\\\"AMQJS0017E Malformed Unicode string:{0} {1}.\\\"},BUFFER_FULL:{code:18,text:\\\"AMQJS0018E Message buffer is full, maximum buffer size: {0}.\\\"}},H={0:\\\"Connection Accepted\\\",1:\\\"Connection Refused: unacceptable protocol version\\\",2:\\\"Connection Refused: identifier rejected\\\",3:\\\"Connection Refused: server unavailable\\\",4:\\\"Connection Refused: bad user name or password\\\",5:\\\"Connection Refused: not authorized\\\"},f=function(a,b){var c=a.text;if(b)for(var k,e,g=0;g<b.length;g++)if(k=\\\"{\\\"+\\ng+\\\"}\\\",e=c.indexOf(k),0<e)var h=c.substring(0,e),c=c.substring(e+k.length),c=h+b[g]+c;return c},A=[0,6,77,81,73,115,100,112,3],B=[0,4,77,81,84,84,4],q=function(a,b){this.type=a;for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c])};q.prototype.encode=function(){var a=(this.type&15)<<4,b=0,c=[],k=0,e;void 0!==this.messageIdentifier&&(b+=2);switch(this.type){case 1:switch(this.mqttVersion){case 3:b+=A.length+3;break;case 4:b+=B.length+3}b+=n(this.clientId)+2;void 0!==this.willMessage&&(b+=n(this.willMessage.destinationName)+\\n2,e=this.willMessage.payloadBytes,e instanceof Uint8Array||(e=new Uint8Array(h)),b+=e.byteLength+2);void 0!==this.userName&&(b+=n(this.userName)+2);void 0!==this.password&&(b+=n(this.password)+2);break;case 8:for(var a=a|2,g=0;g<this.topics.length;g++)c[g]=n(this.topics[g]),b+=c[g]+2;b+=this.requestedQos.length;break;case 10:a|=2;for(g=0;g<this.topics.length;g++)c[g]=n(this.topics[g]),b+=c[g]+2;break;case 6:a|=2;break;case 3:this.payloadMessage.duplicate&&(a|=8);a=a|=this.payloadMessage.qos<<1;this.payloadMessage.retained&&\\n(a|=1);var k=n(this.payloadMessage.destinationName),h=this.payloadMessage.payloadBytes,b=b+(k+2)+h.byteLength;h instanceof ArrayBuffer?h=new Uint8Array(h):h instanceof Uint8Array||(h=new Uint8Array(h.buffer))}var f=b,g=Array(1),d=0;do{var t=f%128,f=f>>7;0<f&&(t|=128);g[d++]=t}while(0<f&&4>d);f=g.length+1;b=new ArrayBuffer(b+f);d=new Uint8Array(b);d[0]=a;d.set(g,1);if(3==this.type)f=u(this.payloadMessage.destinationName,k,d,f);else if(1==this.type){switch(this.mqttVersion){case 3:d.set(A,f);f+=A.length;\\nbreak;case 4:d.set(B,f),f+=B.length}a=0;this.cleanSession&&(a=2);void 0!==this.willMessage&&(a=a|4|this.willMessage.qos<<3,this.willMessage.retained&&(a|=32));void 0!==this.userName&&(a|=128);void 0!==this.password&&(a|=64);d[f++]=a;f=s(this.keepAliveInterval,d,f)}void 0!==this.messageIdentifier&&(f=s(this.messageIdentifier,d,f));switch(this.type){case 1:f=u(this.clientId,n(this.clientId),d,f);void 0!==this.willMessage&&(f=u(this.willMessage.destinationName,n(this.willMessage.destinationName),d,f),\\nf=s(e.byteLength,d,f),d.set(e,f),f+=e.byteLength);void 0!==this.userName&&(f=u(this.userName,n(this.userName),d,f));void 0!==this.password&&u(this.password,n(this.password),d,f);break;case 3:d.set(h,f);break;case 8:for(g=0;g<this.topics.length;g++)f=u(this.topics[g],c[g],d,f),d[f++]=this.requestedQos[g];break;case 10:for(g=0;g<this.topics.length;g++)f=u(this.topics[g],c[g],d,f)}return b};var F=function(a,b,c){this._client=a;this._window=b;this._keepAliveInterval=1E3*c;this.isReset=!1;var k=(new q(12)).encode(),\\ne=function(a){return function(){return g.apply(a)}},g=function(){this.isReset?(this.isReset=!1,this._client._trace(\\\"Pinger.doPing\\\",\\\"send PINGREQ\\\"),this._client.socket.send(k),this.timeout=this._window.setTimeout(e(this),this._keepAliveInterval)):(this._client._trace(\\\"Pinger.doPing\\\",\\\"Timed out\\\"),this._client._disconnected(h.PING_TIMEOUT.code,f(h.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0;this._window.clearTimeout(this.timeout);0<this._keepAliveInterval&&(this.timeout=setTimeout(e(this),\\nthis._keepAliveInterval))};this.cancel=function(){this._window.clearTimeout(this.timeout)}},w=function(a,b,c,f,e){this._window=b;c||(c=30);this.timeout=setTimeout(function(a,b,c){return function(){return a.apply(b,c)}}(f,a,e),1E3*c);this.cancel=function(){this._window.clearTimeout(this.timeout)}},d=function(a,b,c,d,e){if(!(\\\"WebSocket\\\"in p&&null!==p.WebSocket))throw Error(f(h.UNSUPPORTED,[\\\"WebSocket\\\"]));if(!(\\\"localStorage\\\"in p&&null!==p.localStorage))throw Error(f(h.UNSUPPORTED,[\\\"localStorage\\\"]));\\nif(!(\\\"ArrayBuffer\\\"in p&&null!==p.ArrayBuffer))throw Error(f(h.UNSUPPORTED,[\\\"ArrayBuffer\\\"]));this._trace(\\\"Paho.MQTT.Client\\\",a,b,c,d,e);this.host=b;this.port=c;this.path=d;this.uri=a;this.clientId=e;this._wsuri=null;this._localKey=b+\\\":\\\"+c+(\\\"/mqtt\\\"!=d?\\\":\\\"+d:\\\"\\\")+\\\":\\\"+e+\\\":\\\";this._msg_queue=[];this._buffered_msg_queue=[];this._sentMessages={};this._receivedMessages={};this._notify_msg_sent={};this._message_identifier=1;this._sequence=0;for(var g in localStorage)0!==g.indexOf(\\\"Sent:\\\"+this._localKey)&&0!==\\ng.indexOf(\\\"Received:\\\"+this._localKey)||this.restore(g)};d.prototype.host=null;d.prototype.port=null;d.prototype.path=null;d.prototype.uri=null;d.prototype.clientId=null;d.prototype.socket=null;d.prototype.connected=!1;d.prototype.maxMessageIdentifier=65536;d.prototype.connectOptions=null;d.prototype.hostIndex=null;d.prototype.onConnected=null;d.prototype.onConnectionLost=null;d.prototype.onMessageDelivered=null;d.prototype.onMessageArrived=null;d.prototype.traceFunction=null;d.prototype._msg_queue=\\nnull;d.prototype._buffered_msg_queue=null;d.prototype._connectTimeout=null;d.prototype.sendPinger=null;d.prototype.receivePinger=null;d.prototype._reconnectInterval=1;d.prototype._reconnecting=!1;d.prototype._reconnectTimeout=null;d.prototype.disconnectedPublishing=!1;d.prototype.disconnectedBufferSize=5E3;d.prototype.receiveBuffer=null;d.prototype._traceBuffer=null;d.prototype._MAX_TRACE_ENTRIES=100;d.prototype.connect=function(a){var b=this._traceMask(a,\\\"password\\\");this._trace(\\\"Client.connect\\\",\\nb,this.socket,this.connected);if(this.connected)throw Error(f(h.INVALID_STATE,[\\\"already connected\\\"]));if(this.socket)throw Error(f(h.INVALID_STATE,[\\\"already connected\\\"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1);this.connectOptions=a;this._reconnectInterval=1;this._reconnecting=!1;a.uris?(this.hostIndex=0,this._doConnect(a.uris[0])):this._doConnect(this.uri)};d.prototype.subscribe=function(a,b){this._trace(\\\"Client.subscribe\\\",a,b);if(!this.connected)throw Error(f(h.INVALID_STATE,\\n[\\\"not connected\\\"]));var c=new q(8);c.topics=[a];c.requestedQos=void 0!==b.qos?[b.qos]:[0];b.onSuccess&&(c.onSuccess=function(a){b.onSuccess({invocationContext:b.invocationContext,grantedQos:a})});b.onFailure&&(c.onFailure=function(a){b.onFailure({invocationContext:b.invocationContext,errorCode:a,errorMessage:f(a)})});b.timeout&&(c.timeOut=new w(this,window,b.timeout,b.onFailure,[{invocationContext:b.invocationContext,errorCode:h.SUBSCRIBE_TIMEOUT.code,errorMessage:f(h.SUBSCRIBE_TIMEOUT)}]));this._requires_ack(c);\\nthis._schedule_message(c)};d.prototype.unsubscribe=function(a,b){this._trace(\\\"Client.unsubscribe\\\",a,b);if(!this.connected)throw Error(f(h.INVALID_STATE,[\\\"not connected\\\"]));var c=new q(10);c.topics=[a];b.onSuccess&&(c.callback=function(){b.onSuccess({invocationContext:b.invocationContext})});b.timeout&&(c.timeOut=new w(this,window,b.timeout,b.onFailure,[{invocationContext:b.invocationContext,errorCode:h.UNSUBSCRIBE_TIMEOUT.code,errorMessage:f(h.UNSUBSCRIBE_TIMEOUT)}]));this._requires_ack(c);this._schedule_message(c)};\\nd.prototype.send=function(a){this._trace(\\\"Client.send\\\",a);wireMessage=new q(3);wireMessage.payloadMessage=a;if(this.connected)0<a.qos?this._requires_ack(wireMessage):this.onMessageDelivered&&(this._notify_msg_sent[wireMessage]=this.onMessageDelivered(wireMessage.payloadMessage)),this._schedule_message(wireMessage);else if(this._reconnecting&&this.disconnectedPublishing){if(Object.keys(this._sentMessages).length+this._buffered_msg_queue.length>this.disconnectedBufferSize)throw Error(f(h.BUFFER_FULL,\\n[this.disconnectedBufferSize]));0<a.qos?this._requires_ack(wireMessage):(wireMessage.sequence=++this._sequence,this._buffered_msg_queue.push(wireMessage))}else throw Error(f(h.INVALID_STATE,[\\\"not connected\\\"]));};d.prototype.disconnect=function(){this._trace(\\\"Client.disconnect\\\");this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1);if(!this.socket)throw Error(f(h.INVALID_STATE,[\\\"not connecting or connected\\\"]));wireMessage=new q(14);this._notify_msg_sent[wireMessage]=\\nv(this._disconnected,this);this._schedule_message(wireMessage)};d.prototype.getTraceLog=function(){if(null!==this._traceBuffer){this._trace(\\\"Client.getTraceLog\\\",new Date);this._trace(\\\"Client.getTraceLog in flight messages\\\",this._sentMessages.length);for(var a in this._sentMessages)this._trace(\\\"_sentMessages \\\",a,this._sentMessages[a]);for(a in this._receivedMessages)this._trace(\\\"_receivedMessages \\\",a,this._receivedMessages[a]);return this._traceBuffer}};d.prototype.startTrace=function(){null===this._traceBuffer&&\\n(this._traceBuffer=[]);this._trace(\\\"Client.startTrace\\\",new Date,\\\"1.0.3\\\")};d.prototype.stopTrace=function(){delete this._traceBuffer};d.prototype._doConnect=function(a){this.connectOptions.useSSL&&(a=a.split(\\\":\\\"),a[0]=\\\"wss\\\",a=a.join(\\\":\\\"));this._wsuri=a;this.connected=!1;this.socket=4>this.connectOptions.mqttVersion?new WebSocket(a,[\\\"mqttv3.1\\\"]):new WebSocket(a,[\\\"mqtt\\\"]);this.socket.binaryType=\\\"arraybuffer\\\";this.socket.onopen=v(this._on_socket_open,this);this.socket.onmessage=v(this._on_socket_message,\\nthis);this.socket.onerror=v(this._on_socket_error,this);this.socket.onclose=v(this._on_socket_close,this);this.sendPinger=new F(this,window,this.connectOptions.keepAliveInterval);this.receivePinger=new F(this,window,this.connectOptions.keepAliveInterval);this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null);this._connectTimeout=new w(this,window,this.connectOptions.timeout,this._disconnected,[h.CONNECT_TIMEOUT.code,f(h.CONNECT_TIMEOUT)])};d.prototype._schedule_message=function(a){this._msg_queue.push(a);\\nthis.connected&&this._process_queue()};d.prototype.store=function(a,b){var c={type:b.type,messageIdentifier:b.messageIdentifier,version:1};switch(b.type){case 3:b.pubRecReceived&&(c.pubRecReceived=!0);c.payloadMessage={};for(var d=\\\"\\\",e=b.payloadMessage.payloadBytes,g=0;g<e.length;g++)d=15>=e[g]?d+\\\"0\\\"+e[g].toString(16):d+e[g].toString(16);c.payloadMessage.payloadHex=d;c.payloadMessage.qos=b.payloadMessage.qos;c.payloadMessage.destinationName=b.payloadMessage.destinationName;b.payloadMessage.duplicate&&\\n(c.payloadMessage.duplicate=!0);b.payloadMessage.retained&&(c.payloadMessage.retained=!0);0===a.indexOf(\\\"Sent:\\\")&&(void 0===b.sequence&&(b.sequence=++this._sequence),c.sequence=b.sequence);break;default:throw Error(f(h.INVALID_STORED_DATA,[key,c]));}localStorage.setItem(a+this._localKey+b.messageIdentifier,JSON.stringify(c))};d.prototype.restore=function(a){var b=localStorage.getItem(a),c=JSON.parse(b),d=new q(c.type,c);switch(c.type){case 3:for(var b=c.payloadMessage.payloadHex,e=new ArrayBuffer(b.length/\\n2),e=new Uint8Array(e),g=0;2<=b.length;){var m=parseInt(b.substring(0,2),16),b=b.substring(2,b.length);e[g++]=m}b=new Paho.MQTT.Message(e);b.qos=c.payloadMessage.qos;b.destinationName=c.payloadMessage.destinationName;c.payloadMessage.duplicate&&(b.duplicate=!0);c.payloadMessage.retained&&(b.retained=!0);d.payloadMessage=b;break;default:throw Error(f(h.INVALID_STORED_DATA,[a,b]));}0===a.indexOf(\\\"Sent:\\\"+this._localKey)?(d.payloadMessage.duplicate=!0,this._sentMessages[d.messageIdentifier]=d):0===a.indexOf(\\\"Received:\\\"+\\nthis._localKey)&&(this._receivedMessages[d.messageIdentifier]=d)};d.prototype._process_queue=function(){for(var a=null,b=this._msg_queue.reverse();a=b.pop();)this._socket_send(a),this._notify_msg_sent[a]&&(this._notify_msg_sent[a](),delete this._notify_msg_sent[a])};d.prototype._requires_ack=function(a){var b=Object.keys(this._sentMessages).length;if(b>this.maxMessageIdentifier)throw Error(\\\"Too many messages:\\\"+b);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;\\na.messageIdentifier=this._message_identifier;this._sentMessages[a.messageIdentifier]=a;3===a.type&&this.store(\\\"Sent:\\\",a);this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)};d.prototype._on_socket_open=function(){var a=new q(1,this.connectOptions);a.clientId=this.clientId;this._socket_send(a)};d.prototype._on_socket_message=function(a){this._trace(\\\"Client._on_socket_message\\\",a.data);a=this._deframeMessages(a.data);for(var b=0;b<a.length;b+=1)this._handleMessage(a[b])};\\nd.prototype._deframeMessages=function(a){a=new Uint8Array(a);var b=[];if(this.receiveBuffer){var c=new Uint8Array(this.receiveBuffer.length+a.length);c.set(this.receiveBuffer);c.set(a,this.receiveBuffer.length);a=c;delete this.receiveBuffer}try{for(c=0;c<a.length;){var d;a:{var e=a,g=c,m=g,n=e[g],l=n>>4,t=n&15,g=g+1,x=void 0,C=0,p=1;do{if(g==e.length){d=[null,m];break a}x=e[g++];C+=(x&127)*p;p*=128}while(0!==(x&128));x=g+C;if(x>e.length)d=[null,m];else{var y=new q(l);switch(l){case 2:e[g++]&1&&(y.sessionPresent=\\n!0);y.returnCode=e[g++];break;case 3:var m=t>>1&3,s=256*e[g]+e[g+1],g=g+2,u=E(e,g,s),g=g+s;0<m&&(y.messageIdentifier=256*e[g]+e[g+1],g+=2);var r=new Paho.MQTT.Message(e.subarray(g,x));1==(t&1)&&(r.retained=!0);8==(t&8)&&(r.duplicate=!0);r.qos=m;r.destinationName=u;y.payloadMessage=r;break;case 4:case 5:case 6:case 7:case 11:y.messageIdentifier=256*e[g]+e[g+1];break;case 9:y.messageIdentifier=256*e[g]+e[g+1],g+=2,y.returnCode=e.subarray(g,x)}d=[y,x]}}var v=d[0],c=d[1];if(null!==v)b.push(v);else break}c<\\na.length&&(this.receiveBuffer=a.subarray(c))}catch(w){d=\\\"undefined\\\"==w.hasOwnProperty(\\\"stack\\\")?w.stack.toString():\\\"No Error Stack Available\\\";this._disconnected(h.INTERNAL_ERROR.code,f(h.INTERNAL_ERROR,[w.message,d]));return}return b};d.prototype._handleMessage=function(a){this._trace(\\\"Client._handleMessage\\\",a);try{switch(a.type){case 2:this._connectTimeout.cancel();this._reconnectTimeout&&this._reconnectTimeout.cancel();if(this.connectOptions.cleanSession){for(var b in this._sentMessages){var c=this._sentMessages[b];\\nlocalStorage.removeItem(\\\"Sent:\\\"+this._localKey+c.messageIdentifier)}this._sentMessages={};for(b in this._receivedMessages){var d=this._receivedMessages[b];localStorage.removeItem(\\\"Received:\\\"+this._localKey+d.messageIdentifier)}this._receivedMessages={}}if(0===a.returnCode)this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);else{this._disconnected(h.CONNACK_RETURNCODE.code,f(h.CONNACK_RETURNCODE,[a.returnCode,H[a.returnCode]]));break}a=[];for(var e in this._sentMessages)this._sentMessages.hasOwnProperty(e)&&\\na.push(this._sentMessages[e]);if(0<this._buffered_msg_queue.length){e=null;for(var g=this._buffered_msg_queue.reverse();e=g.pop();)a.push(e),this.onMessageDelivered&&(this._notify_msg_sent[e]=this.onMessageDelivered(e.payloadMessage))}a=a.sort(function(a,b){return a.sequence-b.sequence});for(var g=0,m=a.length;g<m;g++)if(c=a[g],3==c.type&&c.pubRecReceived){var n=new q(6,{messageIdentifier:c.messageIdentifier});this._schedule_message(n)}else this._schedule_message(c);if(this.connectOptions.onSuccess)this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});\\nc=!1;this._reconnecting&&(c=!0,this._reconnectInterval=1,this._reconnecting=!1);this._connected(c,this._wsuri);this._process_queue();break;case 3:this._receivePublish(a);break;case 4:if(c=this._sentMessages[a.messageIdentifier])if(delete this._sentMessages[a.messageIdentifier],localStorage.removeItem(\\\"Sent:\\\"+this._localKey+a.messageIdentifier),this.onMessageDelivered)this.onMessageDelivered(c.payloadMessage);break;case 5:if(c=this._sentMessages[a.messageIdentifier])c.pubRecReceived=!0,n=new q(6,{messageIdentifier:a.messageIdentifier}),\\nthis.store(\\\"Sent:\\\",c),this._schedule_message(n);break;case 6:d=this._receivedMessages[a.messageIdentifier];localStorage.removeItem(\\\"Received:\\\"+this._localKey+a.messageIdentifier);d&&(this._receiveMessage(d),delete this._receivedMessages[a.messageIdentifier]);var l=new q(7,{messageIdentifier:a.messageIdentifier});this._schedule_message(l);break;case 7:c=this._sentMessages[a.messageIdentifier];delete this._sentMessages[a.messageIdentifier];localStorage.removeItem(\\\"Sent:\\\"+this._localKey+a.messageIdentifier);\\nif(this.onMessageDelivered)this.onMessageDelivered(c.payloadMessage);break;case 9:if(c=this._sentMessages[a.messageIdentifier]){c.timeOut&&c.timeOut.cancel();if(128===a.returnCode[0]){if(c.onFailure)c.onFailure(a.returnCode)}else if(c.onSuccess)c.onSuccess(a.returnCode);delete this._sentMessages[a.messageIdentifier]}break;case 11:if(c=this._sentMessages[a.messageIdentifier])c.timeOut&&c.timeOut.cancel(),c.callback&&c.callback(),delete this._sentMessages[a.messageIdentifier];break;case 13:this.sendPinger.reset();\\nbreak;case 14:this._disconnected(h.INVALID_MQTT_MESSAGE_TYPE.code,f(h.INVALID_MQTT_MESSAGE_TYPE,[a.type]));break;default:this._disconnected(h.INVALID_MQTT_MESSAGE_TYPE.code,f(h.INVALID_MQTT_MESSAGE_TYPE,[a.type]))}}catch(t){c=\\\"undefined\\\"==t.hasOwnProperty(\\\"stack\\\")?t.stack.toString():\\\"No Error Stack Available\\\",this._disconnected(h.INTERNAL_ERROR.code,f(h.INTERNAL_ERROR,[t.message,c]))}};d.prototype._on_socket_error=function(a){this._reconnecting||this._disconnected(h.SOCKET_ERROR.code,f(h.SOCKET_ERROR,\\n[a.data]))};d.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(h.SOCKET_CLOSE.code,f(h.SOCKET_CLOSE))};d.prototype._socket_send=function(a){if(1==a.type){var b=this._traceMask(a,\\\"password\\\");this._trace(\\\"Client._socket_send\\\",b)}else this._trace(\\\"Client._socket_send\\\",a);this.socket.send(a.encode());this.sendPinger.reset()};d.prototype._receivePublish=function(a){switch(a.payloadMessage.qos){case \\\"undefined\\\":case 0:this._receiveMessage(a);break;case 1:var b=new q(4,{messageIdentifier:a.messageIdentifier});\\nthis._schedule_message(b);this._receiveMessage(a);break;case 2:this._receivedMessages[a.messageIdentifier]=a;this.store(\\\"Received:\\\",a);a=new q(5,{messageIdentifier:a.messageIdentifier});this._schedule_message(a);break;default:throw Error(\\\"Invaild qos\\\\x3d\\\"+wireMmessage.payloadMessage.qos);}};d.prototype._receiveMessage=function(a){if(this.onMessageArrived)this.onMessageArrived(a.payloadMessage)};d.prototype._connected=function(a,b){if(this.onConnected)this.onConnected(a,b)};d.prototype._reconnect=\\nfunction(){this._trace(\\\"Client._reconnect\\\");this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),128>this._reconnectInterval&&(this._reconnectInterval*=2),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))};d.prototype._disconnected=function(a,b){this._trace(\\\"Client._disconnected\\\",a,b);if(void 0!==a&&this._reconnecting)this._reconnectTimeout=new w(this,window,this._reconnectInterval,this._reconnect);\\nelse if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);\\nelse if(void 0===a&&(a=h.OK.code,b=f(h.OK)),this.connected){this.connected=!1;if(this.onConnectionLost)this.onConnectionLost({errorCode:a,errorMessage:b,reconnect:this.connectOptions.reconnect,uri:this._wsuri});a!==h.OK.code&&this.connectOptions.reconnect&&(this._reconnectInterval=1,this._reconnect())}else if(4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit)this._trace(\\\"Failed to connect V4, dropping back to V3\\\"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?\\n(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri);else if(this.connectOptions.onFailure)this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:a,errorMessage:b})};d.prototype._trace=function(){if(this.traceFunction){for(var a in arguments)\\\"undefined\\\"!==typeof arguments[a]&&arguments.splice(a,1,JSON.stringify(arguments[a]));a=Array.prototype.slice.call(arguments).join(\\\"\\\");this.traceFunction({severity:\\\"Debug\\\",message:a})}if(null!==\\nthis._traceBuffer){a=0;for(var b=arguments.length;a<b;a++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===a?this._traceBuffer.push(arguments[a]):\\\"undefined\\\"===typeof arguments[a]?this._traceBuffer.push(arguments[a]):this._traceBuffer.push(\\\"  \\\"+JSON.stringify(arguments[a]))}};d.prototype._traceMask=function(a,b){var c={},d;for(d in a)a.hasOwnProperty(d)&&(c[d]=d==b?\\\"******\\\":a[d]);return c};var G=function(a,b,c,k){var e;if(\\\"string\\\"!==typeof a)throw Error(f(h.INVALID_TYPE,\\n[typeof a,\\\"host\\\"]));if(2==arguments.length){k=b;e=a;var g=e.match(/^(wss?):\\\\/\\\\/((\\\\[(.+)\\\\])|([^\\\\/]+?))(:(\\\\d+))?(\\\\/.*)$/);if(g)a=g[4]||g[2],b=parseInt(g[7]),c=g[8];else throw Error(f(h.INVALID_ARGUMENT,[a,\\\"host\\\"]));}else{3==arguments.length&&(k=c,c=\\\"/mqtt\\\");if(\\\"number\\\"!==typeof b||0>b)throw Error(f(h.INVALID_TYPE,[typeof b,\\\"port\\\"]));if(\\\"string\\\"!==typeof c)throw Error(f(h.INVALID_TYPE,[typeof c,\\\"path\\\"]));e=\\\"ws://\\\"+(-1!==a.indexOf(\\\":\\\")&&\\\"[\\\"!==a.slice(0,1)&&\\\"]\\\"!==a.slice(-1)?\\\"[\\\"+a+\\\"]\\\":a)+\\\":\\\"+b+c}for(var m=\\ng=0;m<k.length;m++){var n=k.charCodeAt(m);55296<=n&&56319>=n&&m++;g++}if(\\\"string\\\"!==typeof k||65535<g)throw Error(f(h.INVALID_ARGUMENT,[k,\\\"clientId\\\"]));var l=new d(e,a,b,c,k);this._getHost=function(){return a};this._setHost=function(){throw Error(f(h.UNSUPPORTED_OPERATION));};this._getPort=function(){return b};this._setPort=function(){throw Error(f(h.UNSUPPORTED_OPERATION));};this._getPath=function(){return c};this._setPath=function(){throw Error(f(h.UNSUPPORTED_OPERATION));};this._getURI=function(){return e};\\nthis._setURI=function(){throw Error(f(h.UNSUPPORTED_OPERATION));};this._getClientId=function(){return l.clientId};this._setClientId=function(){throw Error(f(h.UNSUPPORTED_OPERATION));};this._getOnConnected=function(){return l.onConnected};this._setOnConnected=function(a){if(\\\"function\\\"===typeof a)l.onConnected=a;else throw Error(f(h.INVALID_TYPE,[typeof a,\\\"onConnected\\\"]));};this._getDisconnectedPublishing=function(){return l.disconnectedPublishing};this._setDisconnectedPublishing=function(a){l.disconnectedPublishing=\\na};this._getDisconnectedBufferSize=function(){return l.disconnectedBufferSize};this._setDisconnectedBufferSize=function(a){l.disconnectedBufferSize=a};this._getOnConnectionLost=function(){return l.onConnectionLost};this._setOnConnectionLost=function(a){if(\\\"function\\\"===typeof a)l.onConnectionLost=a;else throw Error(f(h.INVALID_TYPE,[typeof a,\\\"onConnectionLost\\\"]));};this._getOnMessageDelivered=function(){return l.onMessageDelivered};this._setOnMessageDelivered=function(a){if(\\\"function\\\"===typeof a)l.onMessageDelivered=\\na;else throw Error(f(h.INVALID_TYPE,[typeof a,\\\"onMessageDelivered\\\"]));};this._getOnMessageArrived=function(){return l.onMessageArrived};this._setOnMessageArrived=function(a){if(\\\"function\\\"===typeof a)l.onMessageArrived=a;else throw Error(f(h.INVALID_TYPE,[typeof a,\\\"onMessageArrived\\\"]));};this._getTrace=function(){return l.traceFunction};this._setTrace=function(a){if(\\\"function\\\"===typeof a)l.traceFunction=a;else throw Error(f(h.INVALID_TYPE,[typeof a,\\\"onTrace\\\"]));};this.connect=function(a){a=a||{};z(a,\\n{timeout:\\\"number\\\",userName:\\\"string\\\",password:\\\"string\\\",willMessage:\\\"object\\\",keepAliveInterval:\\\"number\\\",cleanSession:\\\"boolean\\\",useSSL:\\\"boolean\\\",invocationContext:\\\"object\\\",onSuccess:\\\"function\\\",onFailure:\\\"function\\\",hosts:\\\"object\\\",ports:\\\"object\\\",reconnect:\\\"boolean\\\",mqttVersion:\\\"number\\\",mqttVersionExplicit:\\\"boolean\\\",uris:\\\"object\\\"});void 0===a.keepAliveInterval&&(a.keepAliveInterval=60);if(4<a.mqttVersion||3>a.mqttVersion)throw Error(f(h.INVALID_ARGUMENT,[a.mqttVersion,\\\"connectOptions.mqttVersion\\\"]));void 0===\\na.mqttVersion?(a.mqttVersionExplicit=!1,a.mqttVersion=4):a.mqttVersionExplicit=!0;if(void 0!==a.password&&void 0===a.userName)throw Error(f(h.INVALID_ARGUMENT,[a.password,\\\"connectOptions.password\\\"]));if(a.willMessage){if(!(a.willMessage instanceof r))throw Error(f(h.INVALID_TYPE,[a.willMessage,\\\"connectOptions.willMessage\\\"]));a.willMessage.stringPayload=null;if(\\\"undefined\\\"===typeof a.willMessage.destinationName)throw Error(f(h.INVALID_TYPE,[typeof a.willMessage.destinationName,\\\"connectOptions.willMessage.destinationName\\\"]));\\n}\\\"undefined\\\"===typeof a.cleanSession&&(a.cleanSession=!0);if(a.hosts){if(!(a.hosts instanceof Array))throw Error(f(h.INVALID_ARGUMENT,[a.hosts,\\\"connectOptions.hosts\\\"]));if(1>a.hosts.length)throw Error(f(h.INVALID_ARGUMENT,[a.hosts,\\\"connectOptions.hosts\\\"]));for(var b=!1,d=0;d<a.hosts.length;d++){if(\\\"string\\\"!==typeof a.hosts[d])throw Error(f(h.INVALID_TYPE,[typeof a.hosts[d],\\\"connectOptions.hosts[\\\"+d+\\\"]\\\"]));if(/^(wss?):\\\\/\\\\/((\\\\[(.+)\\\\])|([^\\\\/]+?))(:(\\\\d+))?(\\\\/.*)$/.test(a.hosts[d]))if(0===d)b=!0;else{if(!b)throw Error(f(h.INVALID_ARGUMENT,\\n[a.hosts[d],\\\"connectOptions.hosts[\\\"+d+\\\"]\\\"]));}else if(b)throw Error(f(h.INVALID_ARGUMENT,[a.hosts[d],\\\"connectOptions.hosts[\\\"+d+\\\"]\\\"]));}if(b)a.uris=a.hosts;else{if(!a.ports)throw Error(f(h.INVALID_ARGUMENT,[a.ports,\\\"connectOptions.ports\\\"]));if(!(a.ports instanceof Array))throw Error(f(h.INVALID_ARGUMENT,[a.ports,\\\"connectOptions.ports\\\"]));if(a.hosts.length!==a.ports.length)throw Error(f(h.INVALID_ARGUMENT,[a.ports,\\\"connectOptions.ports\\\"]));a.uris=[];for(d=0;d<a.hosts.length;d++){if(\\\"number\\\"!==typeof a.ports[d]||\\n0>a.ports[d])throw Error(f(h.INVALID_TYPE,[typeof a.ports[d],\\\"connectOptions.ports[\\\"+d+\\\"]\\\"]));var b=a.hosts[d],g=a.ports[d];e=\\\"ws://\\\"+(-1!==b.indexOf(\\\":\\\")?\\\"[\\\"+b+\\\"]\\\":b)+\\\":\\\"+g+c;a.uris.push(e)}}}l.connect(a)};this.subscribe=function(a,b){if(\\\"string\\\"!==typeof a)throw Error(\\\"Invalid argument:\\\"+a);b=b||{};z(b,{qos:\\\"number\\\",invocationContext:\\\"object\\\",onSuccess:\\\"function\\\",onFailure:\\\"function\\\",timeout:\\\"number\\\"});if(b.timeout&&!b.onFailure)throw Error(\\\"subscribeOptions.timeout specified with no onFailure callback.\\\");\\nif(\\\"undefined\\\"!==typeof b.qos&&0!==b.qos&&1!==b.qos&&2!==b.qos)throw Error(f(h.INVALID_ARGUMENT,[b.qos,\\\"subscribeOptions.qos\\\"]));l.subscribe(a,b)};this.unsubscribe=function(a,b){if(\\\"string\\\"!==typeof a)throw Error(\\\"Invalid argument:\\\"+a);b=b||{};z(b,{invocationContext:\\\"object\\\",onSuccess:\\\"function\\\",onFailure:\\\"function\\\",timeout:\\\"number\\\"});if(b.timeout&&!b.onFailure)throw Error(\\\"unsubscribeOptions.timeout specified with no onFailure callback.\\\");l.unsubscribe(a,b)};this.send=function(a,b,c,d){var e;if(0===\\narguments.length)throw Error(\\\"Invalid argument.length\\\");if(1==arguments.length){if(!(a instanceof r)&&\\\"string\\\"!==typeof a)throw Error(\\\"Invalid argument:\\\"+typeof a);e=a;if(\\\"undefined\\\"===typeof e.destinationName)throw Error(f(h.INVALID_ARGUMENT,[e.destinationName,\\\"Message.destinationName\\\"]));}else e=new r(b),e.destinationName=a,3<=arguments.length&&(e.qos=c),4<=arguments.length&&(e.retained=d);l.send(e)};this.publish=function(a,b,c,d){console.log(\\\"Publising message to: \\\",a);var e;if(0===arguments.length)throw Error(\\\"Invalid argument.length\\\");\\nif(1==arguments.length){if(!(a instanceof r)&&\\\"string\\\"!==typeof a)throw Error(\\\"Invalid argument:\\\"+typeof a);e=a;if(\\\"undefined\\\"===typeof e.destinationName)throw Error(f(h.INVALID_ARGUMENT,[e.destinationName,\\\"Message.destinationName\\\"]));}else e=new r(b),e.destinationName=a,3<=arguments.length&&(e.qos=c),4<=arguments.length&&(e.retained=d);l.send(e)};this.disconnect=function(){l.disconnect()};this.getTraceLog=function(){return l.getTraceLog()};this.startTrace=function(){l.startTrace()};this.stopTrace=\\nfunction(){l.stopTrace()};this.isConnected=function(){return l.connected}};G.prototype={get host(){return this._getHost()},set host(a){this._setHost(a)},get port(){return this._getPort()},set port(a){this._setPort(a)},get path(){return this._getPath()},set path(a){this._setPath(a)},get clientId(){return this._getClientId()},set clientId(a){this._setClientId(a)},get onConnected(){return this._getOnConnected()},set onConnected(a){this._setOnConnected(a)},get disconnectedPublishing(){return this._getDisconnectedPublishing()},\\nset disconnectedPublishing(a){this._setDisconnectedPublishing(a)},get disconnectedBufferSize(){return this._getDisconnectedBufferSize()},set disconnectedBufferSize(a){this._setDisconnectedBufferSize(a)},get onConnectionLost(){return this._getOnConnectionLost()},set onConnectionLost(a){this._setOnConnectionLost(a)},get onMessageDelivered(){return this._getOnMessageDelivered()},set onMessageDelivered(a){this._setOnMessageDelivered(a)},get onMessageArrived(){return this._getOnMessageArrived()},set onMessageArrived(a){this._setOnMessageArrived(a)},\\nget trace(){return this._getTrace()},set trace(a){this._setTrace(a)}};var r=function(a){var b;if(\\\"string\\\"===typeof a||a instanceof ArrayBuffer||a instanceof Int8Array||a instanceof Uint8Array||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)b=a;else throw f(h.INVALID_ARGUMENT,[a,\\\"newPayload\\\"]);this._getPayloadString=function(){return\\\"string\\\"===typeof b?b:E(b,0,b.length)};this._getPayloadBytes=\\nfunction(){if(\\\"string\\\"===typeof b){var a=new ArrayBuffer(n(b)),a=new Uint8Array(a);D(b,a,0);return a}return b};var c;this._getDestinationName=function(){return c};this._setDestinationName=function(a){if(\\\"string\\\"===typeof a)c=a;else throw Error(f(h.INVALID_ARGUMENT,[a,\\\"newDestinationName\\\"]));};var d=0;this._getQos=function(){return d};this._setQos=function(a){if(0===a||1===a||2===a)d=a;else throw Error(\\\"Invalid argument:\\\"+a);};var e=!1;this._getRetained=function(){return e};this._setRetained=function(a){if(\\\"boolean\\\"===\\ntypeof a)e=a;else throw Error(f(h.INVALID_ARGUMENT,[a,\\\"newRetained\\\"]));};var g=!1;this._getDuplicate=function(){return g};this._setDuplicate=function(a){g=a}};r.prototype={get payloadString(){return this._getPayloadString()},get payloadBytes(){return this._getPayloadBytes()},get destinationName(){return this._getDestinationName()},set destinationName(a){this._setDestinationName(a)},get topic(){return this._getDestinationName()},set topic(a){this._setDestinationName(a)},get qos(){return this._getQos()},\\nset qos(a){this._setQos(a)},get retained(){return this._getRetained()},set retained(a){this._setRetained(a)},get duplicate(){return this._getDuplicate()},set duplicate(a){this._setDuplicate(a)}};return{Client:G,Message:r}}(window)});\\nfunction _clspRouter() {\\n    function send(m){\\n        // route message to parent which will in turn route to the correct\\n        // player based on clientId.\\n        m.clientId = MqttClientId;\\n        // console.log(m);\\n        window.parent.postMessage(m,\\\"*\\\");\\n    }// end send\\n\\n\\n    function routeInbound(message){\\n        var pstring = \\\"\\\";\\n\\n        try {\\n            pstring = message.payloadString;\\n        } catch(e) {\\n            //bogus excepton?\\n        }\\n\\n        send({\\n          event: \\'data\\',\\n          destinationName: message.destinationName,\\n          payloadString: pstring,\\n          payloadBytes: message.payloadBytes || null\\n        });\\n    }// end route inbound\\n\\n\\n    function eventHandler(evt){\\n        var m = evt.data;\\n\\n        try {\\n            if (m.method === \\'subscribe\\') {\\n                MQTTClient.subscribe(m.topic);\\n            } else if (m.method === \\'unsubscribe\\') {\\n                MQTTClient.unsubscribe(m.topic);\\n            } else if (m.method === \\'publish\\') {\\n                var mqtt_payload = null;\\n                try {\\n                    mqtt_payload = JSON.stringify(m.data);\\n                } catch( json_error ) {\\n                    console.error(\\\"json stringify error: \\\" + m.data);\\n                    return;\\n                }\\n\\n                var mqtt_msg = new Paho.MQTT.Message(mqtt_payload);\\n                mqtt_msg.destinationName = m.topic;\\n                MQTTClient.send(mqtt_msg);\\n            }\\n        } catch(e) {\\n            // we are dead!\\n           send({\\n               event: \\'fail\\',\\n               reason: \\\"network failure\\\"\\n            });\\n            try {\\n                MQTTClient.disconnect();\\n            } catch(e) {\\n                console.error(e);\\n            }\\n        }\\n\\n    }\\n\\n    function AppReady() {\\n\\n        if (window.addEventListener) {\\n            window.addEventListener(\\\"message\\\", eventHandler, false);\\n        } else if (window.attachEvent) {\\n            window.attachEvent(\\'onmessage\\', eventHandler);\\n        }\\n\\n        send({\\n          event: \\'ready\\'\\n        });\\n\\n        if (Reconnect !== -1)\\n        {\\n            clearInterval(Reconnect);\\n            Reconnect = -1;\\n        }\\n\\n    }// application ready\\n\\n\\n    function AppFail(message) {\\n      var e = \\\"Error code \\\" +\\n          parseInt(message.errorCode) + \\\": \\\" + message.errorMessage;\\n      send({\\n        event: \\'fail\\',\\n        reason: e\\n      });\\n    }\\n\\n    MQTTClient = new Paho.MQTT.Client(\\n        MqttIp,\\n        MqttPort,\\n        MqttClientId\\n    );\\n\\n    /*\\n     * Hold the id of the reconnect interval task\\n     */\\n    var Reconnect = -1;\\n\\n    /*\\n     * Callback which gets called when the connection is lost\\n     */\\n    function onConnectionLost(message){\\n        send({\\n            event: \\'fail\\',\\n            reason: \\\"connection lost error code \\\" + parseInt(message.errorCode)\\n        });\\n        if (Reconnect === -1) {\\n            Reconnect = setInterval(() => connect(), 2000);\\n        }\\n    }\\n\\n    MQTTClient.onConnectionLost = onConnectionLost;\\n\\n    // perhaps the busiest function in this module ;)\\n    MQTTClient.onMessageArrived = function(message) {\\n        // console.log(message);\\n        try {\\n             routeInbound(message);\\n        }catch(e) {\\n            if (e) {\\n                console.error(e);\\n            }\\n        }\\n    };\\n\\n    /**\\n     * Connect to MQTT...\\n     */\\n    function connect()\\n    {\\n        // setup connection options\\n        var options = {\\n            timeout: 120,\\n            onSuccess:  AppReady,\\n            onFailure: AppFail\\n        };\\n        // last will message sent on disconnect\\n        var willmsg = new Paho.MQTT.Message(JSON.stringify({\\n            clientId: MqttClientId\\n        }));\\n        willmsg.destinationName = \\\"iov/clientDisconnect\\\";\\n        options.willMessage = willmsg;\\n\\n        if (MqttUseSSL === true) {\\n            options.useSSL = true;\\n        }\\n\\n        try {\\n            MQTTClient.connect(options);\\n        } catch(e) {\\n            console.error(\\\"connect failed\\\", e);\\n            send({\\n                event: \\'fail\\',\\n                reason: \\\"connect failed\\\"\\n            });\\n        }\\n    }\\n\\n    connect();\\n}\\n\\nfunction clspRouter() {\\n    try {\\n        _clspRouter();\\n    } catch(e) {\\n        console.error(\\\"IFRAME error\\\");\\n        console.error(e);\\n    }\\n}\\n\\nfunction onunload()\\n{\\n    if (typeof MQTTClient !== \\'undefined\\') {\\n        MQTTClient.disconnect();\\n    }\\n}\\n\";\n\n\n\nfunction pframe_client(iframe, iov) {\n    var self = {\n        dispatch: {},\n        iov,\n    };\n\n\n    // primitive function that routes message to iframe\n    function command(m) {\n\n        if (iframe.contentWindow !== null) {\n            iframe.contentWindow.postMessage(m,\"*\");\n            return;\n        }\n\n        var t = setInterval(function(){\n            if (iframe.contentWindow !== null) {\n                iframe.contentWindow.postMessage(m,\"*\");\n                clearInterval(t);\n            }\n        },1000);\n    }\n\n    /* message from mqttRouter routeInbound go handler which associates this\n       client with the clientId. It then calls self.inboundHandler handler to\n       process the message from the iframe.\n    */\n    self.inboundHandler = function(message) {\n        var handler = self.dispatch[message.destinationName];\n        if ( typeof handler !== 'undefined'){\n             try {\n                handler(message);\n             } catch( e ) {\n                console.error( e );\n             }\n        } else {\n            console.error(\"No handler for \" + message.destinationName);\n        }\n    };\n\n    self.subscribe = function(topic, callback) {\n        self.dispatch[topic] = callback;\n        command({\n            method: \"subscribe\",\n            topic: topic\n        });\n    };\n\n    self.unsubscribe = function(topic) {\n        if ( topic in self.dispatch ){\n            delete self.dispatch[topic];\n        }\n        command({\n            method: \"unsubscribe\",\n            topic: topic\n        });\n    };\n\n    self.publish = function(topic, data){\n      command({\n          method: \"publish\",\n          topic: topic,\n          data: data\n      });\n    };\n\n\n    self.transaction = function( topic, callback, obj ) {\n        obj.resp_topic = iov.config.clientId + \"/response/\"+parseInt(Math.random()*1000000);\n        self.subscribe(obj.resp_topic,function(mqtt_resp){\n            //call user specified callback to handle response from remote process\n            var resp = JSON.parse(mqtt_resp.payloadString);\n            // call user specified callback to handle response\n            callback(resp);\n            // cleanup.\n            self.unsubscribe(obj.resp_topic);\n        });\n\n        // start transaction\n        //MQTTClient.send(mqtt_msg);\n        self.publish(topic, obj );\n    };\n\n    // return client for video player.\n    return self;\n}\n\n\nwindow.mqttConduit = function(iov){\n    var config = iov.config;\n    var client = {};\n    var iframe = document.createElement('iframe');\n    var MqttUseSSL = (config.useSSL || false) ? \"true\": \"false\";\n\n    var markup =\n        '<html><head>'+\n        '<script>\\n' +\n            \"var MqttIp = '\" + config.wsbroker + \"' ; \\n\" +\n            \"var MqttPort = \" + config.wsport + \"; \\n\" +\n            \"var MqttUseSSL = \" + MqttUseSSL + \"; \\n\" +\n            \"var MqttClientId = '\" + config.clientId + \"' ; \\n\" +\n            \"var Origin = '\" + window.location.origin + \"' ; \\n\" +\n            iframe_code + '\\n' +\n        '</script>\\n' +\n        '</head><body onload=\"clspRouter();\" onunload=\"onunload();\"><body>'+\n        '<div id=\"message\"></div>'+\n        '</body></html>'\n    ;\n\n\n\n    // inject code into iframe\n    iframe.srcdoc = markup;\n\n    iframe.width = 0;\n    iframe.height = 0;\n    iframe.setAttribute('style','display:none;');\n    iframe.setAttribute('id',config.clientId);\n\n\n    // attach hidden iframe to player\n    //document.body.appendChild(iframe);\n    if (config.videoElementParent !== null) {\n        config.videoElementParent.appendChild(iframe);\n    } else if (iov.videoElement.parentNode !== null) {\n        iov.videoElement.parentNode.appendChild(iframe);\n        config.videoElementParent = iov.videoElement.parentNode;\n    } else {\n        var t = setInterval(function(){\n            if (iov.videoElement.parentNode !== null) {\n                iov.videoElement.parentNode.appendChild(iframe);\n                config.videoElementParent = iov.videoElement.parentNode;\n                clearInterval(t);\n            }\n        },1000);\n    }\n\n\n    return pframe_client(iframe, iov);\n}\n","import Debug from 'debug';\nimport uuidv4 from 'uuid/v4';\n\nimport MqttTopicHandlers from './MqttTopicHandlers';\nimport IOVPlayer from './player';\n\nconst DEBUG_PREFIX = 'skyline:clsp:iov';\n\n/**\n * Internet of Video client. This module uses the MediaSource API to\n * deliver video content streamed through MQTT from distributed sources.\n */\n\n//  @todo - should this be the videojs component?  it seems like the\n// mqttHandler does nothing, and that this could replace it\nexport default class IOV {\n  static compatibilityCheck () {\n    // @todo - shouldn't this be done in the utils function?\n    // @todo - does this need to throw an error?\n    // For the MAC\n    var NoMediaSourceAlert = false;\n\n    window.MediaSource = window.MediaSource || window.WebKitMediaSource;\n\n    if (!window.MediaSource) {\n      if (NoMediaSourceAlert === false) {\n        window.alert('Media Source Extensions not supported in your browser: Claris Live Streaming will not work!');\n      }\n\n      NoMediaSourceAlert = true;\n    }\n  }\n\n  static generateConfigFromUrl (url) {\n    if (!url) {\n      throw new Error('No source was given to be parsed!');\n    }\n\n    // We use an anchor tag here beacuse, when an href is added to\n    // an anchor dom Element, the parsing is done for you by the\n    // browser.\n    const parser = document.createElement('a');\n\n    let useSSL;\n    let default_port;\n\n    // Chrome is the only browser that allows non-http protocols in\n    // the anchor tag's href, so change them all to http here so we\n    // get the benefits of the anchor tag's parsing\n    if (url.substring(0, 5).toLowerCase() === 'clsps') {\n      useSSL = true;\n      parser.href = url.replace('clsps', 'https');\n      default_port = 443;\n    }\n    else if (url.substring(0, 4).toLowerCase() === 'clsp') {\n      useSSL = false;\n      parser.href = url.replace('clsp', 'http');\n      default_port = 9001;\n    }\n    else {\n      throw new Error('The given source is not a clsp url, and therefore cannot be parsed.');\n    }\n\n    const paths = parser.pathname.split('/');\n    const streamName = paths[paths.length - 1];\n\n    let hostname = parser.hostname;\n    let port = parser.port;\n\n    if (port.length === 0) {\n      port = default_port;\n    }\n\n    // @ is a special address meaning the server that loaded the web page.\n    if (hostname === '@') {\n      hostname = window.location.hostname;\n    }\n\n    return {\n      // url,\n      wsbroker: hostname,\n      wsport: parseInt(port),\n      streamName,\n      useSSL,\n    };\n  }\n\n  static factory (mqttConduitCollection, player, config = {}) {\n    return new IOV(mqttConduitCollection, player, config);\n  }\n\n  static fromUrl (url, mqttConduitCollection, player, config = {}) {\n    return IOV.factory(mqttConduitCollection, player, {\n      ...config,\n      ...IOV.generateConfigFromUrl(url),\n    });\n  }\n\n  constructor (mqttConduitCollection, player, config) {\n    IOV.compatibilityCheck();\n\n    this.id = uuidv4();\n\n    this.debug = Debug(`${DEBUG_PREFIX}:${this.id}:main`);\n    this.debug('constructor');\n\n    this.destroyed = false;\n    this.onReadyAlreadyCalled = false;\n    this.playerInstance = player;\n    this.videoElement = this.playerInstance.el();\n\n    this.config = {\n      clientId: this.id,\n      wsbroker: config.wsbroker,\n      wsport: config.wsport,\n      useSSL: config.useSSL,\n      streamName: config.streamName,\n      appStart: config.appStart,\n      videoElementParent: config.videoElementParent || null,\n    };\n\n    this.statsMsg = {\n      byteCount: 0,\n      inkbps: 0,\n      host: document.location.host,\n      clientId: this.config.clientId,\n    };\n\n    // @todo - this needs to be a global service or something\n    this.mqttConduitCollection = mqttConduitCollection;\n\n    // handle inbound messages from MQTT, including video\n    // and distributes them to players.\n    this.mqttTopicHandlers = new MqttTopicHandlers(this.id, this);\n    this.conduit = this.mqttConduitCollection.addFromIov(this);\n\n    this.events = {\n      connection_lost : (responseObject) => {\n        // @todo - close all players and display an error message\n        console.error('MQTT connection lost');\n        console.error(responseObject);\n      },\n\n      // @todo - does this ever get fired?\n      on_message: this.mqttTopicHandlers.msghandler,\n\n      // generic exception handler\n      exception: (text, e) => {\n        console.error(text);\n        if (typeof e !== 'undefined') {\n          console.error(e.stack);\n        }\n      },\n    };\n\n    this.player = IOVPlayer.factory(this, this.playerInstance);\n  }\n\n  clone (config) {\n    this.debug('clone');\n\n    const cloneConfig = {\n      ...config,\n      videoElementParent: this.config.videoElementParent,\n    };\n\n    // @todo - is it possible to reuse the iov player?\n    return IOV.factory(\n      this.mqttConduitCollection,\n      this.playerInstance,\n      cloneConfig\n    );\n  }\n\n  cloneFromUrl (url, config = {}) {\n    this.debug('cloneFromUrl');\n\n    return this.clone({\n      ...IOV.generateConfigFromUrl(url),\n      ...config,\n    });\n  }\n\n  // query remote server and get a list of all stream names\n  getAvailableStreams (callback) {\n    this.debug('getAvailableStreams');\n\n    this.conduit.transaction('iov/video/list', callback, {});\n  }\n\n  onChangeSource (url) {\n    this.debug(`changeSource on player \"${this.id}\"\"`);\n\n    if (!url) {\n      throw new Error('Unable to change source because there is no url!');\n    }\n\n    // // @todo - it is possible to keep an IOV instance if the host for the\n    // // stream is the same.\n    // if (iovConfig.hostname === this.iov.config.wsbroker) {\n    //   this.iov.conduit.transaction(\n    //     topic,\n    //     (...args) => this.onChangeSourceTransaction(this.iov, ...args),\n    //     request\n    //   );\n    //   return;\n    // }\n\n    const clone = this.cloneFromUrl(url);\n\n    // @todo - why is this needed?\n    if (this.config.parentNodeId !== null) {\n      var iframe_elm = document.getElementById(this.config.clientId);\n      var parent = document.getElementById(clone.config.parentNodeId);\n\n      if (parent) {\n        parent.removeChild(iframe_elm);\n      }\n\n      // remove code from iframe.\n      iframe_elm.srcdoc = '';\n    }\n\n    clone.player.on('firstChunk', () => {\n      this.updateIOV(clone);\n      this.destroy();\n    });\n  }\n\n  onReady (event) {\n    this.debug('onReady');\n\n    // @todo - why is this necessary?\n    if (this.videoElement.parentNode !== null) {\n      this.config.videoElementParentId = this.videoElement.parentNode.id;\n    }\n\n    const videoTag = this.playerInstance.children()[0];\n\n    // @todo - there must be a better way to determine autoplay...\n    if (videoTag.getAttribute('autoplay') !== null) {\n      // playButton.trigger('click');\n      this.playerInstance.trigger('play', videoTag);\n    }\n\n    if (this.onReadyAlreadyCalled) {\n      console.warn('tried to use this player more than once...');\n      return;\n    }\n\n    this.onReadyAlreadyCalled = true;\n\n    this.player.on('firstChunk', () => {\n      this.playerInstance.loadingSpinner.hide();\n    });\n\n    this.player.on('videoReceived', () => {\n      // reset the timeout monitor from videojs-errors\n      this.playerInstance.trigger('timeupdate');\n    });\n\n    this.player.on('videoInfoReceived', () => {\n      // reset the timeout monitor from videojs-errors\n      this.playerInstance.trigger('timeupdate');\n    });\n\n    this.playerInstanceEventListeners = {\n      changesrc: (event, { url }) => this.onChangeSource(url),\n    };\n\n    this.playerInstance.on('changesrc', this.playerInstanceEventListeners.changesrc);\n\n    this.player.play(this.videoElement.firstChild.id, this.config.streamName);\n\n    this.videoElement.addEventListener('mse-error-event', (e) => {\n      this.player.restart();\n    }, false);\n\n    // the mse service will stop streaming to us if we don't send\n    // a message to iov/stats within 1 minute.\n    this._statsTimer = setInterval(() => {\n      this.statsMsg.inkbps = (this.statsMsg.byteCount * 8) / 30000.0;\n      this.statsMsg.byteCount = 0;\n\n      this.conduit.publish('iov/stats', this.statsMsg);\n\n      this.debug('iov status', this.statsMsg);\n    }, 5000);\n  }\n\n  onFail (event) {\n    this.debug('onFail');\n\n    this.debug('network error', event.data.reason);\n    this.playerInstance.trigger('network-error', event.data.reason);\n  }\n\n  onData (event) {\n    this.debug('onData');\n\n    this.conduit.inboundHandler(event.data);\n  }\n\n  onMessage (event) {\n    const eventType = event.data.event;\n\n    this.debug('onMessage', eventType);\n\n    switch (eventType) {\n      case 'ready': {\n        this.onReady(event);\n        break;\n      }\n      case 'fail': {\n        this.onFail(event);\n        break;\n      }\n      case 'data': {\n        this.onData(event);\n        break;\n      }\n      default: {\n        console.error(`No match for event: ${eventType}`);\n      }\n    }\n  }\n\n  updateIOV (iov) {\n    this.playerInstance.tech(true).mqtt.updateIOV(iov);\n  }\n\n  destroy () {\n    this.debug('destroy');\n\n    if (this.destroyed) {\n      return;\n    }\n\n    this.destroyed = true;\n\n    clearInterval(this._statsTimer);\n\n    this.conduit.unsubscribe(`iov/video/${this.player.guid}/live`);\n\n    this.playerInstance.off('changesrc', this.playerInstanceEventListeners.changesrc);\n\n    this.player.destroy();\n\n    this.playerInstance = null;\n    this.player = null;\n\n    // @todo\n  }\n};\n","import Debug from 'debug';\n\nconst DEBUG_PREFIX = 'skyline:clsp:iov';\n\n/**\n * route inbound messages/data to player's event handlers.\n */\nexport default class MqttTopicHandlers {\n  constructor (id, iov) {\n    this.id = id;\n    this.debug = Debug(`${DEBUG_PREFIX}:${this.id}:MqttTopicHandlers`);\n\n    this.debug('constructing...');\n\n    this.iov = iov;\n    this._handlers = {};\n  }\n\n  get (topic) {\n    this.debug('getting...', topic);\n\n    return this._handlers[topic];\n  }\n\n  register (topic, callback) {\n    this.debug('register...', topic);\n\n    this._handlers[topic] = (...args) => {\n      this.debug('executing handler...', topic);\n\n      callback(...args);\n    };\n  }\n\n  unregister (topic) {\n    this.debug('unregistering...', topic);\n\n    if (this.exists(topic)) {\n      delete this._handlers[topic];\n    }\n  }\n\n  exists (topic) {\n    this.debug('exists?', topic);\n\n    return this._handlers.hasOwnProperty(topic);\n  }\n\n  // central entry point for all MQTT inbound traffic.\n  msghandler (message) {\n    this.debug('msghandler...', message);\n\n    var topic = message.destinationName;\n\n    if (!this.exists(topic)) {\n      this.debug(`No handler for ${topic} - message dropped`, message);\n\n      return;\n    }\n\n    try {\n      this.get(topic)(message);\n    }\n    catch (e) {\n      this.iov.events.exception(`${topic} handler exception`, e);\n    }\n  }\n}\n","import Debug from 'debug';\nimport debounce from 'lodash/debounce';\n\nconst DEBUG_PREFIX = 'skyline:clsp:iov';\nconst debug = Debug(`${DEBUG_PREFIX}:IOVPlayer`);\nconst silly = Debug(`silly:${DEBUG_PREFIX}:IOVPlayer`);\n\n/**\n * Responsible for receiving stream input and routing it to the media source\n * buffer for rendering on the video tag. There is some 'light' reworking of\n * the binary data that is required.\n *\n * @todo - this class should have no knowledge of videojs or its player, since\n * it is supposed to be capable of playing video by itself.  The plugin that\n * uses this player should have all of the videojs logic, and none should\n * exist here.\n *\n * var player = IOVPlayer.factory(iov);\n * player.play( video_element_id, stream_name );\n*/\nexport default class IOVPlayer {\n  static factory (iov, playerInstance) {\n    return new IOVPlayer(iov, playerInstance);\n  }\n\n  constructor (iov, playerInstance) {\n    debug('constructor');\n\n    this.state = 'initializing';\n\n    this.MAX_SEQ_PROC = 2;\n    this.BUFFER_LIMIT = 6;\n    this.EVENT_NAMES = [\n      'firstChunk',\n      'videoReceived',\n      'videoInfoReceived',\n    ];\n\n    this.iov = iov;\n    this.playerInstance = playerInstance;\n    this.eid = this.playerInstance.el().firstChild.id;\n    this.id = this.eid.replace('_html5_api', '');\n    this.videoElement = document.getElementById(this.eid);\n\n    if (!this.videoElement) {\n      throw new Error(`Unable to find an element in the DOM with id \"${this.eid}\".`);\n    }\n\n    this.mediaSourceEventListeners = {\n      sourceopen: (...args) => {\n        debug('onSourceOpen');\n\n        if (this.mediaSource.readyState === 'open') {\n          this.initializeSourceBuffer();\n          return;\n        }\n\n        // found when stress testing many videos, it is possible for the\n        // media source ready state not to be open even though\n        // source open callback is being called.\n        const intervalToRetry = setInterval(() => {\n          if (this.mediaSource.readyState === 'open') {\n            this.initializeSourceBuffer();\n            clearInterval(intervalToRetry);\n          }\n        }, 1000);\n      },\n      sourceended: (...args) => {\n        debug('onSourceEnded');\n\n        // @todo - do we need to clear the buffer manually?\n        this.stop();\n        this.source_buffer_ready = false;\n      },\n      error: (e) => {\n        console.error('MSE error');\n        console.error(e);\n      },\n    };\n\n    this.sourceBufferEventListeners = {\n      updateend: (...args) => this.onUpdateEnd(...args),\n      error: (e) => {\n        console.error('MSE sourceBuffer error');\n        console.error(e);\n      },\n    };\n\n    this.documentEventListeners = {\n      visibilitychange: debounce(\n        () => this.reinitializeMse(),\n        2000,\n        {\n          leading: true,\n          trailing: false,\n        }\n      ),\n    };\n\n    this.events = {};\n    this.vqueue = []; // used if the media source buffer is busy\n\n    // @todo - there must be a more proper way to do this...\n    for (let i = 0; i < this.EVENT_NAMES.length; i++) {\n      this.events[this.EVENT_NAMES[i]] = [];\n    }\n\n    // Used for determining the size of the internal buffer hidden from the MSE\n    // api by recording the size and time of each chunk of video upon buffer append\n    // and recording the time when the updateend event is called.\n    this.LogSourceBuffer = false;\n    this.LogSourceBufferTopic = null;\n\n    this.moovBox = null;\n    this.guid = null;\n    this.mimeCodec = null;\n\n    this.resetPlayState();\n  }\n\n  on (name, action) {\n    debug(`Registering Listener for ${name} event...`);\n\n    if (!this.EVENT_NAMES.includes(name)) {\n      throw new Error(`\"${name}\" is not a valid event.\"`);\n    }\n\n    this.events[name].push(action);\n  }\n\n  trigger (name) {\n    debug(`Triggering ${name} event...`);\n\n    if (!this.EVENT_NAMES.includes(name)) {\n      throw new Error(`\"${name}\" is not a valid event.\"`);\n    }\n\n    for (let i = 0; i < this.events[name].length; i++) {\n      this.events[name][i](this);\n    }\n  }\n\n  resetPlayState () {\n    debug('resetPlayState');\n\n    this.state = 'idle';\n    this.source_buffer_ready = false;\n  }\n\n  assertMimeCodecSupported (mimeCodec) {\n    if (!window.MediaSource || !window.MediaSource.isTypeSupported(mimeCodec)) {\n      this.state = 'unsupported-mime-codec';\n\n      const message = `Unsupported mime codec: ${mimeCodec}`;\n\n      // the browser does not support this video format\n      // @todo - the IOV player should have no knowledge of the videojs player\n      this.playerInstance.errors.extend({\n        PLAYER_ERR_IOV: {\n          headline: 'Error Playing Stream',\n          message,\n        },\n      });\n\n      this.playerInstance.error({ code: 'PLAYER_ERR_IOV' });\n\n      throw new Error(message);\n    }\n  }\n\n  reinitializeMse () {\n    debug('reinitializeMse');\n\n    this.resetPlayState();\n\n    if (this.mediaSource) {\n      // free resource\n      URL.revokeObjectURL(this.mediaSource);\n\n      // reallocate, this will call media source open which will\n      // append the MOOV atom.\n      this.videoElement.src = URL.createObjectURL(this.mediaSource);\n    }\n  }\n\n  restart () {\n    debug('restart');\n\n    this.stop();\n    this.play();\n  }\n\n  play (streamName) {\n    debug('play');\n\n    this.iov.conduit.transaction(\n      `iov/video/${window.btoa(this.iov.config.streamName)}/request`,\n      (...args) => this.onIovPlayTransaction(...args),\n      { clientId: this.iov.config.clientId }\n    );\n  }\n\n  // @todo - it seems like a lot of the logic here is relative to something\n  // inside of the IOV class - does the IOV instance mutate some of our properties?\n  // Should this logic be moved to the IOV class?\n  onBeforeAppendBuffer (bytearray) {\n    silly('onBeforeAppendBuffer');\n\n    if ((this.LogSourceBuffer === true) && (this.LogSourceBufferTopic !== null)) {\n      silly(`recording ${bytearray.length} bytes of data...`);\n\n      const mqtt_msg = new window.Paho.MQTT.Message(bytearray);\n      mqtt_msg.destinationName = this.LogSourceBufferTopic;\n      window.MQTTClient.send(mqtt_msg);\n    }\n\n    // increment bytecount stats\n    this.iov.statsMsg.byteCount += bytearray.length;\n  }\n\n  flushBuffer () {\n    console.log('Flushing Buffer...');\n    debug('Flushing Buffer...');\n\n    if (this.sourceBuffer.buffered.length <= 0) {\n      return;\n    }\n\n    const start = parseInt(this.sourceBuffer.buffered.start(0));\n    const end = parseInt(this.sourceBuffer.buffered.end(0));\n    const timeBuffered = end - start;\n\n    console.log(start, end, timeBuffered)\n    if (timeBuffered <= 3) {\n      return;\n    }\n\n    if (this.sourceBuffer.updating !== false) {\n      this.sourceBuffer.abort();\n    }\n\n    console.log('Flushing...')\n    this.sourceBuffer.remove(start, end - 2);\n  }\n\n  appendVideo (moofBox) {\n    console.log('tryna')\n    silly('Appending moof data...');\n\n    if (!moofBox) {\n      console.warn('Cannot use empty moof...');\n      return;\n    }\n\n    // If the buffer is busy, we'll try on the next call, and drop the frame\n    if (this.sourceBuffer.updating === true) {\n      debug('Dropping frame because the buffer is busy...');\n      return;\n    }\n\n    try {\n      debug('appending moof to sourceBuffer...');\n      this.onBeforeAppendBuffer(moofBox);\n      this.sourceBuffer.appendBuffer(moofBox);\n    }\n    catch (e) {\n      // internal error, this has been observed to happen the tab\n      // in the browser where this video player lives is hidden\n      // then reselected. 'e' is undefined the error is bug\n      // within the MSE C++ implementation in the browser.\n\n      console.error('Excetion thrown from appendBuffer', e);\n      this.reinitializeMse();\n    }\n  }\n\n  stop () {\n    debug('stop');\n\n    this.moovBox = null;\n\n    if (this.guid !== undefined) {\n      this.iov.conduit.unsubscribe(`iov/video/${this.guid}/live`);\n    }\n\n    this.resetPlayState();\n\n    this.iov.conduit.publish(\n      `iov/video/${this.guid}/stop`,\n      { clientId: this.iov.config.clientId }\n    );\n  }\n\n  resyncStream () {\n    // subscribe to a sync topic that will be called if the stream that is feeding\n    // the mse service dies and has to be restarted that this player should restart the stream\n    debug('Trying to resync stream...');\n\n    this.iov.conduit.subscribe(`iov/video/${this.guid}/resync`, () => {\n      debug('sync received re-initialize media source buffer');\n      this.reinitializeMse();\n    });\n  }\n\n  // @todo - there is much shared between this and onChangeSourceTransaction\n  onIovPlayTransaction ({ mimeCodec, guid }) {\n    debug('onIovPlayTransaction');\n\n    this.assertMimeCodecSupported(mimeCodec);\n\n    const initSegmentTopic = `${this.iov.config.clientId}/init-segment/${parseInt(Math.random() * 1000000)}`;\n\n    this.state = 'waiting-for-first-moov';\n\n    this.iov.conduit.subscribe(initSegmentTopic, ({ payloadBytes }) => {\n      debug(`onIovPlayTransaction ${initSegmentTopic} listener fired`);\n      debug(`received moov of type \"${typeof payloadBytes}\" from server`);\n\n      const moov = payloadBytes;\n\n      this.state = 'waiting-for-first-moof';\n\n      this.iov.conduit.unsubscribe(initSegmentTopic);\n\n      const newTopic = `iov/video/${guid}/live`;\n\n      // subscribe to the live video topic.\n      this.iov.conduit.subscribe(\n        newTopic,\n        (...args) => this.onMoof(...args)\n      );\n\n      this.guid = guid;\n      this.moovBox = moov;\n      this.mimeCodec = mimeCodec;\n\n      document.addEventListener('visibilitychange', this.documentEventListeners.visibilitychange);\n\n      this.trigger('firstChunk');\n\n      // when videojs initializes the video element (or something like that),\n      // it creates events and listeners on that element that it uses, however\n      // these events interfere with our ability to play clsp streams.  Cloning\n      // the element like this and reinserting it is a blunt instrument to remove\n      // all of the videojs events so that we are in control of the player.\n      var clone = this.videoElement.cloneNode();\n      var parent = this.videoElement.parentNode;\n\n      if (parent !== null) {\n        parent.replaceChild(clone, this.videoElement);\n        this.videoElement = clone;\n      }\n\n      // @todo - need to revisit the logic below... how does this stuff relate to\n      // reinitializeMse?\n\n      this.initializeMediaSource();\n\n      // now assign media source extensions\n      // debug(\"Disregard: The play() request was interrupted ... its not an error!\");\n      this.videoElement.src = URL.createObjectURL(this.mediaSource);\n\n      this.resyncStream();\n    });\n\n    this.iov.conduit.publish(`iov/video/${guid}/play`, {\n      initSegmentTopic,\n      clientId: this.iov.config.clientId,\n    });\n  }\n\n  onMoof ({ payloadBytes }) {\n    silly('onMoof');\n\n    this.state = 'playing';\n\n    if (this.source_buffer_ready === false) {\n      debug('media source not yet open - dropping frame');\n      return;\n    }\n\n    this.trigger('videoReceived');\n\n    this.appendVideo(payloadBytes);\n  }\n\n  // @todo - need a method to properly destroy source buffer\n  initializeSourceBuffer () {\n    debug('initializeSourceBuffer');\n\n    // New media source opened. Add a buffer and append the moov MP4 video data.\n    this.sourceBuffer = this.mediaSource.addSourceBuffer(this.mimeCodec);\n    this.sourceBuffer.mode = 'sequence';\n\n    // this.sourceBuffer.addEventListener('updateend', this.sourceBufferEventListeners.updateend);\n    this.sourceBuffer.addEventListener('error', this.sourceBufferEventListeners.error);\n\n    // we are now able to process video\n    this.source_buffer_ready = true;\n\n    if (!this.moovBox) {\n      // @todo - should this throw?\n      return;\n    }\n\n    this.onBeforeAppendBuffer(this.moovBox);\n    this.sourceBuffer.appendBuffer(this.moovBox);\n\n    this.trigger('videoInfoReceived');\n  }\n\n  initializeMediaSource () {\n    if (this.mediaSource) {\n      this.destroyMediaSource();\n    }\n\n    // create media source buffer and start routing video traffic.\n    this.mediaSource = new window.MediaSource();\n\n    this.mediaSource.addEventListener('sourceopen', this.mediaSourceEventListeners.sourceopen);\n    this.mediaSource.addEventListener('sourceended', this.mediaSourceEventListeners.sourceended);\n    this.mediaSource.addEventListener('error', this.mediaSourceEventListeners.error);\n  }\n\n  destroySourceBuffer () {\n    if (!this.sourceBuffer) {\n      return;\n    }\n\n    this.sourceBuffer.abort();\n\n    // this.sourceBuffer.removeEventListener('updateend', this.sourceBufferEventListeners.updateend);\n    this.sourceBuffer.removeEventListener('error', this.sourceBufferEventListeners.error);\n\n    this.sourceBuffer = null;\n    this.source_buffer_ready = false;\n  }\n\n  destroyMediaSource () {\n    if (!this.mediaSource) {\n      return;\n    }\n\n    this.mediaSource.removeEventListener('sourceopen', this.mediaSourceEventListeners.sourceopen);\n    this.mediaSource.removeEventListener('sourceended', this.mediaSourceEventListeners.sourceended);\n    this.mediaSource.removeEventListener('error', this.mediaSourceEventListeners.error);\n\n    let sourceBuffers = this.mediaSource.sourceBuffers;\n\n    if (sourceBuffers.SourceBuffers) {\n      // @see - https://developer.mozilla.org/en-US/docs/Web/API/MediaSource/sourceBuffers\n      sourceBuffers = sourceBuffers.SourceBuffers();\n    }\n\n    for (let i = 0; i < sourceBuffers.length; i++) {\n      this.mediaSource.removeSourceBuffer(sourceBuffers[i]);\n    }\n\n    this.mediaSource = null;\n  }\n\n  destroy () {\n    this.stop();\n\n    document.removeEventListener('visibilitychange', this.documentEventListeners.visibilitychange);\n\n    this.iov = null;\n    this.playerInstance = null;\n    this.videoElement = null;\n    this.events = null;\n    this.vqueue = null;\n    this.LogSourceBuffer = null;\n    this.LogSourceBufferTopic = null;\n    this.guid = null;\n    this.moovBox = null;\n    this.mimeCodec = null;\n\n    this.destroySourceBuffer();\n    this.destroyMediaSource();\n\n    this.sourceBufferEventListeners = null;\n    this.mediaSourceEventListeners = null;\n    this.documentEventListeners = null;\n  }\n\n  // formatMoof(payloadBytes) {\n  //   var moofBox = payloadBytes;\n\n  //   moofBox[20] = (this.numFramesReceived & 0xFF000000) >> 24;\n  //   moofBox[21] = (this.numFramesReceived & 0x00FF0000) >> 16;\n  //   moofBox[22] = (this.numFramesReceived & 0x0000FF00) >> 8;\n  //   moofBox[23] = this.numFramesReceived & 0xFF;\n\n  //   return moofBox;\n  // }\n\n  // onChangeSourceTransaction(iov, { mimeCodec, guid }) {\n  //   debug('onChangeSourceTransaction');\n\n  //   this.assertMimeCodecSupported(mimeCodec);\n\n  //   const initSegmentTopic = `${this.iov.config.clientId}/init-segment/${parseInt(Math.random() * 1000000)}`;\n\n  //   this.state = 'changing';\n\n  //   iov.conduit.subscribe(initSegmentTopic, ({ payloadBytes }) => {\n  //     debug(`onChangeSourceTransaction ${initSegmentTopic} listener fired`);\n  //     debug(`received moov of type \"${typeof payloadBytes}\" from server`);\n\n  //     const moov = payloadBytes;\n\n  //     this.state = 'waiting-for-moof';\n\n  //     iov.conduit.unsubscribe(initSegmentTopic);\n\n  //     const newTopic = `iov/video/${guid}/live`;\n\n  //     // When we receive the first moof, we need to unregister the old listeners, get the player\n  //     // ready, ensure all subsequent moofs are handled appropriately, and update the iov.\n  //     iov.conduit.subscribe(newTopic, ({ payloadBytes }) => {\n  //       // Unregister the old stuff, and unregister this listener to ensure that it\n  //       // does not get used again, since it is only meant to be executed on the first moof\n  //       iov.conduit.unsubscribe(newTopic);\n\n  //       this.reinitializeMse();\n\n  //       this.guid = guid;\n  //       this.moovBox = moov;\n  //       this.mimeCodec = mimeCodec;\n\n  //       // Handle this moof by calling our listener manually\n  //       this.onMoof({ payloadBytes });\n  //       // Handle subsequent moofs by registering our listener\n  //       iov.conduit.subscribe(newTopic, (...args) => this.onMoof(...args));\n  //     });\n  //   });\n\n  //   iov.conduit.publish(`iov/video/${guid}/play`, {\n  //     initSegmentTopic,\n  //     clientId: iov.config.clientId,\n  //   });\n  // }\n\n  // appendNextInQueue() {\n  //   debug('Appending next moof in queue...');\n\n  //   if (this.vqueue.length < 1) {\n  //     // console.warn('There is no moof in the queue!');\n  //     return;\n  //   }\n\n  //   if (this.sourceBuffer.updating === true) {\n  //     debug('SourceBuffer is updating, cannot append next moof, dropping it...');\n  //     this.vqueue = this.vqueue.slice(1);\n  //     return;\n  //   }\n\n  //   this.appendVideo(this.vqueue[0]);\n  // }\n\n  // truncateBuffer() {\n  //   silly('truncateBuffer');\n\n  //   if (this.sourceBuffer.buffered.length <= 0) {\n  //     return;\n  //   }\n\n  //   const start = this.sourceBuffer.buffered.start(0);\n  //   const end = this.sourceBuffer.buffered.end(0);\n  //   const time_buffered = end - start;\n\n  //   if (time_buffered <= 30) {\n  //     return;\n  //   }\n\n  //   debug('About to truncate the buffer...');\n\n  //   try {\n  //     // observed this fail during a memry snapshot in chrome\n  //     // otherwise no observed failure, so ignore exception.\n  //     this.sourceBuffer.remove(start, start + this.BUFFER_LIMIT);\n  //   }\n  //   catch (e) {\n  //     console.error(`error while removing from source buffer for player \"${this.id}\"`);\n  //     console.error(e);\n  //   }\n  // }\n\n  // onUpdateEnd (...args) {\n  //   silly('onUpdateEnd');\n\n  //   if (this.videoElement.paused === true) {\n  //     debug('Video is paused!');\n\n  //     try {\n  //       const promise = this.videoElement.play();\n\n  //       if (promise) {\n  //         // Handle promise errors\n  //         promise.catch((error) => {\n  //           console.error('Couldn\\'t play the paused stream...', error);\n  //         });\n  //       }\n  //     }\n  //     catch (error) {\n  //       console.error('Couldn\\'t play the paused stream...', error);\n  //     }\n\n  //     return;\n  //   }\n\n  //   if (this.mediaSource.readyState === 'open') {\n  //     // this.appendNextInQueue();\n  //     // this.truncateBuffer();\n  //   }\n  // }\n};\n","const MINIMUM_CHROME_VERSION = 52;\n\nfunction browserIsCompatable () {\n  // Chrome 1+\n  const isChrome = (Boolean(window.chrome) && Boolean(window.chrome.webstore));\n\n  if (!isChrome) {\n    return false;\n  }\n\n  try {\n    return (parseInt(navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./)[2], 10) >= MINIMUM_CHROME_VERSION);\n  }\n  catch (error) {\n    return false;\n  }\n}\n\nexport default {\n  supported: browserIsCompatable,\n};\n","import 'videojs-errors';\n\nimport 'srcdoc-polyfill';\nimport './conduit/clspConduit.generated.js';\n// import './conduit/clspConduit.generated.min.js';\n\nimport MseOverMqttPlugin from './MseOverMqttPlugin';\nimport '../styles/videojs-mse-over-clsp.scss';\n\n// @todo - do not initialize the plugin by default, since that is a side\n// effect.  make the caller call the initialize function.  also, is it\n// possible to unregister the plugin?\nconst clspPlugin = MseOverMqttPlugin();\n\nclspPlugin.register();\n\nexport default clspPlugin;\n","// removed by extract-text-webpack-plugin","module.exports = videojs;"],"sourceRoot":""}